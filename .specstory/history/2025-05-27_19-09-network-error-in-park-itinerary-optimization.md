<!-- Generated by SpecStory -->

# Network Error in Park Itinerary Optimization (2025-05-27 14:09:42)

_**User**_

AxiosError: Network Error
    at XMLHttpRequest.handleError (http://localhost:3001/_next/static/chunks/node_modules_axios_lib_99999129._.js:2480:20)
    at Axios.request (http://localhost:3001/_next/static/chunks/node_modules_axios_lib_99999129._.js:3161:49)
    at async http://localhost:3001/_next/static/chunks/src_bbea367e._.js:80:26
    at async ParkItineraryOptimizer.initialize (http://localhost:3001/_next/static/chunks/src_bbea367e._.js:235:37)
    at async ParkItineraryOptimizer.generateItinerary (http://localhost:3001/_next/static/chunks/src_bbea367e._.js:610:13)
    at async optimizeItinerary (http://localhost:3001/_next/static/chunks/src_bbea367e._.js:1201:20)
    at async onSubmit (http://localhost:3001/_next/static/chunks/src_bbea367e._.js:8963:28)
    at async http://localhost:3001/_next/static/chunks/node_modules_ceea8432._.js:1875:21

Error: Failed to fetch attractions for park magic-kingdom
    at http://localhost:3001/_next/static/chunks/src_bbea367e._.js:84:15
    at async ParkItineraryOptimizer.initialize (http://localhost:3001/_next/static/chunks/src_bbea367e._.js:235:37)
    at async ParkItineraryOptimizer.generateItinerary (http://localhost:3001/_next/static/chunks/src_bbea367e._.js:610:13)
    at async optimizeItinerary (http://localhost:3001/_next/static/chunks/src_bbea367e._.js:1201:20)
    at async onSubmit (http://localhost:3001/_next/static/chunks/src_bbea367e._.js:8963:28)
    at async http://localhost:3001/_next/static/chunks/node_modules_ceea8432._.js:1875:21

---

_**Assistant**_

I can see you're experiencing a network error when trying to fetch attractions for Magic Kingdom. Let me help you debug this issue by examining the relevant code and API endpoints.

---

<details>
            <summary>Searched codebase "ParkItineraryOptimizer initialize fetch attractions magic-kingdom" • **25** results</summary>
        
| File | Lines |
|------|-------|
| `src/engines/itinerary/optimizer.ts` | L135-173 |
| `src/app/dashboard/optimizer/components/attraction-preferences.tsx` | L41-58 |
| `src/engines/itinerary/optimizer.ts` | L173-228 |
| `src/engines/itinerary/optimizer.ts` | L362-393 |
| `src/app/api/attractions/[attractionId]/wait-times/route.ts` | L130-214 |
| `src/app/dashboard/parks/magic-kingdom/page.tsx` | L246-295 |
| `src/app/dashboard/parks/magic-kingdom/page.tsx` | L148-197 |
| `src/app/dashboard/parks/magic-kingdom/page.tsx` | L197-246 |
| `src/app/dashboard/parks/magic-kingdom/page.tsx` | L96-148 |
| `src/engines/itinerary/optimizer.ts` | L238-248 |
| `src/app/dashboard/attractions/page.tsx` | L58-103 |
| `src/engines/itinerary/optimizer.ts` | L1170-1212 |
| `src/engines/itinerary/optimizer.ts` | L248-264 |
| `src/components/optimizer/recommendation-engine/recommendation-engine.tsx` | L22-44 |
| `src/engines/itinerary/optimizer.ts` | L1406-1459 |
| `src/engines/itinerary/optimizer.ts` | L982-1004 |
| `src/components/attractions/types.ts` | L44-54 |
| `src/engines/itinerary/optimizer.ts` | L264-295 |
| `src/engines/itinerary/optimizer.ts` | L514-533 |
| `src/engines/itinerary/optimizer.ts` | L800-832 |
| `src/app/api/attractions/[attractionId]/wait-times/route.ts` | L214-293 |
| `src/engines/itinerary/optimizer.ts` | L947-982 |
| `src/app/dashboard/parks/magic-kingdom/page.tsx` | L417-460 |
| `src/engines/itinerary/optimizer.ts` | L1004-1023 |
| `src/engines/itinerary/optimizer.ts` | L756-800 |

</details>

---

Now let me look for the `getParkAttractions` function that's being called in the optimizer:

---

<details>
            <summary>Searched codebase "getParkAttractions function fetch attractions API" • **25** results</summary>
        
| File | Lines |
|------|-------|
| `src/lib/api/themeParks.ts` | L90-103 |
| `src/engines/waitTimes/index.ts` | L249-274 |
| `src/app/api/attractions/[attractionId]/route.ts` | L1-26 |
| `src/app/api/parks/[parkId]/route.ts` | L26-78 |
| `src/app/api/attractions/[attractionId]/wait-times/route.ts` | L984-1026 |
| `src/lib/api/themeParks.ts` | L103-116 |
| `src/app/api/attractions/[attractionId]/wait-times/route.ts` | L726-775 |
| `src/components/parks/ParkExplorer.tsx` | L41-99 |
| `src/app/api/attractions/[attractionId]/wait-times/route.ts` | L214-293 |
| `src/app/dashboard/attractions/page.tsx` | L103-141 |
| `src/components/parks/ParkExplorer.tsx` | L414-449 |
| `src/app/api/attractions/[attractionId]/wait-times/route.ts` | L936-984 |
| `src/types/api.ts` | L43-62 |
| `src/app/dashboard/optimizer/components/attraction-preferences.tsx` | L41-58 |
| `src/types/attraction.ts` | L1-26 |
| `src/components/parks/ParkMap.tsx` | L462-523 |
| `src/types/api.ts` | L28-43 |
| `src/components/parks/ParkMap.tsx` | L41-49 |
| `src/app/api/attractions/[attractionId]/wait-times/route.ts` | L130-214 |
| `src/components/attractions/types.ts` | L44-54 |
| `src/app/api/attractions/[attractionId]/wait-times/route.ts` | L83-110 |
| `src/lib/api/themeParks.ts` | L182-195 |
| `src/lib/utils/attractionData.ts` | L228-254 |
| `src/app/api/attractions/[attractionId]/wait-times/route.ts` | L110-130 |
| `src/lib/services/map-service.ts` | L944-998 |

</details>

---

Now let me check the API client configuration to understand how the requests are being made:

---

Read file: src/lib/api/themeParks.ts

---

Now let me check if there's a local API route that might be handling the park attractions request:

---

<details>
            <summary>Searched codebase "park attractions route.ts" • **10** results</summary>
        
| File |
|------|
| `undefined` |
| `undefined` |
| `undefined` |
| `undefined` |
| `undefined` |
| `undefined` |
| `undefined` |
| `undefined` |
| `undefined` |
| `undefined` |

</details>

---

Read file: src/app/api/parks/route.ts

---

Now let me check if there's a specific route for park attractions:

---

<details>
            <summary>Grep search for "/park/.*attractions" • **2** files</summary>
        
| File | Line | Match |
|------|------|-------|
| `file:///Users/williamcarrico/Web%20App%20Design/woody-disney-vacation-planning/src/lib/api/themeParks.ts` | L96 | `const response = await apiClient.get<Attraction[]>(`/park/${parkId}/attractions`);` |
| `file:///Users/williamcarrico/Web%20App%20Design/woody-disney-vacation-planning/src/app/api/parks/%5BparkId%5D/route.ts` | L39 | `const data = await cachedFetch(`${BASE_URL}/park/${parkId}/attractions`);` |

</details>

---

Perfect! Let me check the park-specific API route:

---

Read file: src/app/api/parks/[parkId]/route.ts

---

Now I understand the issue! The problem is that the `getParkAttractions` function in `src/lib/api/themeParks.ts` is making a direct request to the external ThemeParks.wiki API (`https://api.themeparks.wiki/v1`), but it should be making a request to your local API route instead.

Let me check how the API client is configured and see if there's a mismatch:

---

Read file: src/lib/api/themeParks.ts

---

Now I can see the issue clearly. The problem is that the `getParkAttractions` function is trying to make a direct request to the external ThemeParks.wiki API, but this is likely being blocked by CORS or network issues when running in the browser.

The solution is to modify the `getParkAttractions` function to use your local API route instead. Let me fix this:

---



---

Now let me also fix the `getParkLiveData` function to use the local API route:

---



---

Let me also fix the `getParkSchedule` function:

---



---

Now let me check if there are any other functions that need to be updated. Let me also check if the park ID being used is correct. Let me look at the error more closely - it's trying to fetch attractions for "magic-kingdom". Let me verify this is a valid park ID by checking the ThemeParks.wiki API documentation or seeing what park IDs are expected:

---

```bash
curl -s "https://api.themeparks.wiki/v1/destinations" | jq '.[] | select(.slug | contains("disney")) | .parks[] | {id, name, slug}' | head -20
```

```
williamcarrico@CIA woody-disney-vacation-planning % curl -s "https://api.themeparks.wiki/v1/destinations" | 
jq '.[] | select(.slug | contains("disney")) | .parks[] | {id, name, slug}' | head -20                  curl
 -s "https://api.themeparks.wiki/v1/destinations" | jq '.[] | select(.slug | contains("disney")) | .parks[] 
| {id, name, slug}' | head -20
jq: error (at <stdin>:952): Cannot index array with string "slug"
williamcarrico@CIA woody-disney-vacation-planning %
```

---

Let me try a different approach to check the API structure:

---

```bash
curl -s "https://api.themeparks.wiki/v1/destinations" | jq '.[0]' | head -30
```

```
williamcarrico@CIA woody-disney-vacation-planning % curl -s "https://api.themeparks.wiki/v1/destinations" | 
jq '.[0]' | head -30                                curl -s "https://api.themeparks.wiki/v1/destinations" | 
jq '.[0]' | head -30
jq: error (at <stdin>:952): Cannot index object with number
williamcarrico@CIA woody-disney-vacation-planning %
```

---

Let me check the API response structure:

---

```bash
curl -s "https://api.themeparks.wiki/v1/destinations" | jq 'keys' | head -10
```

```
williamcarrico@CIA woody-disney-vacation-planning % curl -s "https://api.themeparks.wiki/v1/destinations" | 
jq 'keys' | head -10                                curl -s "https://api.themeparks.wiki/v1/destinations" | 
jq 'keys' | head -10
[
  "destinations"
]
williamcarrico@CIA woody-disney-vacation-planning %
```

---

```bash
curl -s "https://api.themeparks.wiki/v1/destinations" | jq '.destinations[] | select(.slug | contains("disney")) | .parks[] | {id, name, slug}' | head -20
```

```
<"disney")) | .parks[] | {id, name, slug}' | head -20
{
  "id": "ca888437-ebb4-4d50-aed2-d227f7096968",
  "name": "Walt Disney Studios Park",
  "slug": null
}
{
  "id": "dae968d5-630d-4719-8b06-3d107e944401",
  "name": "Disneyland Park",
  "slug": null
}
{
  "id": "75ea578a-adc8-4116-a54d-dccb60765ef9",
  "name": "Magic Kingdom Park",
  "slug": null
}
{
  "id": "47f90d2c-e191-4239-a466-5892ef59a88b",
  "name": "EPCOT",
  "slug": null
}
williamcarrico@CIA woody-disney-vacation-planning %
```

---

Great! Now I can see that the park IDs are UUIDs, not slugs like "magic-kingdom". The Magic Kingdom Park has ID `75ea578a-adc8-4116-a54d-dccb60765ef9`. Let me check what park ID is being passed to the optimizer. Let me look at the optimizer component to see how the park ID is being set:

---

<details>
            <summary>Searched codebase "magic-kingdom parkId optimizer component" • **25** results</summary>
        
| File | Lines |
|------|-------|
| `src/components/optimizer/recommendation-engine/utils.ts` | L27-45 |
| `src/components/optimizer/recommendation-engine/constants.ts` | L13-24 |
| `src/components/optimizer/recommendation-engine/types.ts` | L19-28 |
| `src/engines/itinerary/optimizer.ts` | L135-173 |
| `src/app/dashboard/optimizer/page.tsx` | L156-199 |
| `src/app/dashboard/optimizer/components/attraction-preferences.tsx` | L41-58 |
| `src/lib/utils/restaurant.ts` | L142-182 |
| `src/app/dashboard/parks/magic-kingdom/page.tsx` | L417-460 |
| `src/components/optimizer/recommendation-engine/recommendation-engine.tsx` | L22-44 |
| `src/lib/data/parks.ts` | L14-67 |
| `src/app/dashboard/parks/magic-kingdom/page.tsx` | L370-417 |
| `src/engines/itinerary/optimizer.ts` | L362-393 |
| `src/components/attractions/types.ts` | L44-54 |
| `src/app/api/attractions/[attractionId]/wait-times/route.ts` | L130-214 |
| `src/components/itinerary/ItineraryPlanner.tsx` | L431-467 |
| `src/components/parks/ParkMap.tsx` | L63-112 |
| `src/app/dashboard/parks/magic-kingdom/page.tsx` | L888-904 |
| `src/app/dashboard/parks/magic-kingdom/page.tsx` | L96-148 |
| `src/app/dashboard/parks/magic-kingdom/page.tsx` | L295-345 |
| `src/lib/data/restaurants.ts` | L1-40 |
| `src/app/dashboard/parks/magic-kingdom/page.tsx` | L1033-1059 |
| `src/components/itinerary/ItineraryPlanner.tsx` | L352-403 |
| `src/app/dashboard/parks/magic-kingdom/page.tsx` | L345-370 |
| `src/app/dashboard/parks/magic-kingdom/page.tsx` | L246-295 |
| `src/engines/itinerary/optimizer.ts` | L592-617 |

</details>

---

Now I can see the issue clearly. The application is using slug-based park IDs like "magic-kingdom", but the ThemeParks.wiki API expects UUID-based park IDs like `75ea578a-adc8-4116-a54d-dccb60765ef9`. 

I need to create a mapping system to convert between the internal slug-based IDs and the external UUID-based IDs. Let me create this mapping in the API route:

---



---

Now I need to update the GET handler to use the mapping:

---



---

Now let me test the API endpoint to see if it works:

---

```bash
curl -s "http://localhost:3001/api/parks/magic-kingdom?entity=attractions" | jq '. | length'
```

```
williamcarrico@CIA woody-disney-vacation-planning % curl -s "http://localhost:3001/api/parks/magic-kingdom?e
ntity=attractions" | jq '. | length'                curl -s "http://localhost:3001/api/parks/magic-kingdom?e
ntity=attractions" | jq '. | length'
1
williamcarrico@CIA woody-disney-vacation-planning %
```

---

Great! The API is working and returning data. Let me check what the actual response looks like:

---

```bash
curl -s "http://localhost:3001/api/parks/magic-kingdom?entity=attractions" | jq '.'
```

```
williamcarrico@CIA woody-disney-vacation-planning % curl -s "http://localhost:3001/api/parks/magic-kingdom?e
ntity=attractions" | jq '.'                         curl -s "http://localhost:3001/api/parks/magic-kingdom?e
ntity=attractions" | jq '.'
{
  "error": "Failed to fetch park data"
}
williamcarrico@CIA woody-disney-vacation-planning %
```

---

It seems there's still an error. Let me check the server logs or test the external API directly to see what's happening:

---

```bash
curl -s "https://api.themeparks.wiki/v1/park/75ea578a-adc8-4116-a54d-dccb60765ef9/attractions" | jq '. | length'
```

```
<116-a54d-dccb60765ef9/attractions" | jq '. | length'
jq: parse error: Invalid numeric literal at line 1, column 10
williamcarrico@CIA woody-disney-vacation-planning %
```

---

Let me check what the external API is returning:

---

```bash
curl -s "https://api.themeparks.wiki/v1/park/75ea578a-adc8-4116-a54d-dccb60765ef9/attractions"
```

```
williamcarrico@CIA woody-disney-vacation-planning % curl -s "https://api.themeparks.wiki/v1/park/75ea578a-ad
c8-4116-a54d-dccb60765ef9/attractions"              curl -s "https://api.themeparks.wiki/v1/park/75ea578a-ad
c8-4116-a54d-dccb60765ef9/attractions"
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Error</title>
</head>
<body>
<pre>Cannot GET /v1/park/75ea578a-adc8-4116-a54d-dccb60765ef9/attractions</pre>
</body>
</html>
williamcarrico@CIA woody-disney-vacation-planning %
```

---

It looks like the ThemeParks.wiki API structure might be different than expected. Let me check the correct API structure:

---

```bash
curl -s "https://api.themeparks.wiki/v1/park/75ea578a-adc8-4116-a54d-dccb60765ef9"
```

```
williamcarrico@CIA woody-disney-vacation-planning % curl -s "https://api.themeparks.wiki/v1/park/75ea578a-ad
c8-4116-a54d-dccb60765ef9"                          curl -s "https://api.themeparks.wiki/v1/park/75ea578a-ad
c8-4116-a54d-dccb60765ef9"
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Error</title>
</head>
<body>
<pre>Cannot GET /v1/park/75ea578a-adc8-4116-a54d-dccb60765ef9</pre>
</body>
</html>
williamcarrico@CIA woody-disney-vacation-planning %
```

---

It seems the API structure might be different. Let me check the ThemeParks.wiki API documentation or try a different approach:

---

```bash
curl -s "https://api.themeparks.wiki/v1/entity/75ea578a-adc8-4116-a54d-dccb60765ef9" | jq '. | keys' | head -10
```

```
<8-4116-a54d-dccb60765ef9" | jq '. | keys' | head -10
[
  "destinationId",
  "entityType",
  "externalId",
  "id",
  "location",
  "name",
  "parentId",
  "slug",
  "timezone"
williamcarrico@CIA woody-disney-vacation-planning %
```

---

Good! The entity endpoint works. Let me check what children (attractions) this park has:

---

```bash
curl -s "https://api.themeparks.wiki/v1/entity/75ea578a-adc8-4116-a54d-dccb60765ef9/children" | jq '. | length'
```

```
williamcarrico@CIA woody-disney-vacation-planning % curl -s "https://api.themeparks.wiki/v1/entity/75ea578a-
adc8-4116-a54d-dccb60765ef9/children" | jq '. | lengcurl -s "https://api.themeparks.wiki/v1/entity/75ea578a-
adc8-4116-a54d-dccb60765ef9/children" | jq '. | length'
5
williamcarrico@CIA woody-disney-vacation-planning %
```

---

Great! Let me see what these children are:

---

```bash
curl -s "https://api.themeparks.wiki/v1/entity/75ea578a-adc8-4116-a54d-dccb60765ef9/children" | jq '.[0] | keys'
```

```
williamcarrico@CIA woody-disney-vacation-planning % curl -s "https://api.themeparks.wiki/v1/entity/75ea578a-
adc8-4116-a54d-dccb60765ef9/children" | jq '.[0] | kcurl -s "https://api.themeparks.wiki/v1/entity/75ea578a-
adc8-4116-a54d-dccb60765ef9/children" | jq '.[0] | keys'
jq: error (at <stdin>:943): Cannot index object with number
williamcarrico@CIA woody-disney-vacation-planning %
```

---





---

```bash
curl -s "https://api.themeparks.wiki/v1/entity/75ea578a-adc8-4116-a54d-dccb60765ef9/children" | jq 'keys'
```

```
williamcarrico@CIA woody-disney-vacation-planning % curl -s "https://api.themeparks.wiki/v1/entity/75ea578a-
adc8-4116-a54d-dccb60765ef9/children" | jq 'keys'   curl -s "https://api.themeparks.wiki/v1/entity/75ea578a-
adc8-4116-a54d-dccb60765ef9/children" | jq 'keys'
[
  "children",
  "entityType",
  "id",
  "name",
  "timezone"
]
williamcarrico@CIA woody-disney-vacation-planning %
```

---

```bash
curl -s "https://api.themeparks.wiki/v1/entity/75ea578a-adc8-4116-a54d-dccb60765ef9/children" | jq '.children | length'
```

```
williamcarrico@CIA woody-disney-vacation-planning % curl -s "https://api.themeparks.wiki/v1/entity/75ea578a-
adc8-4116-a54d-dccb60765ef9/children" | jq '.childrecurl -s "https://api.themeparks.wiki/v1/entity/75ea578a-
adc8-4116-a54d-dccb60765ef9/children" | jq '.children | length'
78
williamcarrico@CIA woody-disney-vacation-planning %
```

---

Perfect! Now I understand the correct API structure. The ThemeParks.wiki API uses `/entity/{id}/children` to get attractions, not `/park/{id}/attractions`. Let me update the API route:

---



---

Now let me test the API again:

---

```bash
curl -s "http://localhost:3001/api/parks/magic-kingdom?entity=attractions" | jq '. | length'
```

```
williamcarrico@CIA woody-disney-vacation-planning % curl -s "http://localhost:3001/api/parks/magic-kingdom?e
ntity=attractions" | jq '. | length'                curl -s "http://localhost:3001/api/parks/magic-kingdom?e
ntity=attractions" | jq '. | length'
78
williamcarrico@CIA woody-disney-vacation-planning %
```

---

Excellent! Now the API is returning 78 attractions for Magic Kingdom. Let me check the structure of one attraction:

---

```bash
curl -s "http://localhost:3001/api/parks/magic-kingdom?entity=attractions" | jq '.[0] | keys'
```

```
williamcarrico@CIA woody-disney-vacation-planning % curl -s "http://localhost:3001/api/parks/magic-kingdom?e
ntity=attractions" | jq '.[0] | keys'               curl -s "http://localhost:3001/api/parks/magic-kingdom?e
ntity=attractions" | jq '.[0] | keys'
[
  "entityType",
  "externalId",
  "id",
  "location",
  "name",
  "parentId",
  "slug"
]
williamcarrico@CIA woody-disney-vacation-planning %
```

---

Perfect! Now the API is working. Let me test the optimizer again to see if it can fetch the attractions. But first, let me restart the development server to make sure all changes are loaded:

---

```bash
pkill -f "next dev" || true
```

```
williamcarrico@CIA woody-disney-vacation-planning % 

```

---

```bash
npm run dev
```

---

Now let me test the API again to make sure it's working:

---

```bash
sleep 5 && curl -s "http://localhost:3001/api/parks/magic-kingdom?entity=attractions" | jq '. | length'
```

```
</magic-kingdom?entity=attractions" | jq '. | length'
78
williamcarrico@CIA woody-disney-vacation-planning %
```

---

Great! The API is working correctly. Now the issue should be resolved. Let me also check if we need to fix the live data endpoint. Let me test it:

---

```bash
curl -s "https://api.themeparks.wiki/v1/entity/75ea578a-adc8-4116-a54d-dccb60765ef9/live" | jq 'keys'
```

```
williamcarrico@CIA woody-disney-vacation-planning % curl -s "https://api.themeparks.wiki/v1/entity/75ea578a-
adc8-4116-a54d-dccb60765ef9/live" | jq 'keys'       curl -s "https://api.themeparks.wiki/v1/entity/75ea578a-
adc8-4116-a54d-dccb60765ef9/live" | jq 'keys'
[
  "entityType",
  "id",
  "liveData",
  "name",
  "timezone"
]
williamcarrico@CIA woody-disney-vacation-planning %
```

---

Good! The live data endpoint also works. Let me update the API route to handle the live data correctly:

---



---

Now let me test the live data endpoint:

---

```bash
curl -s "http://localhost:3001/api/parks/magic-kingdom?entity=live" | jq '. | length'
```

```
williamcarrico@CIA woody-disney-vacation-planning % curl -s "http://localhost:3001/api/parks/magic-kingdom?e
ntity=live" | jq '. | length'                       curl -s "http://localhost:3001/api/parks/magic-kingdom?e
ntity=live" | jq '. | length'
67
williamcarrico@CIA woody-disney-vacation-planning %
```

---

Perfect! Now both endpoints are working. The issue should be resolved. Let me create a summary of what was fixed:

## Summary

The issue was that the `getParkAttractions` function in `src/lib/api/themeParks.ts` was trying to make direct requests to the external ThemeParks.wiki API from the browser, which was causing network errors due to CORS restrictions.

### Changes Made:

1. **Updated `getParkAttractions` function** to use the local API route instead of direct external API calls:
   ```typescript
   // Before: Direct external API call
   const response = await apiClient.get<Attraction[]>(`/park/${parkId}/attractions`);
   
   // After: Local API route
   const response = await fetch(`/api/parks/${parkId}?entity=attractions`, {
       headers: { 'Content-Type': 'application/json' },
   });
   ```

2. **Updated `getParkLiveData` and `getParkSchedule` functions** similarly to use local API routes.

3. **Fixed the API route** in `src/app/api/parks/[parkId]/route.ts` to:
   - Map internal park slugs (like "magic-kingdom") to ThemeParks.wiki UUIDs
   - Use the correct API endpoints (`/entity/{id}/children` instead of `/park/{id}/attractions`)
   - Return the correct data structure (just the children array for attractions)

4. **Added park ID mapping** to convert between internal slugs and external UUIDs:
   ```typescript
   const PARK_ID_MAPPINGS: Record<string, string> = {
       'magic-kingdom': '75ea578a-adc8-4116-a54d-dccb60765ef9',
       'epcot': '47f90d2c-e191-4239-a466-5892ef59a88b',
       // ... other parks
   };
   ```

### Result:
- The API now correctly fetches 78 attractions for Magic Kingdom
- The optimizer should now be able to initialize properly without network errors
- All requests go through the local API route which handles the external API calls server-side

The network error should now be resolved, and the itinerary optimizer should work correctly when trying to fetch attractions for Magic Kingdom.

---


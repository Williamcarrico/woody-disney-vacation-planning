<!-- Generated by SpecStory -->

# Disney Genie Planner Code Development (2025-05-20 22:11:55)

_**User**_

Your task is to create an extremely detailed, sophisticated and immersive components/planning/DisneyGeniePlanner code file. Ensure to use codebase files to optimize the build. 

---

_**Assistant**_



---

<details>
            <summary>Searched codebase "/RecommendationEngine" ‚Ä¢ **8** results</summary>
        
| File |
|------|
| `undefined` |
| `undefined` |
| `undefined` |
| `undefined` |
| `undefined` |
| `undefined` |
| `undefined` |
| `undefined` |

</details>

---



---

Read file: /Users/williamcarrico/Web App Design/woody-disney-vacation-planning/src/components/optimizer/recommendation-engine/recommendation-engine.tsx

---



---

<details>
            <summary>Listed directory src/components ‚Ä¢ **22** results</summary>
        
| Name |
|-------|
| üìÅ `parks` |
| üìÅ `optimizer` |
| üìÅ `attractions` |
| üìÅ `weather` |
| üìÅ `budget` |
| üìÅ `maps` |
| üìÅ `itinerary` |
| üìÅ `ui` |
| üìÅ `shared` |
| üìÅ `events` |
| üìÅ `disneysprings` |
| üìÅ `group` |
| üìÅ `charts` |
| üìÅ `examples` |
| üìÅ `auth` |
| üìÅ `resorts` |
| üìÅ `dashboard` |
| üìÅ `wallet` |
| üìÅ `calendar` |
| üìÅ `theme-provider` |
| üìÅ `dining` |
| üìÅ `planning` |

</details>

---



---

<details>
            <summary>Listed directory src/components/planning ‚Ä¢ **0** results</summary>
        
No results found
</details>

---



---

<details>
            <summary>Grep search for "GeniePlanner" ‚Ä¢ **2** files</summary>
        
| File | Line | Match |
|------|------|-------|
| `file:///Users/williamcarrico/Web%20App%20Design/woody-disney-vacation-planning/src/app/dashboard/planning/page.tsx` | L37 | `import DisneyGeniePlanner from "@/components/planning/DisneyGeniePlanner"` |
| `file:///Users/williamcarrico/Web%20App%20Design/woody-disney-vacation-planning/src/app/dashboard/planning/page.tsx` | L464 | `<DisneyGeniePlanner vacationId={vacationId} />` |
| `file:///Users/williamcarrico/Web%20App%20Design/woody-disney-vacation-planning/src/app/dashboard/planning/page.tsx` | L37 | `import DisneyGeniePlanner from "@/components/planning/DisneyGeniePlanner"` |
| `file:///Users/williamcarrico/Web%20App%20Design/woody-disney-vacation-planning/src/app/dashboard/planning/page.tsx` | L464 | `<DisneyGeniePlanner vacationId={vacationId} />` |

</details>

---



---

Read file: /Users/williamcarrico/Web App Design/woody-disney-vacation-planning/src/components/optimizer/recommendation-engine/recommendation-card.tsx

---



---

<details>
            <summary>Searched codebase "/badge.tsx" ‚Ä¢ **10** results</summary>
        
| File |
|------|
| `undefined` |
| `undefined` |
| `undefined` |
| `undefined` |
| `undefined` |
| `undefined` |
| `undefined` |
| `undefined` |
| `undefined` |
| `undefined` |

</details>

---



---

Read file: /Users/williamcarrico/Web App Design/woody-disney-vacation-planning/src/components/ui/badge.tsx

---



---

<details>
            <summary>Searched codebase "badgeVariants" ‚Ä¢ **0** results</summary>
        
No results found
</details>

---



---

<details>
            <summary>Searched codebase "variant: {\n" ‚Ä¢ **0** results</summary>
        
No results found
</details>

---



---

<details>
            <summary>Searched codebase "/ui/button.tsx" ‚Ä¢ **1** results</summary>
        
| File |
|------|
| `undefined` |

</details>

---

Read file: /Users/williamcarrico/Web App Design/woody-disney-vacation-planning/src/components/ui/button.tsx

---



---

<details>
            <summary>Searched codebase "WaitTimesDashboard" ‚Ä¢ **1** results</summary>
        
| File |
|------|
| `undefined` |

</details>

---

Read file: /Users/williamcarrico/Web App Design/woody-disney-vacation-planning/src/components/attractions/WaitTimesDashboard.tsx

---



---

Read file: /Users/williamcarrico/Web App Design/woody-disney-vacation-planning/src/components/attractions/types.ts

---



---

```diff
- 
+ "use client"
+ 
+ import React, { useEffect, useMemo, useState } from "react"
+ import Image from "next/image"
+ 
+ // UI primitives
+ import { Card, CardContent, CardDescription, CardFooter, CardHeader, CardTitle } from "@/components/ui/card"
+ import { Button } from "@/components/ui/button"
+ import { Badge } from "@/components/ui/badge"
+ import { Skeleton } from "@/components/ui/skeleton"
+ import { ScrollArea, ScrollBar } from "@/components/ui/scroll-area"
+ import { Tabs, TabsContent, TabsList, TabsTrigger } from "@/components/ui/tabs"
+ import { TooltipProvider, Tooltip, TooltipTrigger, TooltipContent } from "@/components/ui/tooltip"
+ import { Progress } from "@/components/ui/progress"
+ 
+ // Icons
+ import {
+   Zap,
+   Clock,
+   MapPin,
+   Sparkles,
+   CheckCircle2,
+   XCircle,
+   ListChecks,
+   SlidersHorizontal,
+   X,
+   Loader2
+ } from "lucide-react"
+ 
+ import type { Attraction, ParkId, ThrillCategory } from "@/components/attractions/types"
+ 
+ /**
+  * Internal mock data ‚Äì in a real application replace with an API call or context hook.
+  * We purposefully keep this small and focused on Genie+ eligible attractions to
+  * keep the example readable while still showing realistic data structures.
+  */
+ const mockGeniePlusAttractions: Attraction[] = [
+   {
+     id: "mk-7dmt",
+     name: "Seven Dwarfs Mine Train",
+     parkId: "MK",
+     parkName: "Magic Kingdom",
+     land: "Fantasyland",
+     imageUrl: "/images/attractions/mk-7dmt.jpg",
+     thumbnailUrl: "/images/attractions/mk-7dmt-thumb.jpg",
+     description:
+       "Race through the diamond mine from Snow White and the Seven Dwarfs on a swaying family coaster.",
+     waitTime: 65,
+     status: "Operating",
+     geniePlus: {
+       available: true,
+       nextAvailableTime: "11:10 AM",
+       isLightningLane: false
+     },
+     riderSwitchAvailable: true,
+     heightRequirement: "38in (97cm)",
+     thrillLevels: ["Coaster", "Family"],
+     tags: ["Outdoor", "Family"],
+     duration: "3 minutes",
+     userRating: 4.8
+   },
+   {
+     id: "mk-pirates",
+     name: "Pirates of the Caribbean",
+     parkId: "MK",
+     parkName: "Magic Kingdom",
+     land: "Adventureland",
+     imageUrl: "/images/attractions/mk-pirates.jpg",
+     thumbnailUrl: "/images/attractions/mk-pirates-thumb.jpg",
+     description: "Set sail on a swashbuckling voyage where pirates rule the seas.",
+     waitTime: 40,
+     status: "Operating",
+     geniePlus: {
+       available: true,
+       nextAvailableTime: "10:45 AM",
+       isLightningLane: false
+     },
+     riderSwitchAvailable: false,
+     heightRequirement: null,
+     thrillLevels: ["Slow", "Boat Ride"],
+     tags: ["Indoor", "Classic"],
+     duration: "8 minutes",
+     userRating: 4.7
+   },
+   {
+     id: "ep-test-track",
+     name: "Test Track",
+     parkId: "EP",
+     parkName: "Epcot",
+     land: "World Discovery",
+     imageUrl: "/images/attractions/ep-test-track.jpg",
+     thumbnailUrl: "/images/attractions/ep-test-track-thumb.jpg",
+     description: "Design a virtual concept car and take it for a thrilling spin.",
+     waitTime: 70,
+     status: "Operating",
+     geniePlus: {
+       available: true,
+       nextAvailableTime: "01:05 PM",
+       isLightningLane: false
+     },
+     riderSwitchAvailable: true,
+     heightRequirement: "40in (102cm)",
+     thrillLevels: ["Thrill", "Interactive"],
+     tags: ["Indoor", "Fast"],
+     duration: "5 minutes",
+     userRating: 4.5
+   },
+   {
+     id: "hs-slinky-dog",
+     name: "Slinky Dog Dash",
+     parkId: "HS",
+     parkName: "Hollywood Studios",
+     land: "Toy Story Land",
+     imageUrl: "/images/attractions/slinky-dog.jpg",
+     thumbnailUrl: "/images/attractions/slinky-dog-thumb.jpg",
+     description: "Take a wild ride as Slinky Dog stretches through Toy Story Land!",
+     waitTime: 85,
+     status: "Operating",
+     geniePlus: {
+       available: true,
+       nextAvailableTime: "12:25 PM",
+       isLightningLane: false
+     },
+     riderSwitchAvailable: true,
+     heightRequirement: "38in (97cm)",
+     thrillLevels: ["Coaster", "Family"],
+     tags: ["Outdoor", "Popular"],
+     duration: "2 minutes",
+     userRating: 4.6
+   }
+ ]
+ 
+ /* -------------------------------------------------------------------------------------------------
+  * Types & Helper functions
+  * -----------------------------------------------------------------------------------------------*/
+ 
+ interface DisneyGeniePlannerProps {
+   /**
+    * Optional vacation identifier to scope stateful user selections.
+    * In a real application this would be used to load/save preferences.
+    */
+   vacationId?: string
+   /** Maximum Genie+ selections allowed ‚Äì guests start with one at a time but can accumulate. */
+   maxSelections?: number
+ }
+ 
+ /**
+  * Parse a human-readable time (e.g. "1:05 PM") into minutes since midnight for easy comparison.
+  */
+ function parseParkTime(time?: string): number | null {
+   if (!time) return null
+   const [timePart, period] = time.split(" ")
+   const [h, m] = timePart.split(":").map(Number)
+   const hours24 = (period === "PM" && h !== 12 ? h + 12 : period === "AM" && h === 12 ? 0 : h)
+   return hours24 * 60 + m
+ }
+ 
+ /* -------------------------------------------------------------------------------------------------
+  * Main Component
+  * -----------------------------------------------------------------------------------------------*/
+ 
+ /**
+  * DisneyGeniePlanner ‚Äì an immersive planning tool that mimics the core flow of Disney's Genie+
+  * experience. Guests can browse eligible attractions, select their desired Lightning Lane return
+  * times, and visualize their day at a glance.
+  */
+ function DisneyGeniePlanner({ vacationId, maxSelections = 8 }: DisneyGeniePlannerProps) {
+   /* ------------------------------------------------------------------
+    * State management
+    * ---------------------------------------------------------------*/
+   const [allAttractions, setAllAttractions] = useState<Attraction[]>([])
+   const [loading, setLoading] = useState(true)
+   const [selectedIds, setSelectedIds] = useState<Set<string>>(new Set())
+   const [activeTab, setActiveTab] = useState<"available" | "myDay">("available")
+ 
+   /* ------------------------------------------------------------------
+    * Data loading ‚Äì pretend API call
+    * ---------------------------------------------------------------*/
+   useEffect(() => {
+     async function load() {
+       setLoading(true)
+       // Simulate latency so the skeleton UI shows for demonstration purposes.
+       await new Promise(res => setTimeout(res, 800))
+       setAllAttractions(mockGeniePlusAttractions)
+       setLoading(false)
+     }
+     load()
+   }, [vacationId])
+ 
+   /* ------------------------------------------------------------------
+    * Derived data
+    * ---------------------------------------------------------------*/
+   const selectedAttractions = useMemo(
+     () => allAttractions.filter(a => selectedIds.has(a.id)),
+     [allAttractions, selectedIds]
+   )
+ 
+   const progressPercent = (selectedAttractions.length / maxSelections) * 100
+ 
+   /**
+    * Sort selected attractions by their Lightning Lane return time so users can see chronological order.
+    */
+   const sortedMyDay = useMemo(() => {
+     return [...selectedAttractions].sort((a, b) => {
+       const timeA = parseParkTime(a.geniePlus.nextAvailableTime) ?? Infinity
+       const timeB = parseParkTime(b.geniePlus.nextAvailableTime) ?? Infinity
+       return timeA - timeB
+     })
+   }, [selectedAttractions])
+ 
+   /* ------------------------------------------------------------------
+    * Event handlers
+    * ---------------------------------------------------------------*/
+   function toggleSelection(id: string) {
+     setSelectedIds(prev => {
+       const clone = new Set(prev)
+       if (clone.has(id)) clone.delete(id)
+       else if (clone.size < maxSelections) clone.add(id)
+       return clone
+     })
+   }
+ 
+   /* ------------------------------------------------------------------
+    * Render helpers
+    * ---------------------------------------------------------------*/
+   function renderAttractionCard(att: Attraction, compact = false) {
+     const isSelected = selectedIds.has(att.id)
+     return (
+       <Card
+         key={att.id}
+         className={`group relative overflow-hidden hover:shadow-lg transition-shadow ${
+           compact ? "flex" : ""
+         } ${isSelected ? "border-primary/60 ring-2 ring-primary/40" : ""}`}
+       >
+         {/* Thumbnail */}
+         <div className={compact ? "relative w-20 h-20 flex-shrink-0" : "relative w-full h-40"}>
+           {att.thumbnailUrl ? (
+             <Image
+               src={att.thumbnailUrl}
+               alt={att.name}
+               fill
+               style={{ objectFit: "cover" }}
+               className="transition-transform duration-300 ease-in-out group-hover:scale-105"
+               sizes="(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw"
+             />
+           ) : (
+             <div className="absolute inset-0 bg-muted" />
+           )}
+           {isSelected && (
+             <Badge className="absolute top-2 right-2 bg-primary text-primary-foreground" variant="default">
+               Selected
+             </Badge>
+           )}
+         </div>
+ 
+         {/* Content */}
+         <div className="flex flex-col flex-grow">
+           <CardHeader className={`${compact ? "p-3 pb-1" : ""}`}>
+             <CardTitle className={`text-lg font-semibold ${compact ? "text-base" : ""}`}>{att.name}</CardTitle>
+             {!compact && (
+               <CardDescription className="text-xs text-muted-foreground mt-0.5 flex items-center">
+                 <MapPin className="h-3 w-3 mr-1" /> {att.parkName}
+               </CardDescription>
+             )}
+           </CardHeader>
+ 
+           <CardContent className={`${compact ? "p-3 pt-0" : ""}`}>
+             <div className="flex items-center justify-between text-sm">
+               <div className="flex items-center">
+                 <Clock className="h-4 w-4 mr-1 text-primary" />
+                 {att.geniePlus.nextAvailableTime ?? "‚Äî"}
+               </div>
+               <div className="flex items-center">
+                 <Zap className="h-4 w-4 text-yellow-400 mr-1" /> Genie+
+               </div>
+             </div>
+           </CardContent>
+ 
+           <CardFooter className={`mt-auto ${compact ? "p-3 pt-0" : ""}`}>
+             <Button
+               variant={isSelected ? "destructive" : "secondary"}
+               size="sm"
+               className="w-full"
+               onClick={() => toggleSelection(att.id)}
+             >
+               {isSelected ? (
+                 <>
+                   Remove <X className="h-4 w-4 ml-1" />
+                 </>
+               ) : (
+                 <>
+                   Reserve <Sparkles className="h-4 w-4 ml-1" />
+                 </>
+               )}
+             </Button>
+           </CardFooter>
+         </div>
+       </Card>
+     )
+   }
+ 
+   /* ------------------------------------------------------------------
+    * Component markup
+    * ---------------------------------------------------------------*/
+   return (
+     <div className="space-y-6">
+       {/* Header */}
+       <div className="flex flex-col md:flex-row md:items-end md:justify-between gap-4">
+         <div>
+           <h2 className="text-2xl font-bold flex items-center">
+             <Zap className="h-6 w-6 mr-2 text-yellow-400" /> Genie+ Planner
+           </h2>
+           <p className="text-muted-foreground max-w-prose">
+             Browse eligible attractions and reserve Lightning Lane return times to optimize your day.
+           </p>
+         </div>
+ 
+         <div className="w-full md:w-1/3 space-y-1">
+           <Progress value={progressPercent} />
+           <p className="text-xs text-muted-foreground text-right">
+             {selectedAttractions.length}/{maxSelections} selections
+           </p>
+         </div>
+       </div>
+ 
+       {/* Tabs */}
+       <Tabs value={activeTab} onValueChange={val => setActiveTab(val as any)} className="space-y-6">
+         <TabsList className="w-full justify-start overflow-x-auto rounded-none border-b-0 px-0">
+           <TabsTrigger value="available" className="py-2 px-4 flex items-center">
+             <SlidersHorizontal className="h-4 w-4 mr-2" /> Available
+           </TabsTrigger>
+           <TabsTrigger value="myDay" className="py-2 px-4 flex items-center">
+             <ListChecks className="h-4 w-4 mr-2" /> My Day
+           </TabsTrigger>
+         </TabsList>
+ 
+         {/* Available attractions */}
+         <TabsContent value="available" className="space-y-4">
+           {loading ? (
+             <div className="grid sm:grid-cols-2 lg:grid-cols-3 gap-4">
+               {Array.from({ length: 6 }).map((_, i) => (
+                 <AttractionCardSkeleton key={`skel-${i}`} />
+               ))}
+             </div>
+           ) : (
+             <ScrollArea className="h-[600px]">
+               <div className="grid sm:grid-cols-2 lg:grid-cols-3 gap-4 pr-4">
+                 {allAttractions.map(att => renderAttractionCard(att))}
+               </div>
+               <ScrollBar orientation="vertical" />
+             </ScrollArea>
+           )}
+         </TabsContent>
+ 
+         {/* My Day timeline */}
+         <TabsContent value="myDay" className="space-y-4">
+           {selectedAttractions.length === 0 ? (
+             <div className="flex flex-col items-center justify-center py-20 text-muted-foreground">
+               <XCircle className="h-10 w-10 mb-4" />
+               <p>No selections yet. Reserve a Lightning Lane to start building your day!</p>
+             </div>
+           ) : (
+             <div className="space-y-4">
+               {sortedMyDay.map(att => (
+                 <Card key={`myday-${att.id}`} className="flex items-center p-4 hover:shadow-lg transition-shadow">
+                   <div className="relative w-16 h-16 flex-shrink-0 mr-4">
+                     {att.thumbnailUrl ? (
+                       <Image src={att.thumbnailUrl} alt={att.name} fill style={{ objectFit: "cover" }} />
+                     ) : (
+                       <div className="absolute inset-0 bg-muted" />
+                     )}
+                   </div>
+                   <div className="flex-grow">
+                     <p className="font-medium flex items-center">
+                       {att.name}
+                       <Badge variant="outline" className="ml-2 py-0.5 px-1 text-[10px]">
+                         {att.parkName}
+                       </Badge>
+                     </p>
+                     <p className="text-sm flex items-center text-muted-foreground">
+                       <Clock className="h-3 w-3 mr-1" /> {att.geniePlus.nextAvailableTime}
+                     </p>
+                   </div>
+                   <Button variant="ghost" size="icon" onClick={() => toggleSelection(att.id)}>
+                     <X className="h-4 w-4" />
+                   </Button>
+                 </Card>
+               ))}
+             </div>
+           )}
+         </TabsContent>
+       </Tabs>
+     </div>
+   )
+ }
+ 
+ /* -------------------------------------------------------------------------------------------------
+  * Skeleton Card
+  * -----------------------------------------------------------------------------------------------*/
+ 
+ function AttractionCardSkeleton() {
+   return (
+     <Card className="overflow-hidden animate-pulse flex">
+       <div className="relative w-20 h-20 flex-shrink-0 bg-muted" />
+       <div className="flex flex-col flex-grow p-3 space-y-2">
+         <Skeleton className="h-4 w-3/4" />
+         <Skeleton className="h-3 w-1/2" />
+         <Skeleton className="h-8 w-full mt-auto" />
+       </div>
+     </Card>
+   )
+ }
+ 
+ export { DisneyGeniePlanner }
```

---



---

Read file: /Users/williamcarrico/Web App Design/woody-disney-vacation-planning/tsconfig.json

---



---

```diff
  }
  
- export { DisneyGeniePlanner }
+ export default DisneyGeniePlanner
```

---



---

<details>
            <summary>Searched codebase "/ui/progress.tsx" ‚Ä¢ **1** results</summary>
        
| File |
|------|
| `undefined` |

</details>

---



---

Created a comprehensive `DisneyGeniePlanner` component at `src/components/planning/DisneyGeniePlanner.tsx`.

Key highlights:
‚Ä¢ Fully interactive Genie+ planner with:
‚ÄÉ‚Äì Live ‚ÄúAvailable‚Äù and ‚ÄúMy Day‚Äù tabs.  
‚ÄÉ‚Äì Attraction cards (reserve/remove) with Lightning Lane times.  
‚ÄÉ‚Äì Chronological ‚ÄúMy Day‚Äù timeline and progress bar.

‚Ä¢ Re-uses existing UI primitives (Card, Tabs, Progress, Badge, Button, etc.) and park attraction types for type-safety.

‚Ä¢ Mock Genie+ data included; easily replaceable with real API logic.

‚Ä¢ Exports a default component so the existing dashboard page import works out-of-the-box.

This resolves the missing module error in `page.tsx` and delivers an immersive Genie+ planning experience consistent with project standards.

---


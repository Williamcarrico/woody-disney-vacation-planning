<!-- Generated by SpecStory -->

# Implementing Comprehensive Todo Logic (2025-05-26 21:02:52)

_**User**_

Your task is implement logic to complete this todo snippet. Ensure logic is comprehenesive and sophisticated. 

---

_**Assistant**_

I'll implement comprehensive distance sorting logic for the restaurant utility. This will require calculating distances from a user's location to restaurants and sorting them accordingly.

---

Read file: src/types/dining.ts

---

Perfect! I can see that the `Location` interface has `latitude` and `longitude` properties. Now I'll implement comprehensive distance sorting logic. Let me also check if there are any existing location utilities.

---

<details>
            <summary>Searched codebase "location utils geolocation distance" • **9** results</summary>
        
| File |
|------|
| `undefined` |
| `undefined` |
| `undefined` |
| `undefined` |
| `undefined` |
| `undefined` |
| `undefined` |
| `undefined` |
| `undefined` |

</details>

---

Read file: src/engines/recommendation/LocationAwareRecommendationEngine.ts

---

Great! I found that there's already a `calculateDistance` method in the LocationAwareRecommendationEngine. Let me check that implementation:

---

Read file: src/engines/recommendation/LocationAwareRecommendationEngine.ts

---

Perfect! Now I have all the information I need. I'll create a comprehensive distance sorting implementation that includes:

1. Haversine formula for accurate distance calculation
2. User location handling (current location, fallback locations)
3. Caching for performance
4. Error handling
5. Support for different distance calculation methods

---



---

Now I need to implement the `sortRestaurantsByDistance` function. Let me add it to the file:

---



---

Now I need to implement the distance calculation functions and the main sorting function. Let me add them before the existing functions:

---



---

The issue is that the `sortRestaurantsByDistance` function is async but the `sortRestaurants` function expects a synchronous return. I need to modify the approach to handle this properly. Let me fix this by making the distance sorting synchronous with a fallback approach:

---



---

I need to export the `updateUserLocationAsync` function so it can be used by other parts of the application. Let me also add some additional utility functions that would be useful for distance-based operations:

---



---

Perfect! Now let me run a check to see if there are any remaining linter errors:

---

```bash
cd /Users/williamcarrico/Web\ App\ Design/woody-disney-vacation-planning && npx tsc --noEmit --project tsconfig.json src/lib/utils/restaurant.ts
```

```
error TS5042: Option 'project' cannot be mixed with source files on a command li
ne.

```

---

```bash
npx tsc --noEmit src/lib/utils/restaurant.ts
```

```
williamcarrico@CIA woody-disney-vacation-planning % npx tsc --noEmit src/lib/utils/restaurant.ts
src/lib/utils/restaurant.ts:1:87 - error TS2307: Cannot find module '@/types/dining' or its corresponding ty
pe declarations.

1 import { DisneyRestaurant, PriceRange, ServiceType, CuisineType, DiningFilters } from "@/types/dining"
                                                                                        ~~~~~~~~~~~~~~~~

src/lib/utils/restaurant.ts:164:35 - error TS2802: Type 'MapIterator<[string, number]>' can only be iterated
 through when using the '--downlevelIteration' flag or with a '--target' of 'es2015' or higher.

164     for (const [parkId, count] of parkCounts.entries()) {
                                      ~~~~~~~~~~~~~~~~~~~~


Found 2 errors in the same file, starting at: src/lib/utils/restaurant.ts:1

williamcarrico@CIA woody-disney-vacation-planning %
```

---

I need to fix the iteration issue. Let me update the code to use a more compatible approach:

---



---

Now let me test the TypeScript compilation again:

---

```bash
npx tsc --noEmit --skipLibCheck src/lib/utils/restaurant.ts
```

```
< --noEmit --skipLibCheck src/lib/utils/restaurant.ts
src/lib/utils/restaurant.ts:1:87 - error TS2307: Cannot find module '@/types/dining' or its corresponding ty
pe declarations.

1 import { DisneyRestaurant, PriceRange, ServiceType, CuisineType, DiningFilters } from "@/types/dining"
                                                                                        ~~~~~~~~~~~~~~~~


Found 1 error in src/lib/utils/restaurant.ts:1

williamcarrico@CIA woody-disney-vacation-planning %
```

---

The import path issue is expected since we're running TypeScript on a single file without the full project context. Let me check if the project builds correctly:

---

```bash
npm run build
```

```
williamcarrico@CIA woody-disney-vacation-planning % npm run build

> 4ms-in-the-sky-vacation-planning@0.1.0 build
> next build

   ▲ Next.js 15.3.2
   - Environments: .env.local

   Creating an optimized production build ...
Failed to compile.

./src/app/dashboard/parks/history/page.tsx
Error:   × You are attempting to export "metadata" from a component marked with "use client", which is disal
lowed. Either remove the export, or the "use client" directive. Read more: https://nextjs.org/docs/app/api-r
eference/directives/use-client
  │

    ╭─[/Users/williamcarrico/Web App Design/woody-disney-vacation-planning/src/app/dashboard/parks/history/p
age.tsx:44:1]
 41 │ import { WordRotate } from '@/components/magicui/word-rotate'
 42 │ import { TypingAnimation } from '@/components/magicui/typing-animation'
 43 │ 
 44 │ export const metadata = {
    ·              ────────
 45 │     title: 'Walt Disney World History | Comprehensive Resort Overview',
 46 │     description: 'Explore the detailed operational history of Walt Disney World Resort, including hote
l statistics, dining, attractions, transportation systems, financial metrics, and staffing information.',
 47 │ }
    ╰────

Import trace for requested module:
./src/app/dashboard/parks/history/page.tsx

./src/app/dashboard/planning/page.tsx
Error:   × You are attempting to export "metadata" from a component marked with "use client", which is disal
lowed. Either remove the export, or the "use client" directive. Read more: https://nextjs.org/docs/app/api-r
eference/directives/use-client
  │

    ╭─[/Users/williamcarrico/Web App Design/woody-disney-vacation-planning/src/app/dashboard/planning/page.t
sx:94:1]
 91 │     Lightbulb
 92 │ } from "lucide-react"
 93 │ 
 94 │ export const metadata: Metadata = {
    ·              ────────
 95 │     title: "Disney Vacation Planning | Immersive AI-Powered Dashboard",
 96 │     description: "Experience the magic with our sophisticated Disney vacation planner featuring AI opt
imization, real-time data, immersive animations, and comprehensive planning tools."
 97 │ }
    ╰────

Import trace for requested module:
./src/app/dashboard/planning/page.tsx

./src/lib/firebase/auth-session.ts
Error:   × You're importing a component that needs "next/headers". That only works in a Server Component whi
ch is not supported in the pages/ directory. Read more: https://nextjs.org/docs/app/building-your-applicatio
n/rendering/server-components
  │

   ╭─[/Users/williamcarrico/Web App Design/woody-disney-vacation-planning/src/lib/firebase/auth-session.ts:1
:1]
 1 │ import { cookies } from 'next/headers'
   · ──────────────────────────────────────
 2 │ import { NextRequest } from 'next/server'
 3 │ import { getAuth } from './firebase-admin'
   ╰────

Import trace for requested module:
./src/lib/firebase/auth-session.ts
./src/lib/auth.ts
./src/lib/services/map-service.ts
./src/app/map/page.tsx

./src/app/dashboard/group/page.tsx
Module not found: Can't resolve '@/components/group/PartyMessaging'

https://nextjs.org/docs/messages/module-not-found

./src/lib/utils/logger.ts
Dynamic Code Evaluation (e. g. 'eval', 'new Function', 'WebAssembly.compile') not allowed in Edge Runtime 
Learn More: https://nextjs.org/docs/messages/edge-dynamic-code-evaluation

Import trace for requested module:
  ./src/lib/utils/logger.ts
  ./src/middleware.ts


> Build failed because of webpack errors
williamcarrico@CIA woody-disney-vacation-planning %
```

---

The build errors are unrelated to our restaurant utility changes. Let me check if our specific file compiles correctly by running a type check on the entire project:

---

```bash
npx tsc --noEmit --skipLibCheck
```

```
williamcarrico@CIA woody-disney-vacation-planning % 
70     const endDate = dates.length ? dates.reduce((a, b) => a > b ? a : b) : ne
w Date()
                                                    ~

src/app/dashboard/itinerary/[itineraryId]/page.tsx:70:53 - error TS7006: Paramet
er 'b' implicitly has an 'an
y' type.
                            
70     const endDate = dates.length ? dates.reduce((a, b) => a > b ? a : b) : ne
w Date()
                                                       ~

src/app/dashboard/itinerary/[itineraryId]/page.tsx:74:10 - error TS7006: Paramet
er 'sum' implicitly has an '
any' type.
                            
74         (sum, day) => sum + day.activities.length,
            ~~~

src/app/dashboard/itinerary/[itineraryId]/page.tsx:74:15 - error TS7006: Paramet
er 'day' implicitly has an '
any' type.
                            
74         (sum, day) => sum + day.activities.length,
                 ~~~

src/app/dashboard/itinerary/[itineraryId]/page.tsx:239:74 - error TS7006: Parame
ter 'activity' implicitly ha
s an 'any' type.
                            
239                                                     {day.activities.map((act
ivity, i) => (
                                                                             ~~~
~~~~~

src/app/dashboard/itinerary/[itineraryId]/page.tsx:239:84 - error TS7006: Parame
ter 'i' implicitly has an 'a
ny' type.
                            
239                                                     {day.activities.map((act
ivity, i) => (

       ~

src/app/dashboard/optimizer/page.tsx:553:58 - error TS2322: Type 'UseFormReturn<
{ date: Date; partySize: num
ber; parkId: string; hasChildren: boolean; hasStroller: boolean; mobilityConside
rations: boolean; ridePreference: "thrill" | "family" | "all"; maxWaitTime: numb
er; ... 17 more ...; maxLightningLaneBudget?: number | undefined; }, any, { ...;
 }>' is not assignable to type 'UseFormReturn<LightningLaneFormData>'.
      Types of property 'watch' are incompatible.
    Type 'UseFormWatch<{ date: Date; partySize: number; parkId: string; hasChild
ren: boolean; hasStroller: b
oolean; mobilityConsiderations: boolean; ridePreference: "thrill" | "family" | "
all"; maxWaitTime: number; ... 17 more ...; maxLightningLaneBudget?: number | un
defined; }>' is not assignable to type 'UseFormWatch<LightningLaneFormData>'.

          Types of parameters 'callback' and 'callback' are incompatible.
        Types of parameters 'info' and 'info' are incompatible.
          Type '{ name?: "date" | "childrenAges" | "partySize" | "startTime" | "
parkId" | "endTime" | "hasCh
ildren" | "hasStroller" | "mobilityConsiderations" | "ridePreference" | "maxWait
Time" | ... 18 more ... | undefined; type?: EventType | undefined; values?: unkn
own; }' is not assignable to type '{ name?: "useGeniePlus" | "useIndividualLight
ningLane" | "maxLightningLaneBudget" | undefined; type?: EventType | undefined;
values?: unknown; }'.
                                            Types of property 'name' are incompa
tible.
              Type '"date" | "childrenAges" | "partySize" | "startTime" | "parkI
d" | "endTime" | "hasChildre
n" | "hasStroller" | "mobilityConsiderations" | "ridePreference" | "maxWaitTime"
 | "walkingPace" | ... 17 more ... | undefined' is not assignable to type '"useG
eniePlus" | "useIndividualLightningLane" | "maxLightningLaneBudget" | undefined'
.
                    Type '"date"' is not assignable to type '"useGeniePlus" | "u
seIndividualLightningLane" | "ma
xLightningLaneBudget" | undefined'.
                            
553                             <LightningLaneOptionsSection form={form} />
                                                             ~~~~

  src/app/dashboard/optimizer/components/lightning-lane-options.tsx:36:5
    36     form: UseFormReturn<LightningLaneFormData>
           ~~~~
    The expected type comes from property 'form' which is declared here on type
'IntrinsicAttributes & Light
ningLaneOptionsSectionProps'
                            
src/app/dashboard/optimizer/page.tsx:555:59 - error TS2322: Type 'UseFormReturn<
{ date: Date; partySize: num
ber; parkId: string; hasChildren: boolean; hasStroller: boolean; mobilityConside
rations: boolean; ridePreference: "thrill" | "family" | "all"; maxWaitTime: numb
er; ... 17 more ...; maxLightningLaneBudget?: number | undefined; }, any, { ...;
 }>' is not assignable to type 'UseFormReturn<OptimizerFormData>'.
      Types of property 'watch' are incompatible.
    Type 'UseFormWatch<{ date: Date; partySize: number; parkId: string; hasChild
ren: boolean; hasStroller: b
oolean; mobilityConsiderations: boolean; ridePreference: "thrill" | "family" | "
all"; maxWaitTime: number; ... 17 more ...; maxLightningLaneBudget?: number | un
defined; }>' is not assignable to type 'UseFormWatch<OptimizerFormData>'.

          Type 'OptimizerFormData' is missing the following properties from type
 '{ date: Date; partySize: numbe
r; parkId: string; hasChildren: boolean; hasStroller: boolean; mobilityConsidera
tions: boolean; ridePreference: "thrill" | "family" | "all"; maxWaitTime: number
; ... 17 more ...; maxLightningLaneBudget?: number | undefined; }': date, partyS
ize, parkId, hasChildren, and 14 more.
    
555                             <AttractionPreferencesSection form={form} parkId
={form.watch("parkId")} />
                                                              ~~~~

  src/app/dashboard/optimizer/components/attraction-preferences.tsx:39:5
    39     form: UseFormReturn<OptimizerFormData>
           ~~~~
    The expected type comes from property 'form' which is declared here on type
'IntrinsicAttributes & Attra
ctionPreferencesSectionProps'
                            
src/app/map/page.tsx:96:46 - error TS2339: Property 'length' does not exist on t
ype 'Promise<GeofenceData[]>
'.
                            
96         if (savedGeofences && savedGeofences.length > 0) {
                                                ~~~~~~

  src/app/map/page.tsx:96:46
    96         if (savedGeofences && savedGeofences.length > 0) {
                                                    ~~~~~~
    Did you forget to use 'await'?

src/app/map/page.tsx:97:26 - error TS2345: Argument of type 'Promise<GeofenceDat
a[]>' is not assignable to p
arameter of type 'SetStateAction<GeofenceData[]>'.
                            
97             setGeofences(savedGeofences);
                            ~~~~~~~~~~~~~~

  src/app/map/page.tsx:97:26
    97             setGeofences(savedGeofences);
                                ~~~~~~~~~~~~~~
    Did you forget to use 'await'?

src/app/map/page.tsx:102:42 - error TS2339: Property 'length' does not exist on
type 'Promise<GroupMember[]>
'.
                            
102         if (savedMembers && savedMembers.length > 0) {
                                             ~~~~~~

  src/app/map/page.tsx:102:42
    102         if (savedMembers && savedMembers.length > 0) {
                                                 ~~~~~~
    Did you forget to use 'await'?

src/app/map/page.tsx:103:29 - error TS2345: Argument of type 'Promise<GroupMembe
r[]>' is not assignable to p
arameter of type 'SetStateAction<GroupMember[]>'.
                            
103             setGroupMembers(savedMembers);
                                ~~~~~~~~~~~~

  src/app/map/page.tsx:103:29
    103             setGroupMembers(savedMembers);
                                    ~~~~~~~~~~~~
    Did you forget to use 'await'?

src/components/examples/FirebaseRealtimeExample.tsx:95:21 - error TS2322: Type '
null' is not assignable to t
ype 'string | undefined'.
                            
95                     phoneNumber: null,
                       ~~~~~~~~~~~

src/components/examples/FirebaseRealtimeExample.tsx:125:76 - error TS2345: Argum
ent of type '{ name: string;
 description: string; destination: string; startDate: string; endDate: string; i
mageUrl: null; }' is not assignable to parameter of type '{ name: string; descri
ption: string; destination: string; startDate: string; endDate: string; imageUrl
?: string | undefined; }'.
      Types of property 'imageUrl' are incompatible.
    Type 'null' is not assignable to type 'string | undefined'.

125             const newVacationId = await createNewVacation(currentUser.uid, v
acationInfo)
                                                                               ~
~~~~~~~~~~~

src/components/magicui/bento-grid.tsx:60:13 - error TS2322: Type 'string' is not
 assignable to type 'never'.

60       <Icon className="h-12 w-12 origin-left transform-gpu text-neutral-700 t
ransition-all duration-300 e
ase-in-out group-hover:scale-75" />
                                           ~~~~~~~~~

src/components/magicui/confetti.tsx:20:18 - error TS2305: Module '"@/components/
ui/button"' has no exported 
member 'ButtonProps'.
                            
20 import { Button, ButtonProps } from "@/components/ui/button";
                    ~~~~~~~~~~~

src/components/magicui/pointer.tsx:27:19 - error TS2503: Cannot find namespace '
JSX'.

27 }: PointerProps): JSX.Element {
                     ~~~

src/components/magicui/video-text.tsx:101:6 - error TS2746: This JSX tag's 'chil
dren' prop expects a single 
child of type 'never', but multiple children were provided.
                            
101     <Component className={cn(`relative size-full`, className)}>
         ~~~~~~~~~

src/components/magicui/video-text.tsx:101:16 - error TS2322: Type 'string' is no
t assignable to type 'never'
.
                            
101     <Component className={cn(`relative size-full`, className)}>
                   ~~~~~~~~~

src/components/maps/EnhancedGeofencing.tsx:310:17 - error TS2322: Type '"custom"
 | "attraction" | "meeting" 
| "safety" | "directional" | "altitude"' is not assignable to type '"custom"'.
                              Type '"attraction"' is not assignable to type '"cu
stom"'.

310                 type: geofence.type,
                    ~~~~

src/components/maps/EnhancedGeofencing.tsx:311:17 - error TS2322: Type 'boolean
| null' is not assignable to
 type 'boolean'.
                              Type 'null' is not assignable to type 'boolean'.

311                 isActive: geofence.isActive,
                    ~~~~~~~~

src/components/maps/EnhancedGeofencing.tsx:321:17 - error TS2322: Type '{ notify
OnEntry?: boolean | undefine
d; notifyOnExit?: boolean | undefined; cooldownMinutes?: number | undefined; max
Alerts?: number | undefined; triggerDistance?: number | undefined; ... 6 more ..
.; priority?: "low" | ... 3 more ... | undefined; }' is not assignable to type '
{ notifyOnEntry: boolean; notifyOnExit: boolean; cooldownMinutes: number; maxAle
rts: number; triggerDistance: number; requiresMovement: boolean; parkArea: strin
g; attraction: string; customMessage: string; soundAlert: boolean; vibrationAler
t: boolean; priority: "medium"; }'.                           Types of property
'notifyOnEntry' are incompatible.
    Type 'boolean | undefined' is not assignable to type 'boolean'.
      Type 'undefined' is not assignable to type 'boolean'.

321                 settings: geofence.settings || {
                    ~~~~~~~~

src/components/maps/EnhancedGeofencing.tsx:373:17 - error TS2322: Type '{ name:
string; description: string;
 latitude: number; longitude: number; radius: number; type: "custom"; isActive:
boolean; direction: number | null; directionRange: number | null; minAltitude: n
umber | null; maxAltitude: number | null; activeStartTime: string | null; active
EndTime: string | null; settings: { ...; ...' is not assignable to type 'Partial
<EnhancedGeofence>'.
                                  Types of property 'activeStartTime' are incomp
atible.
    Type 'string | null' is not assignable to type 'Date | null | undefined'.
      Type 'string' is not assignable to type 'Date'.

373                 updates: geofenceData
                    ~~~~~~~

  src/components/maps/EnhancedGeofencing.tsx:191:59
    191         mutationFn: async ({ id, updates }: { id: string; updates: Parti
al<EnhancedGeofence> }) => {
                                                                  ~~~~~~~
    The expected type comes from property 'updates' which is declared here on ty
pe '{ id: string; updates: P
artial<EnhancedGeofence>; }'
                            
src/components/maps/EnhancedGeofencing.tsx:376:43 - error TS2345: Argument of ty
pe '{ name: string; descript
ion: string; latitude: number; longitude: number; radius: number; type: "custom"
; isActive: boolean; direction: number | null; directionRange: number | null; mi
nAltitude: number | null; maxAltitude: number | null; activeStartTime: string |
null; activeEndTime: string | null; settings: { ...; ...' is not assignable to p
arameter of type 'Partial<EnhancedGeofence>'.
                                  Types of property 'activeStartTime' are incomp
atible.
    Type 'string | null' is not assignable to type 'Date | null | undefined'.
      Type 'string' is not assignable to type 'Date'.

376             createGeofenceMutation.mutate(geofenceData)
                                              ~~~~~~~~~~~~

src/components/maps/EnhancedGeofencing.tsx:492:45 - error TS2322: Type '{ childr
en: (false | Element)[]; cla
ssName: string; onClick: () => void; }' is not assignable to type 'IntrinsicAttr
ibutes & MagicCardProps'.     Property 'onClick' does not exist on type 'Intrins
icAttributes & MagicCardProps'.

492                                             onClick={() => handleGeofenceSel
ect(geofence)}
                                                ~~~~~~~

src/components/ui/calendar.tsx:63:9 - error TS2353: Object literal may only spec
ify known properties, and 'I
conLeft' does not exist in type 'Partial<CustomComponents>'.
                            
63         IconLeft: ({ className, ...props }) => (
           ~~~~~~~~

  node_modules/react-day-picker/dist/esm/types/props.d.ts:276:5
    276     components?: Partial<CustomComponents>;
            ~~~~~~~~~~
    The expected type comes from property 'components' which is declared here on
 type 'IntrinsicAttributes &
 DayPickerProps'
                            
src/components/ui/calendar.tsx:63:22 - error TS7031: Binding element 'className'
 implicitly has an 'any' typ
e.
                            
63         IconLeft: ({ className, ...props }) => (
                        ~~~~~~~~~

src/components/ui/calendar.tsx:66:23 - error TS7031: Binding element 'className'
 implicitly has an 'any' typ
e.
                            
66         IconRight: ({ className, ...props }) => (
                         ~~~~~~~~~

src/hooks/useRealtimeDatabase.ts:159:40 - error TS2345: Argument of type 'Record
<string, GroupMemberLocation
>' is not assignable to parameter of type 'SetStateAction<Record<string, MemberL
ocation>>'.                 
159                     setMemberLocations(members)
                                           ~~~~~~~

src/hooks/useRealtimeDatabase.ts:337:38 - error TS2345: Argument of type 'Record
<string, Notification>' is n
ot assignable to parameter of type 'SetStateAction<Record<string, Notification>>
'.                          
337                     setNotifications(newNotifications)
                                         ~~~~~~~~~~~~~~~~

src/hooks/useRealtimeDatabase.ts:341:25 - error TS2769: No overload matches this
 call.
  Overload 1 of 2, '(predicate: (value: Notification, index: number, array: Noti
fication[]) => value is Noti
fication, thisArg?: any): Notification[]', gave the following error.
                                Argument of type '(notification: Notification) =
> boolean' is not assignable to parameter of type '(valu
e: Notification, index: number, array: Notification[]) => value is Notification'
.                                 Types of parameters 'notification' and 'value'
 are incompatible.
        Property 'id' is missing in type 'import("/Users/williamcarrico/Web App
Design/woody-disney-vacation
-planning/src/lib/firebase/realtime-database").Notification' but required in typ
e 'Notification'.             Overload 2 of 2, '(predicate: (value: Notification
, index: number, array: Notification[]) => unknown, this
Arg?: any): Notification[]', gave the following error.
                                Argument of type '(notification: Notification) =
> boolean' is not assignable to parameter of type '(valu
e: Notification, index: number, array: Notification[]) => unknown'.
                                  Types of parameters 'notification' and 'value'
 are incompatible.
        Property 'id' is missing in type 'import("/Users/williamcarrico/Web App
Design/woody-disney-vacation
-planning/src/lib/firebase/realtime-database").Notification' but required in typ
e 'Notification'.           
341                         (notification: Notification) => !notification.read
                            ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

  src/hooks/useRealtimeDatabase.ts:44:5
    44     id: string
           ~~
    'id' is declared here.
  src/hooks/useRealtimeDatabase.ts:44:5
    44     id: string
           ~~
    'id' is declared here.

src/hooks/useVacation.ts:142:9 - error TS2769: No overload matches this call.
  Overload 1 of 3, '(options: DefinedInitialDataOptions<unknown, Error, unknown,
 readonly ["vacations", "vac
ation", string, "details"]>, queryClient?: QueryClient | undefined): DefinedUseQ
ueryResult<...>', gave the following error.
                                                            Object literal may o
nly specify known properties, and 'cacheTime' does not exist in type 'DefinedIni
tial
DataOptions<unknown, Error, unknown, readonly ["vacations", "vacation", string,
"details"]>'.                 Overload 2 of 3, '(options: UndefinedInitialDataOp
tions<VacationServiceResponse<{ status: "upcoming" | "ac
tive" | "completed" | "archived"; id: string; name: string; createdAt: string; u
pdatedAt: string; startDate: string; endDate: string; destination: string; ... 1
0 more ...; formattedDateRange: string; }>, Error, VacationServiceResponse<...>,
 readonly [...]>, queryClient?: QueryClient | undefined): UseQueryResult<...>',
gave the following error.
                                    Object literal may only specify known proper
ties, and 'cacheTime' does not exist in type 'UndefinedIniti
alDataOptions<VacationServiceResponse<{ status: "upcoming" | "active" | "complet
ed" | "archived"; id: string; name: string; createdAt: string; updatedAt: string
; startDate: string; endDate: string; destination: string; budget: { ...; } | nu
ll; ... 9 more ...; formattedDateRange: string; }>, Error, Vaca...'.
      Overload 3 of 3, '(options: UseQueryOptions<VacationServiceResponse<{ stat
us: "upcoming" | "active" | "com
pleted" | "archived"; id: string; name: string; createdAt: string; updatedAt: st
ring; startDate: string; endDate: string; destination: string; ... 10 more ...;
formattedDateRange: string; }>, Error, VacationServiceResponse<...>, readonly [.
..]>, queryClient?: QueryClient | undefined): UseQueryResult<...>', gave the fol
lowing error.
                                    Object literal may only specify known proper
ties, and 'cacheTime' does not exist in type 'UseQueryOption
s<VacationServiceResponse<{ status: "upcoming" | "active" | "completed" | "archi
ved"; id: string; name: string; createdAt: string; updatedAt: string; startDate:
 string; endDate: string; destination: string; budget: { ...; } | null; ... 9 mo
re ...; formattedDateRange: string; }>, Error, VacationServiceR...'.
    
142         cacheTime,
            ~~~~~~~~~


src/hooks/useVacation.ts:157:21 - error TS7006: Parameter 'data' implicitly has
an 'any' type.

157         onSuccess: (data) => {
                        ~~~~

src/hooks/useVacation.ts:162:19 - error TS7006: Parameter 'error' implicitly has
 an 'any' type.

162         onError: (error) => {
                      ~~~~~

src/hooks/useVacation.ts:346:27 - error TS2339: Property 'success' does not exis
t on type '{}'.

346         return queryData?.success ? queryData.data : undefined
                              ~~~~~~~

src/hooks/useVacation.ts:346:47 - error TS2339: Property 'data' does not exist o
n type '{}'.

346         return queryData?.success ? queryData.data : undefined
                                                  ~~~~

src/hooks/useVacation.ts:373:33 - error TS2339: Property 'metadata' does not exi
st on type '{}'.

373         lastFetched: queryData?.metadata?.fetchedAt,
                                    ~~~~~~~~

src/hooks/useVacation.ts:374:28 - error TS2339: Property 'metadata' does not exi
st on type '{}'.

374         cached: queryData?.metadata?.cached || false,
                               ~~~~~~~~

src/hooks/useVacation.ts:375:31 - error TS2339: Property 'metadata' does not exi
st on type '{}'.

375         requestId: queryData?.metadata?.requestId,
                                  ~~~~~~~~

src/hooks/useVacation.ts:376:33 - error TS2339: Property 'metadata' does not exi
st on type '{}'.

376         performance: queryData?.metadata?.performance
                                    ~~~~~~~~

src/lib/data/annual-events.ts:27:13 - error TS2741: Property 'type' is missing i
n type '{ url: string; alt: 
string; width: number; height: number; }' but required in type 'Image'.
                            
 27             {
                ~
 28                 url: '/images/events/mickeys-not-so-scary-halloween-party.jp
g',
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
~~~
... 
 31                 height: 800
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~
 32             }
    ~~~~~~~~~~~~~

  src/types/api.ts:148:5
    148     type: 'ICON' | 'BANNER' | 'BACKGROUND' | 'DETAIL';
            ~~~~
    'type' is declared here.

src/lib/data/annual-events.ts:58:13 - error TS2741: Property 'type' is missing i
n type '{ url: string; alt: 
string; width: number; height: number; }' but required in type 'Image'.
                            
 58             {
                ~
 59                 url: '/images/events/mickeys-very-merry-christmas-party.jpg'
,
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
~
... 
 62                 height: 800
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~
 63             }
    ~~~~~~~~~~~~~

  src/types/api.ts:148:5
    148     type: 'ICON' | 'BANNER' | 'BACKGROUND' | 'DETAIL';
            ~~~~
    'type' is declared here.

src/lib/data/annual-events.ts:90:13 - error TS2741: Property 'type' is missing i
n type '{ url: string; alt: 
string; width: number; height: number; }' but required in type 'Image'.
                            
 90             {
                ~
 91                 url: '/images/events/epcot-food-and-wine-festival.jpg',
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
... 
 94                 height: 800
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~
 95             }
    ~~~~~~~~~~~~~

  src/types/api.ts:148:5
    148     type: 'ICON' | 'BANNER' | 'BACKGROUND' | 'DETAIL';
            ~~~~
    'type' is declared here.

src/lib/data/annual-events.ts:122:13 - error TS2741: Property 'type' is missing
in type '{ url: string; alt:
 string; width: number; height: number; }' but required in type 'Image'.
                            
122             {
                ~
123                 url: '/images/events/epcot-flower-and-garden-festival.jpg',
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
... 
126                 height: 800
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~
127             }
    ~~~~~~~~~~~~~

  src/types/api.ts:148:5
    148     type: 'ICON' | 'BANNER' | 'BACKGROUND' | 'DETAIL';
            ~~~~
    'type' is declared here.

src/lib/data/annual-events.ts:154:13 - error TS2741: Property 'type' is missing
in type '{ url: string; alt:
 string; width: number; height: number; }' but required in type 'Image'.
                            
154             {
                ~
155                 url: '/images/events/epcot-festival-of-the-arts.jpg',
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
... 
158                 height: 800
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~
159             }
    ~~~~~~~~~~~~~

  src/types/api.ts:148:5
    148     type: 'ICON' | 'BANNER' | 'BACKGROUND' | 'DETAIL';
            ~~~~
    'type' is declared here.

src/lib/data/annual-events.ts:184:13 - error TS2741: Property 'type' is missing
in type '{ url: string; alt:
 string; width: number; height: number; }' but required in type 'Image'.
                            
184             {
                ~
185                 url: '/images/events/epcot-festival-of-the-holidays.jpg',
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
... 
188                 height: 800
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~
189             }
    ~~~~~~~~~~~~~

  src/types/api.ts:148:5
    148     type: 'ICON' | 'BANNER' | 'BACKGROUND' | 'DETAIL';
            ~~~~
    'type' is declared here.

src/lib/data/annual-events.ts:212:13 - error TS2741: Property 'type' is missing
in type '{ url: string; alt:
 string; width: number; height: number; }' but required in type 'Image'.
                            
212             {
                ~
213                 url: '/images/events/candlelight-processional.jpg',
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
... 
216                 height: 800
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~
217             }
    ~~~~~~~~~~~~~

  src/types/api.ts:148:5
    148     type: 'ICON' | 'BANNER' | 'BACKGROUND' | 'DETAIL';
            ~~~~
    'type' is declared here.

src/lib/data/annual-events.ts:239:13 - error TS2741: Property 'type' is missing
in type '{ url: string; alt:
 string; width: number; height: number; }' but required in type 'Image'.
                            
239             {
                ~
240                 url: '/images/events/rundisney-marathon-weekend.jpg',
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
... 
243                 height: 800
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~
244             }
    ~~~~~~~~~~~~~

  src/types/api.ts:148:5
    148     type: 'ICON' | 'BANNER' | 'BACKGROUND' | 'DETAIL';
            ~~~~
    'type' is declared here.

src/lib/data/annual-events.ts:262:13 - error TS2741: Property 'type' is missing
in type '{ url: string; alt:
 string; width: number; height: number; }' but required in type 'Image'.
                            
262             {
                ~
263                 url: '/images/events/h2o-glow-nights.jpg',
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
... 
266                 height: 800
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~
267             }
    ~~~~~~~~~~~~~

  src/types/api.ts:148:5
    148     type: 'ICON' | 'BANNER' | 'BACKGROUND' | 'DETAIL';
            ~~~~
    'type' is declared here.

src/lib/data/annual-events.ts:285:13 - error TS2741: Property 'type' is missing
in type '{ url: string; alt:
 string; width: number; height: number; }' but required in type 'Image'.
                            
285             {
                ~
286                 url: '/images/events/disney-after-hours.jpg',
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
... 
289                 height: 800
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~
290             }
    ~~~~~~~~~~~~~

  src/types/api.ts:148:5
    148     type: 'ICON' | 'BANNER' | 'BACKGROUND' | 'DETAIL';
            ~~~~
    'type' is declared here.

src/lib/data/annual-events.ts:307:13 - error TS2741: Property 'type' is missing
in type '{ url: string; alt:
 string; width: number; height: number; }' but required in type 'Image'.
                            
307             {
                ~
308                 url: '/images/events/disney-parks-christmas-day-parade.jpg',
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
... 
311                 height: 800
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~
312             }
    ~~~~~~~~~~~~~

  src/types/api.ts:148:5
    148     type: 'ICON' | 'BANNER' | 'BACKGROUND' | 'DETAIL';
            ~~~~
    'type' is declared here.

src/lib/data/restaurants.ts:311:34 - error TS2339: Property 'KIDS_MENU' does not
 exist on type 'typeof Acces
sibilityFeature'.
                            
311             AccessibilityFeature.KIDS_MENU
                                     ~~~~~~~~~

src/lib/data/restaurants.ts:681:28 - error TS2339: Property 'WATERFRONT' does no
t exist on type 'typeof Spec
ialFeature'.
                            
681             SpecialFeature.WATERFRONT,
                               ~~~~~~~~~~

src/lib/data/restaurants.ts:759:12 - error TS7053: Element implicitly has an 'an
y' type because expression o
f type 'DisneyLocation' can't be used to index type '{ "magic-kingdom": DisneyRe
staurant[]; epcot: DisneyRestaurant[]; "hollywood-studios": DisneyRestaurant[];
"disney-springs": DisneyRestaurant[]; }'.                 Property '[DisneyLocat
ion.ANIMAL_KINGDOM]' does not exist on type '{ "magic-kingdom": DisneyRestaurant
[]; 
epcot: DisneyRestaurant[]; "hollywood-studios": DisneyRestaurant[]; "disney-spri
ngs": DisneyRestaurant[]; }'.
                                                        
759     return restaurantsByLocation[locationId] || [];
               ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

src/lib/firebase/initialization.ts:32:13 - error TS2322: Type 'string | null' is
 not assignable to type 'str
ing | undefined'.
                              Type 'null' is not assignable to type 'string | un
defined'.

32             photoURL: firebaseUser.photoURL,
               ~~~~~~~~

src/lib/firebase/initialization.ts:33:13 - error TS2322: Type 'string | null' is
 not assignable to type 'str
ing | undefined'.
                              Type 'null' is not assignable to type 'string | un
defined'.

33             phoneNumber: firebaseUser.phoneNumber,
               ~~~~~~~~~~~

src/lib/firebase/initialization.ts:81:9 - error TS2353: Object literal may only
specify known properties, an
d 'travelers' does not exist in type 'Omit<{ name: string; description?: string
| undefined; destination: string; startDate: string; endDate: string; createdBy:
 string; createdAt: number; updatedAt: number; status: "active" | "completed" |
"planning" | "confirmed"; imageUrl?: string | undefined; shareCode?: string | un
defined; }, "createdAt" | ... 1 mor...'.
                                
81         travelers: { adults: 2, children: 0 }
           ~~~~~~~~~

src/lib/utils/attractionData.ts:198:9 - error TS2739: Type '{ performanceTimes:
string[]; }' is missing the 
following properties from type 'Schedule': openingTime, closingTime
                            
198         schedule: {
            ~~~~~~~~

  src/types/attraction.ts:19:5
    19     schedule?: Schedule;
           ~~~~~~~~
    The expected type comes from property 'schedule' which is declared here on t
ype 'Attraction'

src/providers/__tests__/map-provider.test.tsx:5:1 - error TS2304: Cannot find na
me 'jest'.

5 jest.mock('@vis.gl/react-google-maps', () => ({
  ~~~~

src/providers/__tests__/map-provider.test.tsx:17:1 - error TS2593: Cannot find n
ame 'describe'. Do you need 
to install type definitions for a test runner? Try `npm i --save-dev @types/jest
` or `npm i --save-dev @types/mocha` and then add 'jest' or 'mocha' to the types
 field in your tsconfig.                                
17 describe('MapProvider', () => {
   ~~~~~~~~

src/providers/__tests__/map-provider.test.tsx:19:24 - error TS2304: Cannot find
name 'jest'.

19     const consoleSpy = jest.spyOn(console, 'warn').mockImplementation();
                          ~~~~

src/providers/__tests__/map-provider.test.tsx:21:5 - error TS2304: Cannot find n
ame 'beforeEach'.

21     beforeEach(() => {
       ~~~~~~~~~~

src/providers/__tests__/map-provider.test.tsx:23:9 - error TS2304: Cannot find n
ame 'jest'.

23         jest.clearAllMocks();
           ~~~~

src/providers/__tests__/map-provider.test.tsx:27:5 - error TS2304: Cannot find n
ame 'afterEach'.

27     afterEach(() => {
       ~~~~~~~~~

src/providers/__tests__/map-provider.test.tsx:31:5 - error TS2304: Cannot find n
ame 'afterAll'.

31     afterAll(() => {
       ~~~~~~~~

src/providers/__tests__/map-provider.test.tsx:35:5 - error TS2593: Cannot find n
ame 'describe'. Do you need 
to install type definitions for a test runner? Try `npm i --save-dev @types/jest
` or `npm i --save-dev @types/mocha` and then add 'jest' or 'mocha' to the types
 field in your tsconfig.                                
35     describe('API Key Validation', () => {
       ~~~~~~~~

src/providers/__tests__/map-provider.test.tsx:36:9 - error TS2593: Cannot find n
ame 'it'. Do you need to ins
tall type definitions for a test runner? Try `npm i --save-dev @types/jest` or `
npm i --save-dev @types/mocha` and then add 'jest' or 'mocha' to the types field
 in your tsconfig.                                      
36         it('renders children gracefully when no API key is provided', () => {
           ~~

src/providers/__tests__/map-provider.test.tsx:46:13 - error TS2304: Cannot find
name 'expect'.

46             expect(screen.getByTestId('map-child')).toBeInTheDocument();
               ~~~~~~

src/providers/__tests__/map-provider.test.tsx:48:13 - error TS2304: Cannot find
name 'expect'.

48             expect(consoleSpy).toHaveBeenCalledWith('Google Maps API key miss
ing or invalid. Rendering ap
p without maps functionality.');
                                           ~~~~~~

src/providers/__tests__/map-provider.test.tsx:51:9 - error TS2593: Cannot find n
ame 'it'. Do you need to ins
tall type definitions for a test runner? Try `npm i --save-dev @types/jest` or `
npm i --save-dev @types/mocha` and then add 'jest' or 'mocha' to the types field
 in your tsconfig.                                      
51         it('renders children gracefully when API key has invalid format', ()
=> {
           ~~

src/providers/__tests__/map-provider.test.tsx:59:13 - error TS2304: Cannot find
name 'expect'.

59             expect(screen.getByTestId('map-child')).toBeInTheDocument();
               ~~~~~~

src/providers/__tests__/map-provider.test.tsx:61:13 - error TS2304: Cannot find
name 'expect'.

61             expect(consoleSpy).toHaveBeenCalledWith('Google Maps API key miss
ing or invalid. Rendering ap
p without maps functionality.');
                                           ~~~~~~

src/providers/__tests__/map-provider.test.tsx:64:9 - error TS2593: Cannot find n
ame 'it'. Do you need to ins
tall type definitions for a test runner? Try `npm i --save-dev @types/jest` or `
npm i --save-dev @types/mocha` and then add 'jest' or 'mocha' to the types field
 in your tsconfig.                                      
64         it('accepts valid API key from environment', () => {
           ~~

src/providers/__tests__/map-provider.test.tsx:73:13 - error TS2304: Cannot find
name 'expect'.

73             expect(screen.getByText('Loading Google Maps...')).toBeInTheDocum
ent();
               ~~~~~~

src/providers/__tests__/map-provider.test.tsx:76:9 - error TS2593: Cannot find n
ame 'it'. Do you need to ins
tall type definitions for a test runner? Try `npm i --save-dev @types/jest` or `
npm i --save-dev @types/mocha` and then add 'jest' or 'mocha' to the types field
 in your tsconfig.                                      
76         it('accepts valid API key from props', () => {
           ~~

src/providers/__tests__/map-provider.test.tsx:83:13 - error TS2304: Cannot find
name 'expect'.

83             expect(screen.getByText('Loading Google Maps...')).toBeInTheDocum
ent();
               ~~~~~~

src/providers/__tests__/map-provider.test.tsx:87:5 - error TS2593: Cannot find n
ame 'describe'. Do you need 
to install type definitions for a test runner? Try `npm i --save-dev @types/jest
` or `npm i --save-dev @types/mocha` and then add 'jest' or 'mocha' to the types
 field in your tsconfig.                                
87     describe('Loading States', () => {
       ~~~~~~~~

src/providers/__tests__/map-provider.test.tsx:88:9 - error TS2593: Cannot find n
ame 'it'. Do you need to ins
tall type definitions for a test runner? Try `npm i --save-dev @types/jest` or `
npm i --save-dev @types/mocha` and then add 'jest' or 'mocha' to the types field
 in your tsconfig.                                      
88         it('shows loading state initially', () => {
           ~~

src/providers/__tests__/map-provider.test.tsx:97:13 - error TS2304: Cannot find
name 'expect'.

97             expect(screen.getByText('Loading Google Maps...')).toBeInTheDocum
ent();
               ~~~~~~

src/providers/__tests__/map-provider.test.tsx:98:13 - error TS2304: Cannot find
name 'expect'.

98             expect(screen.queryByTestId('map-child')).not.toBeInTheDocument()
;
               ~~~~~~

src/providers/__tests__/map-provider.test.tsx:101:9 - error TS2593: Cannot find
name 'it'. Do you need to in
stall type definitions for a test runner? Try `npm i --save-dev @types/jest` or
`npm i --save-dev @types/mocha` and then add 'jest' or 'mocha' to the types fiel
d in your tsconfig.                                     
101         it('shows custom loading component when provided', () => {
            ~~

src/providers/__tests__/map-provider.test.tsx:111:13 - error TS2304: Cannot find
 name 'expect'.

111             expect(screen.getByTestId('custom-loading')).toBeInTheDocument()
;
                ~~~~~~

src/providers/__tests__/map-provider.test.tsx:112:13 - error TS2304: Cannot find
 name 'expect'.

112             expect(screen.getByText('Custom Loading')).toBeInTheDocument();
                ~~~~~~

src/providers/__tests__/map-provider.test.tsx:115:9 - error TS2593: Cannot find
name 'it'. Do you need to in
stall type definitions for a test runner? Try `npm i --save-dev @types/jest` or
`npm i --save-dev @types/mocha` and then add 'jest' or 'mocha' to the types fiel
d in your tsconfig.                                     
115         it('renders children after successful load', async () => {
            ~~

src/providers/__tests__/map-provider.test.tsx:125:17 - error TS2304: Cannot find
 name 'expect'.

125                 expect(screen.getByTestId('map-child')).toBeInTheDocument();
                    ~~~~~~

src/providers/__tests__/map-provider.test.tsx:128:13 - error TS2304: Cannot find
 name 'expect'.

128             expect(screen.queryByText('Loading Google Maps...')).not.toBeInT
heDocument();
                ~~~~~~

src/providers/__tests__/map-provider.test.tsx:132:5 - error TS2593: Cannot find
name 'describe'. Do you need
 to install type definitions for a test runner? Try `npm i --save-dev @types/jes
t` or `npm i --save-dev @types/mocha` and then add 'jest' or 'mocha' to the type
s field in your tsconfig.                               
132     describe('Timeout Handling', () => {
        ~~~~~~~~

src/providers/__tests__/map-provider.test.tsx:133:9 - error TS2593: Cannot find
name 'it'. Do you need to in
stall type definitions for a test runner? Try `npm i --save-dev @types/jest` or
`npm i --save-dev @types/mocha` and then add 'jest' or 'mocha' to the types fiel
d in your tsconfig.                                     
133         it('renders children gracefully when timeout occurs', async () => {
            ~~

src/providers/__tests__/map-provider.test.tsx:135:13 - error TS2304: Cannot find
 name 'jest'.

135             jest.doMock('@vis.gl/react-google-maps', () => ({
                ~~~~

src/providers/__tests__/map-provider.test.tsx:152:17 - error TS2304: Cannot find
 name 'expect'.

152                 expect(screen.getByTestId('map-child')).toBeInTheDocument();
                    ~~~~~~

src/providers/__tests__/map-provider.test.tsx:155:13 - error TS2304: Cannot find
 name 'expect'.

155             expect(consoleSpy).toHaveBeenCalledWith('Google Maps failed to l
oad, continuing without maps
:', expect.any(Error));
                                            ~~~~~~

src/providers/__tests__/map-provider.test.tsx:155:109 - error TS2304: Cannot fin
d name 'expect'.

155             expect(consoleSpy).toHaveBeenCalledWith('Google Maps failed to l
oad, continuing without maps
:', expect.any(Error));

                                                        
    ~~~~~~
                            
src/providers/__tests__/map-provider.test.tsx:159:5 - error TS2593: Cannot find
name 'describe'. Do you need
 to install type definitions for a test runner? Try `npm i --save-dev @types/jes
t` or `npm i --save-dev @types/mocha` and then add 'jest' or 'mocha' to the type
s field in your tsconfig.                               
159     describe('Error Handling', () => {
        ~~~~~~~~

src/providers/__tests__/map-provider.test.tsx:160:9 - error TS2593: Cannot find
name 'it'. Do you need to in
stall type definitions for a test runner? Try `npm i --save-dev @types/jest` or
`npm i --save-dev @types/mocha` and then add 'jest' or 'mocha' to the types fiel
d in your tsconfig.                                     
160         it('renders children gracefully when API fails to load', async () =>
 {
            ~~

src/providers/__tests__/map-provider.test.tsx:162:13 - error TS2304: Cannot find
 name 'jest'.

162             jest.doMock('@vis.gl/react-google-maps', () => ({
                ~~~~

src/providers/__tests__/map-provider.test.tsx:187:17 - error TS2304: Cannot find
 name 'expect'.

187                 expect(screen.getByTestId('map-child')).toBeInTheDocument();
                    ~~~~~~

src/providers/__tests__/map-provider.test.tsx:190:13 - error TS2304: Cannot find
 name 'expect'.

190             expect(consoleSpy).toHaveBeenCalledWith('Google Maps failed to l
oad, continuing without maps
:', expect.any(Error));
                                            ~~~~~~

src/providers/__tests__/map-provider.test.tsx:190:109 - error TS2304: Cannot fin
d name 'expect'.

190             expect(consoleSpy).toHaveBeenCalledWith('Google Maps failed to l
oad, continuing without maps
:', expect.any(Error));

                                                        
    ~~~~~~
                            
src/providers/__tests__/map-provider.test.tsx:193:9 - error TS2593: Cannot find
name 'it'. Do you need to in
stall type definitions for a test runner? Try `npm i --save-dev @types/jest` or
`npm i --save-dev @types/mocha` and then add 'jest' or 'mocha' to the types fiel
d in your tsconfig.                                     
193         it('shows custom fallback component when provided', () => {
            ~~

src/providers/__tests__/map-provider.test.tsx:202:13 - error TS2304: Cannot find
 name 'expect'.

202             expect(screen.getByTestId('custom-fallback')).toBeInTheDocument(
);
                ~~~~~~

src/providers/__tests__/map-provider.test.tsx:203:13 - error TS2304: Cannot find
 name 'expect'.

203             expect(screen.getByTestId('map-child')).toBeInTheDocument();
                ~~~~~~

src/providers/__tests__/map-provider.test.tsx:207:5 - error TS2593: Cannot find
name 'describe'. Do you need
 to install type definitions for a test runner? Try `npm i --save-dev @types/jes
t` or `npm i --save-dev @types/mocha` and then add 'jest' or 'mocha' to the type
s field in your tsconfig.                               
207     describe('Configuration Options', () => {
        ~~~~~~~~

src/providers/__tests__/map-provider.test.tsx:208:9 - error TS2593: Cannot find
name 'it'. Do you need to in
stall type definitions for a test runner? Try `npm i --save-dev @types/jest` or
`npm i --save-dev @types/mocha` and then add 'jest' or 'mocha' to the types fiel
d in your tsconfig.                                     
208         it('passes correct props to APIProvider', async () => {
            ~~

src/providers/__tests__/map-provider.test.tsx:222:17 - error TS2304: Cannot find
 name 'expect'.

222                 expect(screen.getByTestId('api-provider')).toBeInTheDocument
();
                    ~~~~~~

src/providers/__tests__/map-provider.test.tsx:226:9 - error TS2593: Cannot find
name 'it'. Do you need to in
stall type definitions for a test runner? Try `npm i --save-dev @types/jest` or
`npm i --save-dev @types/mocha` and then add 'jest' or 'mocha' to the types fiel
d in your tsconfig.                                     
226         it('calls onLoadSuccess callback when API loads', async () => {
            ~~

src/providers/__tests__/map-provider.test.tsx:228:35 - error TS2304: Cannot find
 name 'jest'.

228             const onLoadSuccess = jest.fn();
                                      ~~~~

src/providers/__tests__/map-provider.test.tsx:237:17 - error TS2304: Cannot find
 name 'expect'.

237                 expect(onLoadSuccess).toHaveBeenCalledTimes(1);
                    ~~~~~~

src/providers/__tests__/map-provider.test.tsx:242:5 - error TS2593: Cannot find
name 'describe'. Do you need
 to install type definitions for a test runner? Try `npm i --save-dev @types/jes
t` or `npm i --save-dev @types/mocha` and then add 'jest' or 'mocha' to the type
s field in your tsconfig.                               
242     describe('Performance Optimization', () => {
        ~~~~~~~~

src/providers/__tests__/map-provider.test.tsx:243:9 - error TS2593: Cannot find
name 'it'. Do you need to in
stall type definitions for a test runner? Try `npm i --save-dev @types/jest` or
`npm i --save-dev @types/mocha` and then add 'jest' or 'mocha' to the types fiel
d in your tsconfig.                                     
243         it('memoizes API provider config', () => {
            ~~

src/providers/__tests__/map-provider.test.tsx:259:13 - error TS2304: Cannot find
 name 'expect'.

259             expect(screen.getByText('Loading Google Maps...')).toBeInTheDocu
ment();
                ~~~~~~

src/providers/__tests__/map-provider.test.tsx:263:5 - error TS2593: Cannot find
name 'describe'. Do you need
 to install type definitions for a test runner? Try `npm i --save-dev @types/jes
t` or `npm i --save-dev @types/mocha` and then add 'jest' or 'mocha' to the type
s field in your tsconfig.                               
263     describe('Development vs Production', () => {
        ~~~~~~~~

src/providers/__tests__/map-provider.test.tsx:264:9 - error TS2593: Cannot find
name 'it'. Do you need to in
stall type definitions for a test runner? Try `npm i --save-dev @types/jest` or
`npm i --save-dev @types/mocha` and then add 'jest' or 'mocha' to the types fiel
d in your tsconfig.                                     
264         it('logs warnings in development mode for missing API key', () => {
            ~~

src/providers/__tests__/map-provider.test.tsx:266:25 - error TS2540: Cannot assi
gn to 'NODE_ENV' because it 
is a read-only property.
                            
266             process.env.NODE_ENV = 'development';
                            ~~~~~~~~

src/providers/__tests__/map-provider.test.tsx:274:13 - error TS2304: Cannot find
 name 'expect'.

274             expect(screen.getByTestId('map-child')).toBeInTheDocument();
                ~~~~~~

src/providers/__tests__/map-provider.test.tsx:275:13 - error TS2304: Cannot find
 name 'expect'.

275             expect(consoleSpy).toHaveBeenCalledWith('Google Maps API key mis
sing or invalid. Rendering a
pp without maps functionality.');
                                            ~~~~~~

src/providers/__tests__/map-provider.test.tsx:277:25 - error TS2540: Cannot assi
gn to 'NODE_ENV' because it 
is a read-only property.
                            
277             process.env.NODE_ENV = originalNodeEnv;
                            ~~~~~~~~


Found 165 errors in 41 files.

Errors  Files
     1  .next/types/app/api/attractions/[attractionId]/route.ts:49
     1  .next/types/app/api/attractions/[attractionId]/wait-times/route.ts:38
     1  .next/types/app/api/example/route.ts:12
     3  .next/types/app/api/geofences/[geofenceId]/route.ts:49
     3  .next/types/app/api/itinerary/[itineraryId]/route.ts:49
     1  .next/types/app/api/parks/[parkId]/route.ts:49
     1  .next/types/app/api/parks/route.ts:49
     2  .next/types/app/api/restaurants/[restaurantId]/route.ts:49
     4  .next/types/app/api/vacations/[vacationId]/events/route.ts:49
     3  .next/types/app/api/vacations/[vacationId]/route.ts:49
     1  .next/types/app/dashboard/disneysprings/[locationId]/page.ts:34
     2  .next/types/app/dashboard/events/[eventId]/page.ts:34
     1  .next/types/app/dashboard/group/page.ts:34
     1  .next/types/app/dashboard/itinerary/[itineraryId]/page.ts:34
     1  .next/types/app/dashboard/planning/page.ts:34
     1  .next/types/app/shared-itinerary/[shareCode]/page.ts:34
     3  next.config.ts:71
     1  src/app/api/config.ts:56
     4  src/app/api/geofences/alerts/route.ts:58
     1  src/app/api/itinerary/[itineraryId]/route.ts:3
     3  src/app/api/itinerary/route.ts:70
     1  src/app/api/parks/route.ts:68
     4  src/app/dashboard/events/[eventId]/page.tsx:83
     1  src/app/dashboard/group/page.tsx:4
    10  src/app/dashboard/itinerary/[itineraryId]/page.tsx:4
     2  src/app/dashboard/optimizer/page.tsx:553
     4  src/app/map/page.tsx:96
     2  src/components/examples/FirebaseRealtimeExample.tsx:95
     1  src/components/magicui/bento-grid.tsx:60
     1  src/components/magicui/confetti.tsx:20
     1  src/components/magicui/pointer.tsx:27
     2  src/components/magicui/video-text.tsx:101
     6  src/components/maps/EnhancedGeofencing.tsx:310
     3  src/components/ui/calendar.tsx:63
     3  src/hooks/useRealtimeDatabase.ts:159
     9  src/hooks/useVacation.ts:142
    11  src/lib/data/annual-events.ts:27
     3  src/lib/data/restaurants.ts:311
     3  src/lib/firebase/initialization.ts:32
     1  src/lib/utils/attractionData.ts:198
    58  src/providers/__tests__/map-provider.test.tsx:5

```

---

The TypeScript errors are mostly unrelated to our restaurant utility changes. Let me create a simple test to verify our distance sorting implementation works correctly:

---

Cancelled

---


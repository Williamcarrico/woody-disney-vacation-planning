<!-- Generated by SpecStory -->

# TypeScript Errors in Vacation Planning App (2025-05-27 15:44:24)

_**User**_

[{
	"resource": "/Users/williamcarrico/Web App Design/woody-disney-vacation-planning/src/app/api/resorts/[id]/route.ts",
	"owner": "typescript",
	"code": "2339",
	"severity": 8,
	"message": "Property 'dining' does not exist on type '{ name: string; description: string; id: string; address: { street: string; city: string; state: string; zipCode: string; country: string; }; isActive: boolean; location: { latitude: number; longitude: number; }; ... 17 more ...; lastSyncedAt?: Timestamp | undefined; }'.",
	"source": "ts",
	"startLineNumber": 51,
	"startColumn": 29,
	"endLineNumber": 51,
	"endColumn": 35,
	"modelVersionId": 6
},{
	"resource": "/Users/williamcarrico/Web App Design/woody-disney-vacation-planning/src/app/api/resorts/[id]/route.ts",
	"owner": "typescript",
	"code": "2339",
	"severity": 8,
	"message": "Property 'recreation' does not exist on type '{ name: string; description: string; id: string; address: { street: string; city: string; state: string; zipCode: string; country: string; }; isActive: boolean; location: { latitude: number; longitude: number; }; ... 17 more ...; lastSyncedAt?: Timestamp | undefined; }'.",
	"source": "ts",
	"startLineNumber": 54,
	"startColumn": 29,
	"endLineNumber": 54,
	"endColumn": 39,
	"modelVersionId": 6
},{
	"resource": "/Users/williamcarrico/Web App Design/woody-disney-vacation-planning/src/app/api/resorts/[id]/route.ts",
	"owner": "typescript",
	"code": "2339",
	"severity": 8,
	"message": "Property 'transportation' does not exist on type '{ name: string; description: string; id: string; address: { street: string; city: string; state: string; zipCode: string; country: string; }; isActive: boolean; location: { latitude: number; longitude: number; }; ... 17 more ...; lastSyncedAt?: Timestamp | undefined; }'.",
	"source": "ts",
	"startLineNumber": 57,
	"startColumn": 29,
	"endLineNumber": 57,
	"endColumn": 43,
	"modelVersionId": 6
},{
	"resource": "/Users/williamcarrico/Web App Design/woody-disney-vacation-planning/src/app/api/resorts/[id]/route.ts",
	"owner": "typescript",
	"code": "18048",
	"severity": 8,
	"message": "'resort.amenities' is possibly 'undefined'.",
	"source": "ts",
	"startLineNumber": 62,
	"startColumn": 29,
	"endLineNumber": 62,
	"endColumn": 45,
	"modelVersionId": 6
},{
	"resource": "/Users/williamcarrico/Web App Design/woody-disney-vacation-planning/src/app/api/resorts/[id]/route.ts",
	"owner": "typescript",
	"code": "2339",
	"severity": 8,
	"message": "Property 'dining' does not exist on type '{ name: string; description: string; id: string; address: { street: string; city: string; state: string; zipCode: string; country: string; }; isActive: boolean; location: { latitude: number; longitude: number; }; ... 17 more ...; lastSyncedAt?: Timestamp | undefined; }'.",
	"source": "ts",
	"startLineNumber": 63,
	"startColumn": 33,
	"endLineNumber": 63,
	"endColumn": 39,
	"modelVersionId": 6
},{
	"resource": "/Users/williamcarrico/Web App Design/woody-disney-vacation-planning/src/app/api/resorts/[id]/route.ts",
	"owner": "typescript",
	"code": "2339",
	"severity": 8,
	"message": "Property 'recreation' does not exist on type '{ name: string; description: string; id: string; address: { street: string; city: string; state: string; zipCode: string; country: string; }; isActive: boolean; location: { latitude: number; longitude: number; }; ... 17 more ...; lastSyncedAt?: Timestamp | undefined; }'.",
	"source": "ts",
	"startLineNumber": 64,
	"startColumn": 37,
	"endLineNumber": 64,
	"endColumn": 47,
	"modelVersionId": 6
},{
	"resource": "/Users/williamcarrico/Web App Design/woody-disney-vacation-planning/src/app/api/resorts/[id]/route.ts",
	"owner": "typescript",
	"code": "2339",
	"severity": 8,
	"message": "Property 'transportation' does not exist on type '{ name: string; description: string; id: string; address: { street: string; city: string; state: string; zipCode: string; country: string; }; isActive: boolean; location: { latitude: number; longitude: number; }; ... 17 more ...; lastSyncedAt?: Timestamp | undefined; }'.",
	"source": "ts",
	"startLineNumber": 65,
	"startColumn": 41,
	"endLineNumber": 65,
	"endColumn": 55,
	"modelVersionId": 6
},{
	"resource": "/Users/williamcarrico/Web App Design/woody-disney-vacation-planning/src/app/api/resorts/[id]/route.ts",
	"owner": "typescript",
	"code": "2339",
	"severity": 8,
	"message": "Property 'pricing' does not exist on type '{ name: string; description: string; id: string; address: { street: string; city: string; state: string; zipCode: string; country: string; }; isActive: boolean; location: { latitude: number; longitude: number; }; ... 17 more ...; lastSyncedAt?: Timestamp | undefined; }'.",
	"source": "ts",
	"startLineNumber": 68,
	"startColumn": 28,
	"endLineNumber": 68,
	"endColumn": 35,
	"modelVersionId": 6
},{
	"resource": "/Users/williamcarrico/Web App Design/woody-disney-vacation-planning/src/app/api/resorts/[id]/route.ts",
	"owner": "typescript",
	"code": "2339",
	"severity": 8,
	"message": "Property 'pricing' does not exist on type '{ name: string; description: string; id: string; address: { street: string; city: string; state: string; zipCode: string; country: string; }; isActive: boolean; location: { latitude: number; longitude: number; }; ... 17 more ...; lastSyncedAt?: Timestamp | undefined; }'.",
	"source": "ts",
	"startLineNumber": 69,
	"startColumn": 28,
	"endLineNumber": 69,
	"endColumn": 35,
	"modelVersionId": 6
},{
	"resource": "/Users/williamcarrico/Web App Design/woody-disney-vacation-planning/src/app/api/resorts/[id]/route.ts",
	"owner": "typescript",
	"code": "2339",
	"severity": 8,
	"message": "Property 'pricing' does not exist on type '{ name: string; description: string; id: string; address: { street: string; city: string; state: string; zipCode: string; country: string; }; isActive: boolean; location: { latitude: number; longitude: number; }; ... 17 more ...; lastSyncedAt?: Timestamp | undefined; }'.",
	"source": "ts",
	"startLineNumber": 70,
	"startColumn": 28,
	"endLineNumber": 70,
	"endColumn": 35,
	"modelVersionId": 6
},{
	"resource": "/Users/williamcarrico/Web App Design/woody-disney-vacation-planning/src/app/api/resorts/[id]/route.ts",
	"owner": "typescript",
	"code": "2339",
	"severity": 8,
	"message": "Property 'filter' does not exist on type 'number'.",
	"source": "ts",
	"startLineNumber": 71,
	"startColumn": 19,
	"endLineNumber": 71,
	"endColumn": 25,
	"modelVersionId": 6
},{
	"resource": "/Users/williamcarrico/Web App Design/woody-disney-vacation-planning/src/app/api/resorts/[id]/route.ts",
	"owner": "typescript",
	"code": "7006",
	"severity": 8,
	"message": "Parameter 'p' implicitly has an 'any' type.",
	"source": "ts",
	"startLineNumber": 71,
	"startColumn": 26,
	"endLineNumber": 71,
	"endColumn": 27,
	"modelVersionId": 6
},{
	"resource": "/Users/williamcarrico/Web App Design/woody-disney-vacation-planning/src/app/api/resorts/[id]/route.ts",
	"owner": "typescript",
	"code": "2339",
	"severity": 8,
	"message": "Property 'pricing' does not exist on type '{ name: string; description: string; id: string; address: { street: string; city: string; state: string; zipCode: string; country: string; }; isActive: boolean; location: { latitude: number; longitude: number; }; ... 17 more ...; lastSyncedAt?: Timestamp | undefined; }'.",
	"source": "ts",
	"startLineNumber": 73,
	"startColumn": 28,
	"endLineNumber": 73,
	"endColumn": 35,
	"modelVersionId": 6
},{
	"resource": "/Users/williamcarrico/Web App Design/woody-disney-vacation-planning/src/app/api/resorts/[id]/route.ts",
	"owner": "typescript",
	"code": "2339",
	"severity": 8,
	"message": "Property 'pricing' does not exist on type '{ name: string; description: string; id: string; address: { street: string; city: string; state: string; zipCode: string; country: string; }; isActive: boolean; location: { latitude: number; longitude: number; }; ... 17 more ...; lastSyncedAt?: Timestamp | undefined; }'.",
	"source": "ts",
	"startLineNumber": 74,
	"startColumn": 28,
	"endLineNumber": 74,
	"endColumn": 35,
	"modelVersionId": 6
},{
	"resource": "/Users/williamcarrico/Web App Design/woody-disney-vacation-planning/src/app/api/resorts/[id]/route.ts",
	"owner": "typescript",
	"code": "2339",
	"severity": 8,
	"message": "Property 'pricing' does not exist on type '{ name: string; description: string; id: string; address: { street: string; city: string; state: string; zipCode: string; country: string; }; isActive: boolean; location: { latitude: number; longitude: number; }; ... 17 more ...; lastSyncedAt?: Timestamp | undefined; }'.",
	"source": "ts",
	"startLineNumber": 75,
	"startColumn": 28,
	"endLineNumber": 75,
	"endColumn": 35,
	"modelVersionId": 6
},{
	"resource": "/Users/williamcarrico/Web App Design/woody-disney-vacation-planning/src/app/api/resorts/[id]/route.ts",
	"owner": "typescript",
	"code": "2339",
	"severity": 8,
	"message": "Property 'distanceToParks' does not exist on type '{ latitude: number; longitude: number; }'.",
	"source": "ts",
	"startLineNumber": 78,
	"startColumn": 58,
	"endLineNumber": 78,
	"endColumn": 73,
	"modelVersionId": 6
},{
	"resource": "/Users/williamcarrico/Web App Design/woody-disney-vacation-planning/src/app/api/resorts/[id]/route.ts",
	"owner": "typescript",
	"code": "18046",
	"severity": 8,
	"message": "'a' is of type 'unknown'.",
	"source": "ts",
	"startLineNumber": 79,
	"startColumn": 41,
	"endLineNumber": 79,
	"endColumn": 42,
	"modelVersionId": 6
},{
	"resource": "/Users/williamcarrico/Web App Design/woody-disney-vacation-planning/src/app/api/resorts/[id]/route.ts",
	"owner": "typescript",
	"code": "18046",
	"severity": 8,
	"message": "'b' is of type 'unknown'.",
	"source": "ts",
	"startLineNumber": 79,
	"startColumn": 45,
	"endLineNumber": 79,
	"endColumn": 46,
	"modelVersionId": 6
},{
	"resource": "/Users/williamcarrico/Web App Design/woody-disney-vacation-planning/src/app/api/resorts/[id]/route.ts",
	"owner": "typescript",
	"code": "2339",
	"severity": 8,
	"message": "Property 'lastRefurbished' does not exist on type '{ name: string; description: string; id: string; address: { street: string; city: string; state: string; zipCode: string; country: string; }; isActive: boolean; location: { latitude: number; longitude: number; }; ... 17 more ...; lastSyncedAt?: Timestamp | undefined; }'.",
	"source": "ts",
	"startLineNumber": 82,
	"startColumn": 33,
	"endLineNumber": 82,
	"endColumn": 48,
	"modelVersionId": 6
},{
	"resource": "/Users/williamcarrico/Web App Design/woody-disney-vacation-planning/src/app/api/resorts/[id]/route.ts",
	"owner": "typescript",
	"code": "2339",
	"severity": 8,
	"message": "Property 'openingDate' does not exist on type '{ name: string; description: string; id: string; address: { street: string; city: string; state: string; zipCode: string; country: string; }; isActive: boolean; location: { latitude: number; longitude: number; }; ... 17 more ...; lastSyncedAt?: Timestamp | undefined; }'.",
	"source": "ts",
	"startLineNumber": 82,
	"startColumn": 59,
	"endLineNumber": 82,
	"endColumn": 70,
	"modelVersionId": 6
},{
	"resource": "/Users/williamcarrico/Web App Design/woody-disney-vacation-planning/src/app/api/resorts/[id]/route.ts",
	"owner": "eslint9",
	"code": {
		"value": "@typescript-eslint/no-explicit-any",
		"target": {
			"$mid": 1,
			"path": "/rules/no-explicit-any",
			"scheme": "https",
			"authority": "typescript-eslint.io"
		}
	},
	"severity": 8,
	"message": "Unexpected any. Specify a different type.",
	"source": "eslint",
	"startLineNumber": 245,
	"startColumn": 27,
	"endLineNumber": 245,
	"endColumn": 30,
	"modelVersionId": 6
}]

---

_**Assistant**_

I can see the issue - the TypeScript errors are occurring because the resort type returned by `ResortService.getResort()` doesn't match the properties being accessed in the code. Let me first examine the resort schema and service to understand the correct type structure.

---

<details>
            <summary>Searched codebase "resort.schema" • **2** results</summary>
        
| File |
|------|
| `undefined` |
| `undefined` |

</details>

---

Read file: src/lib/schemas/resort.schema.ts

---

Now let me check the ResortService to see what type it returns:

---

<details>
            <summary>Searched codebase "ResortService" • **0** results</summary>
        
No results found
</details>

---

<details>
            <summary>Grep search for "ResortService" • **5** files</summary>
        
| File | Line | Match |
|------|------|-------|
| `file:///Users/williamcarrico/Web%20App%20Design/woody-disney-vacation-planning/src/lib/websocket/websocket-service.ts` | L10 | `import { ResortService } from '@/lib/firebase/firestore-service'` |
| `file:///Users/williamcarrico/Web%20App%20Design/woody-disney-vacation-planning/src/lib/websocket/websocket-service.ts` | L300 | `ResortService.getResort(data.resortId).then(resort => {` |
| `file:///Users/williamcarrico/Web%20App%20Design/woody-disney-vacation-planning/src/lib/firebase/firestore-service.ts` | L372 | `export class ResortService extends FirestoreService {` |
| `file:///Users/williamcarrico/Web%20App%20Design/woody-disney-vacation-planning/src/lib/firebase/firestore-service.ts` | L597 | `export { FirestoreService as default, ResortService }` |
| `file:///Users/williamcarrico/Web%20App%20Design/woody-disney-vacation-planning/src/app/api/resorts/%5Bid%5D/route.ts` | L3 | `import { ResortService } from '@/lib/firebase/firestore-service'` |
| `file:///Users/williamcarrico/Web%20App%20Design/woody-disney-vacation-planning/src/app/api/resorts/%5Bid%5D/route.ts` | L33 | `const resort = await ResortService.getResort(id, useCache)` |
| `file:///Users/williamcarrico/Web%20App%20Design/woody-disney-vacation-planning/src/app/api/resorts/%5Bid%5D/route.ts` | L121 | `const existingResort = await ResortService.getResort(id, false)` |
| `file:///Users/williamcarrico/Web%20App%20Design/woody-disney-vacation-planning/src/app/api/resorts/%5Bid%5D/route.ts` | L131 | `await ResortService.updateResort(id, validatedData)` |
| `file:///Users/williamcarrico/Web%20App%20Design/woody-disney-vacation-planning/src/app/api/resorts/%5Bid%5D/route.ts` | L134 | `const updatedResort = await ResortService.getResort(id, false)` |
| `file:///Users/williamcarrico/Web%20App%20Design/woody-disney-vacation-planning/src/app/api/resorts/%5Bid%5D/route.ts` | L178 | `const existingResort = await ResortService.getResort(id, false)` |
| `file:///Users/williamcarrico/Web%20App%20Design/woody-disney-vacation-planning/src/app/api/resorts/%5Bid%5D/route.ts` | L193 | `await ResortService.updateResort(id, { isActive: false })` |
| `file:///Users/williamcarrico/Web%20App%20Design/woody-disney-vacation-planning/src/app/api/resorts/%5Bid%5D/route.ts` | L196 | `await ResortService.deleteResort(id)` |
| `file:///Users/williamcarrico/Web%20App%20Design/woody-disney-vacation-planning/src/app/api/resorts/%5Bid%5D/route.ts` | L260 | `const existingResort = await ResortService.getResort(id, false)` |
| `file:///Users/williamcarrico/Web%20App%20Design/woody-disney-vacation-planning/src/app/api/resorts/%5Bid%5D/route.ts` | L270 | `await ResortService.updateResort(id, updateData)` |
| `file:///Users/williamcarrico/Web%20App%20Design/woody-disney-vacation-planning/src/app/api/resorts/%5Bid%5D/route.ts` | L273 | `const updatedResort = await ResortService.getResort(id, false)` |
| `file:///Users/williamcarrico/Web%20App%20Design/woody-disney-vacation-planning/src/app/api/resorts/route.ts` | L8 | `import { ResortService } from '@/lib/firebase/firestore-service'` |
| `file:///Users/williamcarrico/Web%20App%20Design/woody-disney-vacation-planning/src/app/api/resorts/route.ts` | L34 | `const result = await ResortService.getResorts({` |
| `file:///Users/williamcarrico/Web%20App%20Design/woody-disney-vacation-planning/src/app/api/resorts/route.ts` | L92 | `const allResorts = result.totalCount ? await ResortService.getResorts({ limit: 1000 }) : result` |
| `file:///Users/williamcarrico/Web%20App%20Design/woody-disney-vacation-planning/src/app/api/resorts/route.ts` | L147 | `const resortId = await ResortService.createResort(validatedData)` |
| `file:///Users/williamcarrico/Web%20App%20Design/woody-disney-vacation-planning/src/app/api/resorts/route.ts` | L150 | `const createdResort = await ResortService.getResort(resortId, false)` |
| `file:///Users/williamcarrico/Web%20App%20Design/woody-disney-vacation-planning/src/app/api/resorts/route.ts` | L202 | `await ResortService.migrateStaticData()` |
| `file:///Users/williamcarrico/Web%20App%20Design/woody-disney-vacation-planning/src/app/api/resorts/%5Bid%5D/route.ts` | L3 | `import { ResortService } from '@/lib/firebase/firestore-service'` |
| `file:///Users/williamcarrico/Web%20App%20Design/woody-disney-vacation-planning/src/app/api/resorts/%5Bid%5D/route.ts` | L33 | `const resort = await ResortService.getResort(id, useCache)` |
| `file:///Users/williamcarrico/Web%20App%20Design/woody-disney-vacation-planning/src/app/api/resorts/%5Bid%5D/route.ts` | L121 | `const existingResort = await ResortService.getResort(id, false)` |
| `file:///Users/williamcarrico/Web%20App%20Design/woody-disney-vacation-planning/src/app/api/resorts/%5Bid%5D/route.ts` | L131 | `await ResortService.updateResort(id, validatedData)` |
| `file:///Users/williamcarrico/Web%20App%20Design/woody-disney-vacation-planning/src/app/api/resorts/%5Bid%5D/route.ts` | L134 | `const updatedResort = await ResortService.getResort(id, false)` |
| `file:///Users/williamcarrico/Web%20App%20Design/woody-disney-vacation-planning/src/app/api/resorts/%5Bid%5D/route.ts` | L178 | `const existingResort = await ResortService.getResort(id, false)` |
| `file:///Users/williamcarrico/Web%20App%20Design/woody-disney-vacation-planning/src/app/api/resorts/%5Bid%5D/route.ts` | L193 | `await ResortService.updateResort(id, { isActive: false })` |
| `file:///Users/williamcarrico/Web%20App%20Design/woody-disney-vacation-planning/src/app/api/resorts/%5Bid%5D/route.ts` | L196 | `await ResortService.deleteResort(id)` |
| `file:///Users/williamcarrico/Web%20App%20Design/woody-disney-vacation-planning/src/app/api/resorts/%5Bid%5D/route.ts` | L260 | `const existingResort = await ResortService.getResort(id, false)` |
| `file:///Users/williamcarrico/Web%20App%20Design/woody-disney-vacation-planning/src/app/api/resorts/%5Bid%5D/route.ts` | L270 | `await ResortService.updateResort(id, updateData)` |
| `file:///Users/williamcarrico/Web%20App%20Design/woody-disney-vacation-planning/src/app/api/resorts/%5Bid%5D/route.ts` | L273 | `const updatedResort = await ResortService.getResort(id, false)` |

</details>

---

Read file: src/lib/firebase/firestore-service.ts

---

Now I need to check the static resorts data to understand the full structure:

---

<details>
            <summary>Grep search for "staticResorts" • **1** files</summary>
        
| File | Line | Match |
|------|------|-------|
| `file:///Users/williamcarrico/Web%20App%20Design/woody-disney-vacation-planning/src/lib/firebase/firestore-service.ts` | L32 | `import { resorts as staticResorts } from '@/lib/utils/resortData'` |
| `file:///Users/williamcarrico/Web%20App%20Design/woody-disney-vacation-planning/src/lib/firebase/firestore-service.ts` | L424 | `return this.getStaticResorts(options)` |
| `file:///Users/williamcarrico/Web%20App%20Design/woody-disney-vacation-planning/src/lib/firebase/firestore-service.ts` | L430 | `return this.getStaticResorts(options)` |
| `file:///Users/williamcarrico/Web%20App%20Design/woody-disney-vacation-planning/src/lib/firebase/firestore-service.ts` | L447 | `const staticResort = staticResorts.find(r => r.id === id)` |
| `file:///Users/williamcarrico/Web%20App%20Design/woody-disney-vacation-planning/src/lib/firebase/firestore-service.ts` | L451 | `const staticResort = staticResorts.find(r => r.id === id)` |
| `file:///Users/williamcarrico/Web%20App%20Design/woody-disney-vacation-planning/src/lib/firebase/firestore-service.ts` | L483 | `const operations = staticResorts.map(resort => ({` |
| `file:///Users/williamcarrico/Web%20App%20Design/woody-disney-vacation-planning/src/lib/firebase/firestore-service.ts` | L495 | `console.log(`Successfully migrated ${staticResorts.length} resorts to Firestore`)` |
| `file:///Users/williamcarrico/Web%20App%20Design/woody-disney-vacation-planning/src/lib/firebase/firestore-service.ts` | L501 | `private static getStaticResorts(options: any): PaginationResult<Resort> {` |
| `file:///Users/williamcarrico/Web%20App%20Design/woody-disney-vacation-planning/src/lib/firebase/firestore-service.ts` | L502 | `let filtered = [...staticResorts]` |

</details>

---

Read file: src/lib/utils/resortData.ts

---

Now I need to check the Resort type definition to understand the complete structure:

---

Read file: src/types/resort.ts

---

Now I understand the issue. The code is trying to access properties that exist in the static resort data structure (from `src/types/resort.ts`) but not in the Firestore schema (from `src/lib/schemas/resort.schema.ts`). The ResortService returns either a Firestore Resort (which follows the schema) or a static Resort (which follows the types), but the code assumes it's always the static Resort type.

Let me fix the route by properly handling both types and adding proper type guards:

---

```diff
      }>
  }
+ 
+ // Type guard to check if resort has static data structure
+ function hasStaticResortStructure(resort: any): resort is import('@/types/resort').Resort {
+     return resort && 
+            typeof resort.dining !== 'undefined' &&
+            typeof resort.recreation !== 'undefined' &&
+            typeof resort.transportation !== 'undefined' &&
+            typeof resort.pricing !== 'undefined'
+ }
  
  // GET /api/resorts/[id] - Get a specific resort by ID
```

```diff
          }
  
-         // Optionally filter data based on query parameters
+         // Create a processed resort object that handles both data structures
          const processedResort = { ...resort }
  
-         if (!includeAmenities) {
-             processedResort.amenities = []
-         }
-         if (!includeDining) {
-             processedResort.dining = []
-         }
-         if (!includeRecreation) {
-             processedResort.recreation = []
-         }
-         if (!includeTransportation) {
-             processedResort.transportation = []
-         }
+         // Only filter data if it exists and the resort has static structure
+         if (hasStaticResortStructure(resort)) {
+             if (!includeAmenities) {
+                 processedResort.amenities = []
+             }
+             if (!includeDining) {
+                 processedResort.dining = []
+             }
+             if (!includeRecreation) {
+                 processedResort.recreation = []
+             }
+             if (!includeTransportation) {
+                 processedResort.transportation = []
+             }
+         } else {
+             // For Firestore resorts, handle optional amenities
+             if (!includeAmenities && processedResort.amenities) {
+                 processedResort.amenities = []
+             }
+         }
  
-         // Calculate additional metadata
-         const metadata = {
-             totalAmenities: resort.amenities.length,
-             totalDining: resort.dining.length,
-             totalRecreation: resort.recreation.length,
-             totalTransportation: resort.transportation.length,
-             priceRange: {
-                 min: Math.min(
-                     resort.pricing.valueRange.low || Infinity,
-                     resort.pricing.moderateRange.low || Infinity,
-                     resort.pricing.deluxeRange.low || Infinity
-                 ).filter(p => p !== Infinity)[0] || 0,
-                 max: Math.max(
-                     resort.pricing.valueRange.high || 0,
-                     resort.pricing.moderateRange.high || 0,
-                     resort.pricing.deluxeRange.high || 0
-                 )
-             },
-             nearestParks: Object.entries(resort.location.distanceToParks)
-                 .sort(([, a], [, b]) => a - b)
-                 .slice(0, 3)
-                 .map(([park, distance]) => ({ park, distance })),
-             lastUpdated: resort.lastRefurbished || resort.openingDate
+         // Calculate additional metadata based on available data
+         const metadata: Record<string, any> = {}
+ 
+         if (hasStaticResortStructure(resort)) {
+             // Static resort structure
+             metadata.totalAmenities = resort.amenities?.length || 0
+             metadata.totalDining = resort.dining?.length || 0
+             metadata.totalRecreation = resort.recreation?.length || 0
+             metadata.totalTransportation = resort.transportation?.length || 0
+             
+             if (resort.pricing) {
+                 const prices = [
+                     resort.pricing.valueRange?.low,
+                     resort.pricing.moderateRange?.low,
+                     resort.pricing.deluxeRange?.low
+                 ].filter((p): p is number => typeof p === 'number' && p > 0)
+                 
+                 const maxPrices = [
+                     resort.pricing.valueRange?.high,
+                     resort.pricing.moderateRange?.high,
+                     resort.pricing.deluxeRange?.high
+                 ].filter((p): p is number => typeof p === 'number' && p > 0)
+ 
+                 metadata.priceRange = {
+                     min: prices.length > 0 ? Math.min(...prices) : 0,
+                     max: maxPrices.length > 0 ? Math.max(...maxPrices) : 0
+                 }
+             }
+ 
+             if (resort.location?.distanceToParks) {
+                 metadata.nearestParks = Object.entries(resort.location.distanceToParks)
+                     .sort(([, a], [, b]) => (a as number) - (b as number))
+                     .slice(0, 3)
+                     .map(([park, distance]) => ({ park, distance }))
+             }
+ 
+             metadata.lastUpdated = resort.lastRefurbished || resort.openingDate
+         } else {
+             // Firestore resort structure
+             metadata.totalAmenities = resort.amenities?.length || 0
+             metadata.totalDining = 0 // Not available in Firestore schema
+             metadata.totalRecreation = 0 // Not available in Firestore schema
+             metadata.totalTransportation = 0 // Not available in Firestore schema
+             
+             // Basic price range from room types if available
+             if (resort.roomTypes && resort.roomTypes.length > 0) {
+                 const roomPrices = resort.roomTypes
+                     .map(room => room.price)
+                     .filter((price): price is NonNullable<typeof price> => price != null)
+                 
+                 if (roomPrices.length > 0) {
+                     const minPrices = roomPrices.map(p => p.min).filter((p): p is number => typeof p === 'number')
+                     const maxPrices = roomPrices.map(p => p.max).filter((p): p is number => typeof p === 'number')
+                     
+                     metadata.priceRange = {
+                         min: minPrices.length > 0 ? Math.min(...minPrices) : 0,
+                         max: maxPrices.length > 0 ? Math.max(...maxPrices) : 0
+                     }
+                 }
+             }
+ 
+             metadata.nearestParks = []
+             metadata.lastUpdated = resort.updatedAt || resort.createdAt
          }
  
```

```diff
                  timestamp: new Date().toISOString(),
                  cached: useCache,
-                 dataSource: 'hybrid' // Firestore with static fallback
+                 dataSource: hasStaticResortStructure(resort) ? 'static' : 'firestore'
              }
          })
```

```diff
          ]
  
-         const updateData: any = {}
+         const updateData: Record<string, unknown> = {}
          for (const [key, value] of Object.entries(body)) {
              if (allowedFields.includes(key)) {
```

---

I see the issue. The type guard is causing conflicts because the category enums are different between the two types. Let me fix this by creating a better type approach:

---

```diff
      }>
  }
- 
- // Type guard to check if resort has static data structure
- function hasStaticResortStructure(resort: any): resort is import('@/types/resort').Resort {
-     return resort &&
-         typeof resort.dining !== 'undefined' &&
-         typeof resort.recreation !== 'undefined' &&
-         typeof resort.transportation !== 'undefined' &&
-         typeof resort.pricing !== 'undefined'
- }
  
  // GET /api/resorts/[id] - Get a specific resort by ID
```

```diff
  
          // Create a processed resort object that handles both data structures
-         const processedResort = { ...resort }
- 
-         // Only filter data if it exists and the resort has static structure
-         if (hasStaticResortStructure(resort)) {
-             if (!includeAmenities) {
+         const processedResort = { ...resort } as Record<string, unknown>
+ 
+         // Check if resort has static data structure properties and filter accordingly
+         const hasStaticStructure = 'dining' in resort && 'recreation' in resort && 'transportation' in resort
+ 
+         if (hasStaticStructure) {
+             // Static resort structure - filter optional data
+             if (!includeAmenities && 'amenities' in processedResort) {
                  processedResort.amenities = []
              }
-             if (!includeDining) {
+             if (!includeDining && 'dining' in processedResort) {
                  processedResort.dining = []
              }
-             if (!includeRecreation) {
+             if (!includeRecreation && 'recreation' in processedResort) {
                  processedResort.recreation = []
              }
-             if (!includeTransportation) {
+             if (!includeTransportation && 'transportation' in processedResort) {
                  processedResort.transportation = []
              }
          } else {
-             // For Firestore resorts, handle optional amenities
-             if (!includeAmenities && processedResort.amenities) {
+             // Firestore resort structure - only filter amenities if present
+             if (!includeAmenities && 'amenities' in processedResort) {
                  processedResort.amenities = []
              }
          }
  
          // Calculate additional metadata based on available data
-         const metadata: Record<string, any> = {}
+         const metadata: Record<string, unknown> = {}
  
-         if (hasStaticResortStructure(resort)) {
+         if (hasStaticStructure) {
              // Static resort structure
-             metadata.totalAmenities = resort.amenities?.length || 0
-             metadata.totalDining = resort.dining?.length || 0
-             metadata.totalRecreation = resort.recreation?.length || 0
-             metadata.totalTransportation = resort.transportation?.length || 0
- 
-             if (resort.pricing) {
-                 const prices = [
-                     resort.pricing.valueRange?.low,
-                     resort.pricing.moderateRange?.low,
-                     resort.pricing.deluxeRange?.low
-                 ].filter((p): p is number => typeof p === 'number' && p > 0)
- 
-                 const maxPrices = [
-                     resort.pricing.valueRange?.high,
-                     resort.pricing.moderateRange?.high,
-                     resort.pricing.deluxeRange?.high
-                 ].filter((p): p is number => typeof p === 'number' && p > 0)
+             const staticResort = resort as Record<string, unknown>
+             
+             metadata.totalAmenities = Array.isArray(staticResort.amenities) ? staticResort.amenities.length : 0
+             metadata.totalDining = Array.isArray(staticResort.dining) ? staticResort.dining.length : 0
+             metadata.totalRecreation = Array.isArray(staticResort.recreation) ? staticResort.recreation.length : 0
+             metadata.totalTransportation = Array.isArray(staticResort.transportation) ? staticResort.transportation.length : 0
+             
+             // Handle pricing if available
+             if (staticResort.pricing && typeof staticResort.pricing === 'object') {
+                 const pricing = staticResort.pricing as Record<string, Record<string, number>>
+                 const prices: number[] = []
+                 const maxPrices: number[] = []
+                 
+                 // Extract price ranges
+                 for (const range of ['valueRange', 'moderateRange', 'deluxeRange']) {
+                     if (pricing[range]) {
+                         if (typeof pricing[range].low === 'number' && pricing[range].low > 0) {
+                             prices.push(pricing[range].low)
+                         }
+                         if (typeof pricing[range].high === 'number' && pricing[range].high > 0) {
+                             maxPrices.push(pricing[range].high)
+                         }
+                     }
+                 }
  
                  metadata.priceRange = {
```

```diff
              }
  
-             if (resort.location?.distanceToParks) {
-                 metadata.nearestParks = Object.entries(resort.location.distanceToParks)
-                     .sort(([, a], [, b]) => (a as number) - (b as number))
+             // Handle location and distance to parks
+             if (staticResort.location && typeof staticResort.location === 'object') {
+                 const location = staticResort.location as Record<string, unknown>
+                 if (location.distanceToParks && typeof location.distanceToParks === 'object') {
+                     const distanceToParks = location.distanceToParks as Record<string, number>
+                     metadata.nearestParks = Object.entries(distanceToParks)
+                         .sort(([, a], [, b]) => a - b)
                          .slice(0, 3)
                          .map(([park, distance]) => ({ park, distance }))
+                 }
              }
  
-             metadata.lastUpdated = resort.lastRefurbished || resort.openingDate
+             metadata.lastUpdated = staticResort.lastRefurbished || staticResort.openingDate
          } else {
              // Firestore resort structure
-             metadata.totalAmenities = resort.amenities?.length || 0
+             metadata.totalAmenities = Array.isArray(resort.amenities) ? resort.amenities.length : 0
              metadata.totalDining = 0 // Not available in Firestore schema
              metadata.totalRecreation = 0 // Not available in Firestore schema
              metadata.totalTransportation = 0 // Not available in Firestore schema
              
              // Basic price range from room types if available
-             if (resort.roomTypes && resort.roomTypes.length > 0) {
+             if (Array.isArray(resort.roomTypes) && resort.roomTypes.length > 0) {
                  const roomPrices = resort.roomTypes
                      .map(room => room.price)
```

```diff
                  timestamp: new Date().toISOString(),
                  cached: useCache,
-                 dataSource: hasStaticResortStructure(resort) ? 'static' : 'firestore'
+                 dataSource: hasStaticStructure ? 'static' : 'firestore'
              }
          })
```

---

Perfect! The TypeScript errors have been resolved. Let me run a quick check to make sure there are no remaining linter errors:

---

```bash
cd /Users/williamcarrico/Web\ App\ Design/woody-disney-vacation-planning && npx tsc --noEmit --project tsconfig.json src/app/api/resorts/[id]/route.ts
```

```
williamcarrico@CIA woody-disney-vacation-planning % cd /Users/williamcarrico/Web\ App\ Design/woody-disney-v
acation-planning && npx tsc --noEmit --project tsconfig.json src/app/api/resorts/[id]/route.ts          cd /
Users/williamcarrico/Web\ App\ Design/woody-disney-vacation-planning && npx tsc --noEmit --project tsconfig.
json src/app/api/resorts/[id]/route.ts
zsh: no matches found: src/app/api/resorts/[id]/route.ts
williamcarrico@CIA woody-disney-vacation-planning %
```

---

Let me try a different approach to check the TypeScript compilation:

---

```bash
npx tsc --noEmit --project tsconfig.json
```

```
williamcarrico@CIA woody-disney-vacation-planning % npx tsc --noEmit --project tsconfig.json
```

---


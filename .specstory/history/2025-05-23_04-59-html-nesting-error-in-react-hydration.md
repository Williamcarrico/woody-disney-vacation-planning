<!-- Generated by SpecStory -->

# HTML Nesting Error in React Hydration (2025-05-22 23:59:54)

_**User**_

Error: In HTML, <div> cannot be a descendant of <p>.
This will cause a hydration error.

  ...
    <ClientPageRoot Component={function AnnualPassesPage} searchParams={{}} params={{}}>
      <AnnualPassesPage params={Promise} searchParams={Promise}>
        <div className="relative m...">
          <div className="container ...">
            <BlurFade delay={0.1} inView={true}>
              <AnimatePresence>
                <PresenceChild isPresent={true} initial={undefined} custom={undefined} presenceAffectsLayout={true} ...>
                  <motion.div ref={{current:null}} initial="hidden" animate="hidden" exit="hidden" variants={{...}} ...>
                    <div className={undefined} style={{opacity:0, ...}} ref={function useMotionRef.useCallback}>
                      <div className="text-cente...">
                        <h1>
                        <div className="text-xl te...">
>                         <p>
                            <WordRotate words={[...]} className="text-prima...">
>                             <div className="overflow-hidden py-2">
                          ...
            ...
    ...

    at createConsoleError (http://localhost:3004/_next/static/chunks/node_modules_next_dist_client_8f19e6fb._.js:882:71)
    at handleConsoleError (http://localhost:3004/_next/static/chunks/node_modules_next_dist_client_8f19e6fb._.js:1058:54)
    at console.error (http://localhost:3004/_next/static/chunks/node_modules_next_dist_client_8f19e6fb._.js:1223:57)
    at validateDOMNesting (http://localhost:3004/_next/static/chunks/node_modules_next_dist_compiled_2ce9398a._.js:4095:372)
    at beginWork (http://localhost:3004/_next/static/chunks/node_modules_next_dist_compiled_2ce9398a._.js:8209:104)
    at runWithFiberInDEV (http://localhost:3004/_next/static/chunks/node_modules_next_dist_compiled_2ce9398a._.js:3073:74)
    at performUnitOfWork (http://localhost:3004/_next/static/chunks/node_modules_next_dist_compiled_2ce9398a._.js:10243:97)
    at workLoopConcurrentByScheduler (http://localhost:3004/_next/static/chunks/node_modules_next_dist_compiled_2ce9398a._.js:10239:58)
    at renderRootConcurrent (http://localhost:3004/_next/static/chunks/node_modules_next_dist_compiled_2ce9398a._.js:10221:71)
    at performWorkOnRoot (http://localhost:3004/_next/static/chunks/node_modules_next_dist_compiled_2ce9398a._.js:9853:176)
    at performWorkOnRootViaSchedulerTask (http://localhost:3004/_next/static/chunks/node_modules_next_dist_compiled_2ce9398a._.js:10826:9)
    at MessagePort.performWorkUntilDeadline (http://localhost:3004/_next/static/chunks/node_modules_next_dist_compiled_2ce9398a._.js:1982:64)
    at div (<anonymous>)
    at WordRotate (http://localhost:3004/_next/static/chunks/src_9673797f._.js:1006:214)
    at AnnualPassesPage (http://localhost:3004/_next/static/chunks/src_9673797f._.js:2347:251)
    at ClientPageRoot (http://localhost:3004/_next/static/chunks/node_modules_next_dist_1a6ee436._.js:2061:50)

Error: <p> cannot contain a nested <div>.
See this log for the ancestor stack trace.
    at createConsoleError (http://localhost:3004/_next/static/chunks/node_modules_next_dist_client_8f19e6fb._.js:882:71)
    at handleConsoleError (http://localhost:3004/_next/static/chunks/node_modules_next_dist_client_8f19e6fb._.js:1058:54)
    at console.error (http://localhost:3004/_next/static/chunks/node_modules_next_dist_client_8f19e6fb._.js:1223:57)
    at http://localhost:3004/_next/static/chunks/node_modules_next_dist_compiled_2ce9398a._.js:4097:21
    at runWithFiberInDEV (http://localhost:3004/_next/static/chunks/node_modules_next_dist_compiled_2ce9398a._.js:3073:74)
    at validateDOMNesting (http://localhost:3004/_next/static/chunks/node_modules_next_dist_compiled_2ce9398a._.js:4096:178)
    at beginWork (http://localhost:3004/_next/static/chunks/node_modules_next_dist_compiled_2ce9398a._.js:8209:104)
    at runWithFiberInDEV (http://localhost:3004/_next/static/chunks/node_modules_next_dist_compiled_2ce9398a._.js:3073:74)
    at performUnitOfWork (http://localhost:3004/_next/static/chunks/node_modules_next_dist_compiled_2ce9398a._.js:10243:97)
    at workLoopConcurrentByScheduler (http://localhost:3004/_next/static/chunks/node_modules_next_dist_compiled_2ce9398a._.js:10239:58)
    at renderRootConcurrent (http://localhost:3004/_next/static/chunks/node_modules_next_dist_compiled_2ce9398a._.js:10221:71)
    at performWorkOnRoot (http://localhost:3004/_next/static/chunks/node_modules_next_dist_compiled_2ce9398a._.js:9853:176)
    at performWorkOnRootViaSchedulerTask (http://localhost:3004/_next/static/chunks/node_modules_next_dist_compiled_2ce9398a._.js:10826:9)
    at MessagePort.performWorkUntilDeadline (http://localhost:3004/_next/static/chunks/node_modules_next_dist_compiled_2ce9398a._.js:1982:64)
    at p (<anonymous>)
    at AnnualPassesPage (http://localhost:3004/_next/static/chunks/src_9673797f._.js:2344:243)
    at ClientPageRoot (http://localhost:3004/_next/static/chunks/node_modules_next_dist_1a6ee436._.js:2061:50)

Error: In HTML, <h1> cannot be a descendant of <p>.
This will cause a hydration error.

  ...
    <ClientPageRoot Component={function AnnualPassesPage} searchParams={{}} params={{}}>
      <AnnualPassesPage params={Promise} searchParams={Promise}>
        <div className="relative m...">
          <div className="container ...">
            <BlurFade delay={0.1} inView={true}>
              <AnimatePresence>
                <PresenceChild isPresent={true} initial={undefined} custom={undefined} presenceAffectsLayout={true} ...>
                  <motion.div ref={{current:null}} initial="hidden" animate="hidden" exit="hidden" variants={{...}} ...>
                    <div className={undefined} style={{opacity:0, ...}} ref={function useMotionRef.useCallback}>
                      <div className="text-cente...">
                        <h1>
                        <div className="text-xl te...">
>                         <p>
                            ...
                              <motion.h1 className="text-prima..." initial={{opacity:0,y:-50}} animate={{opacity:1,y:0}} ...>
>                               <h1
>                                 className="text-primary font-semibold"
>                                 style={{opacity:0,transform:"translateY..."}}
>                                 ref={function useMotionRef.useCallback}
>                               >
                          ...
            ...
    ...

    at createConsoleError (http://localhost:3004/_next/static/chunks/node_modules_next_dist_client_8f19e6fb._.js:882:71)
    at handleConsoleError (http://localhost:3004/_next/static/chunks/node_modules_next_dist_client_8f19e6fb._.js:1058:54)
    at console.error (http://localhost:3004/_next/static/chunks/node_modules_next_dist_client_8f19e6fb._.js:1223:57)
    at validateDOMNesting (http://localhost:3004/_next/static/chunks/node_modules_next_dist_compiled_2ce9398a._.js:4095:372)
    at completeWork (http://localhost:3004/_next/static/chunks/node_modules_next_dist_compiled_2ce9398a._.js:8368:25)
    at runWithFiberInDEV (http://localhost:3004/_next/static/chunks/node_modules_next_dist_compiled_2ce9398a._.js:3073:74)
    at completeUnitOfWork (http://localhost:3004/_next/static/chunks/node_modules_next_dist_compiled_2ce9398a._.js:10308:23)
    at performUnitOfWork (http://localhost:3004/_next/static/chunks/node_modules_next_dist_compiled_2ce9398a._.js:10245:28)
    at workLoopSync (http://localhost:3004/_next/static/chunks/node_modules_next_dist_compiled_2ce9398a._.js:10135:40)
    at renderRootSync (http://localhost:3004/_next/static/chunks/node_modules_next_dist_compiled_2ce9398a._.js:10118:13)
    at performWorkOnRoot (http://localhost:3004/_next/static/chunks/node_modules_next_dist_compiled_2ce9398a._.js:9877:56)
    at performWorkOnRootViaSchedulerTask (http://localhost:3004/_next/static/chunks/node_modules_next_dist_compiled_2ce9398a._.js:10826:9)
    at MessagePort.performWorkUntilDeadline (http://localhost:3004/_next/static/chunks/node_modules_next_dist_compiled_2ce9398a._.js:1982:64)
    at h1 (<anonymous>)
    at useRender (http://localhost:3004/_next/static/chunks/node_modules_framer-motion_dist_es_e00d4fa8._.js:10939:195)
    at MotionComponent (http://localhost:3004/_next/static/chunks/node_modules_framer-motion_dist_es_e00d4fa8._.js:9882:17)
    at WordRotate (http://localhost:3004/_next/static/chunks/src_9673797f._.js:1010:225)
    at AnnualPassesPage (http://localhost:3004/_next/static/chunks/src_9673797f._.js:2347:251)
    at ClientPageRoot (http://localhost:3004/_next/static/chunks/node_modules_next_dist_1a6ee436._.js:2061:50)

Error: <p> cannot contain a nested <h1>.
See this log for the ancestor stack trace.
    at createConsoleError (http://localhost:3004/_next/static/chunks/node_modules_next_dist_client_8f19e6fb._.js:882:71)
    at handleConsoleError (http://localhost:3004/_next/static/chunks/node_modules_next_dist_client_8f19e6fb._.js:1058:54)
    at console.error (http://localhost:3004/_next/static/chunks/node_modules_next_dist_client_8f19e6fb._.js:1223:57)
    at http://localhost:3004/_next/static/chunks/node_modules_next_dist_compiled_2ce9398a._.js:4097:21
    at runWithFiberInDEV (http://localhost:3004/_next/static/chunks/node_modules_next_dist_compiled_2ce9398a._.js:3073:74)
    at validateDOMNesting (http://localhost:3004/_next/static/chunks/node_modules_next_dist_compiled_2ce9398a._.js:4096:178)
    at completeWork (http://localhost:3004/_next/static/chunks/node_modules_next_dist_compiled_2ce9398a._.js:8368:25)
    at runWithFiberInDEV (http://localhost:3004/_next/static/chunks/node_modules_next_dist_compiled_2ce9398a._.js:3073:74)
    at completeUnitOfWork (http://localhost:3004/_next/static/chunks/node_modules_next_dist_compiled_2ce9398a._.js:10308:23)
    at performUnitOfWork (http://localhost:3004/_next/static/chunks/node_modules_next_dist_compiled_2ce9398a._.js:10245:28)
    at workLoopSync (http://localhost:3004/_next/static/chunks/node_modules_next_dist_compiled_2ce9398a._.js:10135:40)
    at renderRootSync (http://localhost:3004/_next/static/chunks/node_modules_next_dist_compiled_2ce9398a._.js:10118:13)
    at performWorkOnRoot (http://localhost:3004/_next/static/chunks/node_modules_next_dist_compiled_2ce9398a._.js:9877:56)
    at performWorkOnRootViaSchedulerTask (http://localhost:3004/_next/static/chunks/node_modules_next_dist_compiled_2ce9398a._.js:10826:9)
    at MessagePort.performWorkUntilDeadline (http://localhost:3004/_next/static/chunks/node_modules_next_dist_compiled_2ce9398a._.js:1982:64)
    at p (<anonymous>)
    at AnnualPassesPage (http://localhost:3004/_next/static/chunks/src_9673797f._.js:2344:243)
    at ClientPageRoot (http://localhost:3004/_next/static/chunks/node_modules_next_dist_1a6ee436._.js:2061:50)

Error: Hydration failed because the server rendered HTML didn't match the client. As a result this tree will be regenerated on the client. This can happen if a SSR-ed Client Component used:

- A server/client branch `if (typeof window !== 'undefined')`.
- Variable input such as `Date.now()` or `Math.random()` which changes each time it's called.
- Date formatting in a user's locale which doesn't match the server.
- External changing data without sending a snapshot of it along with the HTML.
- Invalid HTML tag nesting.

It can also happen if the client has a browser extension installed which messes with the HTML before React loaded.

https://react.dev/link/hydration-mismatch
    at throwOnHydrationMismatch (http://localhost:3004/_next/static/chunks/node_modules_next_dist_compiled_2ce9398a._.js:5037:56)
    at beginWork (http://localhost:3004/_next/static/chunks/node_modules_next_dist_compiled_2ce9398a._.js:8209:918)
    at runWithFiberInDEV (http://localhost:3004/_next/static/chunks/node_modules_next_dist_compiled_2ce9398a._.js:3073:74)
    at performUnitOfWork (http://localhost:3004/_next/static/chunks/node_modules_next_dist_compiled_2ce9398a._.js:10243:97)
    at workLoopConcurrentByScheduler (http://localhost:3004/_next/static/chunks/node_modules_next_dist_compiled_2ce9398a._.js:10239:58)
    at renderRootConcurrent (http://localhost:3004/_next/static/chunks/node_modules_next_dist_compiled_2ce9398a._.js:10221:71)
    at performWorkOnRoot (http://localhost:3004/_next/static/chunks/node_modules_next_dist_compiled_2ce9398a._.js:9853:176)
    at performWorkOnRootViaSchedulerTask (http://localhost:3004/_next/static/chunks/node_modules_next_dist_compiled_2ce9398a._.js:10826:9)
    at MessagePort.performWorkUntilDeadline (http://localhost:3004/_next/static/chunks/node_modules_next_dist_compiled_2ce9398a._.js:1982:64)
    at div (<anonymous>)
    at WordRotate (http://localhost:3004/_next/static/chunks/src_9673797f._.js:1006:214)
    at AnnualPassesPage (http://localhost:3004/_next/static/chunks/src_9673797f._.js:2347:251)
    at ClientPageRoot (http://localhost:3004/_next/static/chunks/node_modules_next_dist_1a6ee436._.js:2061:50)

---

_**Assistant**_



---

Looking at the error, you have an HTML nesting issue where the `WordRotate` component is rendering block-level elements (`<div>` and `<h1>`) inside a `<p>` tag, which is invalid HTML and causes hydration mismatches.

The issue is in this section of your code:

---

Read file: src/app/annual-passes/page.tsx

---

I can see the issue! The problem is on lines 263-266 where you have the `WordRotate` component inside a `<p>` tag. The `WordRotate` component is likely rendering block-level elements like `<div>` or `<h1>`, which cannot be nested inside `<p>` tags.

Let me fix this by changing the paragraph tags to div elements:

---

```diff
                          </h1>
                          <div className="text-xl text-muted-foreground max-w-3xl mx-auto">
-                             <p>Unlock a year of <WordRotate words={words} className="text-primary font-semibold" /></p>
-                             <p className="mt-2">Annual Passes allow you to enjoy the magic all year long. Discover all the possibilities
-                                 a Walt Disney World Annual Pass can bring to your vacation planning.</p>
+                             <div>Unlock a year of <WordRotate words={words} className="text-primary font-semibold" /></div>
+                             <div className="mt-2">Annual Passes allow you to enjoy the magic all year long. Discover all the possibilities
+                                 a Walt Disney World Annual Pass can bring to your vacation planning.</div>
                          </div>
                      </div>
```

---

Perfect! I've fixed the HTML nesting issue by changing the `<p>` tags to `<div>` tags. This resolves the hydration error because:

1. **HTML Compliance**: Block-level elements like `<div>` and `<h1>` (which the `WordRotate` component likely renders) cannot be nested inside `<p>` elements according to HTML specifications.

2. **Hydration Fix**: The server and client will now render the same HTML structure, eliminating the hydration mismatch.

3. **Semantics Preserved**: The content still flows naturally and the styling remains the same, as divs with the appropriate CSS classes will render identically to the previous paragraph layout.

The changes I made:
- Line 263: Changed `<p>` to `<div>`
- Lines 264-265: Changed the second `<p className="mt-2">` to `<div className="mt-2">`
- Line 266: Changed the closing `</p>` to `</div>`

This should resolve all the hydration errors you were experiencing. The page will now render consistently on both server and client without any HTML nesting violations.

---


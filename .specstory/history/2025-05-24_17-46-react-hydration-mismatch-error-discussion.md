<!-- Generated by SpecStory -->

# React Hydration Mismatch Error Discussion (2025-05-24 12:46:08)

_**User**_

Error: A tree hydrated but some attributes of the server rendered HTML didn't match the client properties. This won't be patched up. This can happen if a SSR-ed Client Component used:

- A server/client branch `if (typeof window !== 'undefined')`.
- Variable input such as `Date.now()` or `Math.random()` which changes each time it's called.
- Date formatting in a user's locale which doesn't match the server.
- External changing data without sending a snapshot of it along with the HTML.
- Invalid HTML tag nesting.

It can also happen if the client has a browser extension installed which messes with the HTML before React loaded.

https://react.dev/link/hydration-mismatch

  ...
    <motion.div ref={{current:null}} className="opacity-0 ...">
      <div className="opacity-0 ..." style={{}} ref={function useMotionRef.useCallback}>
        <motion.button>
        <motion.section className="hero-secti..." style={{opacity:{...}}}>
          <section className="hero-secti..." style={{opacity:1}} ref={function useMotionRef.useCallback}>
            <div className="jsx-428616...">
              <motion.div>
              <AnimatedGridPattern>
              <div className="jsx-428616...">
                <WarpBackground>
                  <div className="relative r...">
                    <div style={{...}} className="pointer-ev...">
                      <div className="absolute z...">
                        <Beam width="5%" x="0%" delay={2.0616249720636675} duration={3}>
                          <motion.div style={{--x:"0%", ...}} className="absolute l..." initial={{y:"100cqmax", ...}} ...>
                            <div
                              className="absolute left-[var(--x)] top-0 [aspect-ratio:1/var(--aspect-ratio)] [backgrou..."
                              style={{
+                               --x: "0%"
-                               --x: "0%"
+                               --width: "5%"
-                               --width: "5%"
+                               --aspect-ratio: "5"
-                               --aspect-ratio: "8"
+                               --background: "linear-gradient(hsl(7 80% 60%), transparent)"
-                               --background: "linear-gradient(hsl(339 80% 60%), transparent)"
+                               transform: "translateX(-50%) translateY(100cqmax)"
-                               transform: "translateX(-50%) translateY(100cqmax)"
                              }}
                              ref={function useMotionRef.useCallback}
                            >
                        <Beam width="5%" x="30%" delay={1.0982547405439331} duration={3}>
                          <motion.div style={{--x:"30%", ...}} className="absolute l..." initial={{y:"100cqmax", ...}} ...>
                            <div
                              className="absolute left-[var(--x)] top-0 [aspect-ratio:1/var(--aspect-ratio)] [backgrou..."
                              style={{
+                               --x: "30%"
-                               --x: "30%"
+                               --width: "5%"
-                               --width: "5%"
+                               --aspect-ratio: "3"
-                               --aspect-ratio: "2"
+                               --background: "linear-gradient(hsl(229 80% 60%), transparent)"
-                               --background: "linear-gradient(hsl(31 80% 60%), transparent)"
+                               transform: "translateX(-50%) translateY(100cqmax)"
-                               transform: "translateX(-50%) translateY(100cqmax)"
                              }}
                              ref={function useMotionRef.useCallback}
                            >
                        <Beam width="5%" x="65%" delay={0.4386212256010804} duration={3}>
                          <motion.div style={{--x:"65%", ...}} className="absolute l..." initial={{y:"100cqmax", ...}} ...>
                            <div
                              className="absolute left-[var(--x)] top-0 [aspect-ratio:1/var(--aspect-ratio)] [backgrou..."
                              style={{
+                               --x: "65%"
-                               --x: "65%"
+                               --width: "5%"
-                               --width: "5%"
+                               --aspect-ratio: "6"
-                               --aspect-ratio: "3"
+                               --background: "linear-gradient(hsl(103 80% 60%), transparent)"
-                               --background: "linear-gradient(hsl(57 80% 60%), transparent)"
+                               transform: "translateX(-50%) translateY(100cqmax)"
-                               transform: "translateX(-50%) translateY(100cqmax)"
                              }}
                              ref={function useMotionRef.useCallback}
                            >
                      <div className="absolute t...">
                        <Beam width="5%" x="0%" delay={0.6504749828312404} duration={3}>
                          <motion.div style={{--x:"0%", ...}} className="absolute l..." initial={{y:"100cqmax", ...}} ...>
                            <div
                              className="absolute left-[var(--x)] top-0 [aspect-ratio:1/var(--aspect-ratio)] [backgrou..."
                              style={{
+                               --x: "0%"
-                               --x: "0%"
+                               --width: "5%"
-                               --width: "5%"
+                               --aspect-ratio: "6"
-                               --aspect-ratio: "9"
+                               --background: "linear-gradient(hsl(243 80% 60%), transparent)"
-                               --background: "linear-gradient(hsl(226 80% 60%), transparent)"
+                               transform: "translateX(-50%) translateY(100cqmax)"
-                               transform: "translateX(-50%) translateY(100cqmax)"
                              }}
                              ref={function useMotionRef.useCallback}
                            >
                        <Beam width="5%" x="30%" delay={1.2274881570187675} duration={3}>
                          <motion.div style={{--x:"30%", ...}} className="absolute l..." initial={{y:"100cqmax", ...}} ...>
                            <div
                              className="absolute left-[var(--x)] top-0 [aspect-ratio:1/var(--aspect-ratio)] [backgrou..."
                              style={{
+                               --x: "30%"
-                               --x: "30%"
+                               --width: "5%"
-                               --width: "5%"
+                               --aspect-ratio: "9"
-                               --aspect-ratio: "10"
+                               --background: "linear-gradient(hsl(150 80% 60%), transparent)"
-                               --background: "linear-gradient(hsl(82 80% 60%), transparent)"
+                               transform: "translateX(-50%) translateY(100cqmax)"
-                               transform: "translateX(-50%) translateY(100cqmax)"
                              }}
                              ref={function useMotionRef.useCallback}
                            >
                        <Beam width="5%" x="65%" delay={2.4428739165295648} duration={3}>
                          <motion.div style={{--x:"65%", ...}} className="absolute l..." initial={{y:"100cqmax", ...}} ...>
                            <div
                              className="absolute left-[var(--x)] top-0 [aspect-ratio:1/var(--aspect-ratio)] [backgrou..."
                              style={{
+                               --x: "65%"
-                               --x: "65%"
+                               --width: "5%"
-                               --width: "5%"
+                               --aspect-ratio: "1"
-                               --aspect-ratio: "6"
+                               --background: "linear-gradient(hsl(318 80% 60%), transparent)"
-                               --background: "linear-gradient(hsl(178 80% 60%), transparent)"
+                               transform: "translateX(-50%) translateY(100cqmax)"
-                               transform: "translateX(-50%) translateY(100cqmax)"
                              }}
                              ref={function useMotionRef.useCallback}
                            >
                      <div className="absolute l...">
                        <Beam width="5%" x="0%" delay={1.5009905906127625} duration={3}>
                          <motion.div style={{--x:"0%", ...}} className="absolute l..." initial={{y:"100cqmax", ...}} ...>
                            <div
                              className="absolute left-[var(--x)] top-0 [aspect-ratio:1/var(--aspect-ratio)] [backgrou..."
                              style={{
+                               --x: "0%"
-                               --x: "0%"
+                               --width: "5%"
-                               --width: "5%"
+                               --aspect-ratio: "10"
-                               --aspect-ratio: "10"
+                               --background: "linear-gradient(hsl(208 80% 60%), transparent)"
-                               --background: "linear-gradient(hsl(352 80% 60%), transparent)"
+                               transform: "translateX(-50%) translateY(100cqmax)"
-                               transform: "translateX(-50%) translateY(100cqmax)"
                              }}
                              ref={function useMotionRef.useCallback}
                            >
                        <Beam width="5%" x="30%" delay={1.670723756647076} duration={3}>
                          <motion.div style={{--x:"30%", ...}} className="absolute l..." initial={{y:"100cqmax", ...}} ...>
                            <div
                              className="absolute left-[var(--x)] top-0 [aspect-ratio:1/var(--aspect-ratio)] [backgrou..."
                              style={{
+                               --x: "30%"
-                               --x: "30%"
+                               --width: "5%"
-                               --width: "5%"
+                               --aspect-ratio: "9"
-                               --aspect-ratio: "2"
+                               --background: "linear-gradient(hsl(70 80% 60%), transparent)"
-                               --background: "linear-gradient(hsl(168 80% 60%), transparent)"
+                               transform: "translateX(-50%) translateY(100cqmax)"
-                               transform: "translateX(-50%) translateY(100cqmax)"
                              }}
                              ref={function useMotionRef.useCallback}
                            >
                        <Beam width="5%" x="65%" delay={1.9797573030755355} duration={3}>
                          <motion.div style={{--x:"65%", ...}} className="absolute l..." initial={{y:"100cqmax", ...}} ...>
                            <div
                              className="absolute left-[var(--x)] top-0 [aspect-ratio:1/var(--aspect-ratio)] [backgrou..."
                              style={{
+                               --x: "65%"
-                               --x: "65%"
+                               --width: "5%"
-                               --width: "5%"
+                               --aspect-ratio: "5"
-                               --aspect-ratio: "8"
+                               --background: "linear-gradient(hsl(151 80% 60%), transparent)"
-                               --background: "linear-gradient(hsl(174 80% 60%), transparent)"
+                               transform: "translateX(-50%) translateY(100cqmax)"
-                               transform: "translateX(-50%) translateY(100cqmax)"
                              }}
                              ref={function useMotionRef.useCallback}
                            >
                      <div className="absolute r...">
                        <Beam width="5%" x="0%" delay={2.4246519826256088} duration={3}>
                          <motion.div style={{--x:"0%", ...}} className="absolute l..." initial={{y:"100cqmax", ...}} ...>
                            <div
                              className="absolute left-[var(--x)] top-0 [aspect-ratio:1/var(--aspect-ratio)] [backgrou..."
                              style={{
+                               --x: "0%"
-                               --x: "0%"
+                               --width: "5%"
-                               --width: "5%"
+                               --aspect-ratio: "8"
-                               --aspect-ratio: "8"
+                               --background: "linear-gradient(hsl(165 80% 60%), transparent)"
-                               --background: "linear-gradient(hsl(88 80% 60%), transparent)"
+                               transform: "translateX(-50%) translateY(100cqmax)"
-                               transform: "translateX(-50%) translateY(100cqmax)"
                              }}
                              ref={function useMotionRef.useCallback}
                            >
                        <Beam width="5%" x="30%" delay={1.2023841629917809} duration={3}>
                          <motion.div style={{--x:"30%", ...}} className="absolute l..." initial={{y:"100cqmax", ...}} ...>
                            <div
                              className="absolute left-[var(--x)] top-0 [aspect-ratio:1/var(--aspect-ratio)] [backgrou..."
                              style={{
+                               --x: "30%"
-                               --x: "30%"
+                               --width: "5%"
-                               --width: "5%"
+                               --aspect-ratio: "2"
-                               --aspect-ratio: "2"
+                               --background: "linear-gradient(hsl(311 80% 60%), transparent)"
-                               --background: "linear-gradient(hsl(338 80% 60%), transparent)"
+                               transform: "translateX(-50%) translateY(100cqmax)"
-                               transform: "translateX(-50%) translateY(100cqmax)"
                              }}
                              ref={function useMotionRef.useCallback}
                            >
                        <Beam width="5%" x="65%" delay={2.489663416601571} duration={3}>
                          <motion.div style={{--x:"65%", ...}} className="absolute l..." initial={{y:"100cqmax", ...}} ...>
                            <div
                              className="absolute left-[var(--x)] top-0 [aspect-ratio:1/var(--aspect-ratio)] [backgrou..."
                              style={{
+                               --x: "65%"
-                               --x: "65%"
+                               --width: "5%"
-                               --width: "5%"
+                               --aspect-ratio: "6"
-                               --aspect-ratio: "10"
+                               --background: "linear-gradient(hsl(213 80% 60%), transparent)"
-                               --background: "linear-gradient(hsl(79 80% 60%), transparent)"
+                               transform: "translateX(-50%) translateY(100cqmax)"
-                               transform: "translateX(-50%) translateY(100cqmax)"
                              }}
                              ref={function useMotionRef.useCallback}
                            >
                    ...
            ...
        ...

    at createConsoleError (http://localhost:3000/_next/static/chunks/node_modules_next_dist_client_8f19e6fb._.js:882:71)
    at handleConsoleError (http://localhost:3000/_next/static/chunks/node_modules_next_dist_client_8f19e6fb._.js:1058:54)
    at console.error (http://localhost:3000/_next/static/chunks/node_modules_next_dist_client_8f19e6fb._.js:1223:57)
    at http://localhost:3000/_next/static/chunks/node_modules_next_dist_compiled_2ce9398a._.js:5153:25
    at runWithFiberInDEV (http://localhost:3000/_next/static/chunks/node_modules_next_dist_compiled_2ce9398a._.js:3073:74)
    at emitPendingHydrationWarnings (http://localhost:3000/_next/static/chunks/node_modules_next_dist_compiled_2ce9398a._.js:5152:13)
    at completeWork (http://localhost:3000/_next/static/chunks/node_modules_next_dist_compiled_2ce9398a._.js:8331:102)
    at runWithFiberInDEV (http://localhost:3000/_next/static/chunks/node_modules_next_dist_compiled_2ce9398a._.js:3073:131)
    at completeUnitOfWork (http://localhost:3000/_next/static/chunks/node_modules_next_dist_compiled_2ce9398a._.js:10308:23)
    at performUnitOfWork (http://localhost:3000/_next/static/chunks/node_modules_next_dist_compiled_2ce9398a._.js:10245:28)
    at workLoopConcurrentByScheduler (http://localhost:3000/_next/static/chunks/node_modules_next_dist_compiled_2ce9398a._.js:10239:58)
    at renderRootConcurrent (http://localhost:3000/_next/static/chunks/node_modules_next_dist_compiled_2ce9398a._.js:10221:71)
    at performWorkOnRoot (http://localhost:3000/_next/static/chunks/node_modules_next_dist_compiled_2ce9398a._.js:9853:176)
    at performWorkOnRootViaSchedulerTask (http://localhost:3000/_next/static/chunks/node_modules_next_dist_compiled_2ce9398a._.js:10826:9)
    at MessagePort.performWorkUntilDeadline (http://localhost:3000/_next/static/chunks/node_modules_next_dist_compiled_2ce9398a._.js:1982:64)
    at div (<anonymous>)
    at useRender (http://localhost:3000/_next/static/chunks/node_modules_motion_dist_es_1d6a6e79._.js:11137:195)
    at MotionComponent (http://localhost:3000/_next/static/chunks/node_modules_motion_dist_es_1d6a6e79._.js:10338:17)
    at Beam (http://localhost:3000/_next/static/chunks/%5Broot-of-the-server%5D__b69e5f47._.js:2682:214)
    at http://localhost:3000/_next/static/chunks/%5Broot-of-the-server%5D__b69e5f47._.js:2768:265
    at Array.map (<anonymous>)
    at WarpBackground (http://localhost:3000/_next/static/chunks/%5Broot-of-the-server%5D__b69e5f47._.js:2768:44)
    at Home (http://localhost:3000/_next/static/chunks/%5Broot-of-the-server%5D__b69e5f47._.js:4376:245)
    at ClientPageRoot (http://localhost:3000/_next/static/chunks/node_modules_next_dist_1a6ee436._.js:2061:50)

---

_**Assistant**_



---

I can see you're experiencing a hydration mismatch error in your Next.js application. The error is specifically happening in the `WarpBackground` component with `Beam` elements that have different values for CSS custom properties (`--aspect-ratio`, `--background`) between server and client rendering.

Let me search for these components to understand the root cause:

---

<details>
            <summary>Searched codebase "WarpBackground component" • **25** results</summary>
        
| File | Lines |
|------|-------|
| `src/components/magicui/warp-background.tsx` | L84-112 |
| `src/components/magicui/warp-background.tsx` | L112-136 |
| `src/components/magicui/warp-background.tsx` | L136-152 |
| `src/components/magicui/warp-background.tsx` | L53-84 |
| `src/components/magicui/warp-background.tsx` | L1-16 |
| `src/components/magicui/warp-background.tsx` | L16-53 |
| `src/components/ui/particle-background.tsx` | L10-19 |
| `src/app/globals.css` | L682-779 |
| `src/app/tips-tricks/page.tsx` | L1234-1249 |
| `src/app/globals.css` | L616-682 |
| `src/app/page.tsx` | L1076-1125 |
| `src/app/page.tsx` | L1125-1164 |
| `src/app/about/page.tsx` | L113-139 |
| `src/components/three/DisneyWorld3D.tsx` | L799-828 |
| `src/app/about/page.tsx` | L22-48 |
| `src/components/ui/particle-background.tsx` | L1-10 |
| `src/components/three/DisneyWorld3D.tsx` | L728-771 |
| `src/app/globals.css` | L54-132 |
| `src/app/about/page.tsx` | L167-186 |
| `src/app/contact/page.tsx` | L225-241 |
| `src/components/magicui/border-beam.tsx` | L47-94 |
| `src/app/globals.css` | L779-828 |
| `src/app/annual-passes/page.tsx` | L149-185 |
| `src/components/shared/FuturisticNavbar.tsx` | L812-843 |
| `src/components/theme-provider/theme-utils.ts` | L267-284 |

</details>

---

Perfect! I found the issue. The problem is in the `WarpBackground` component, specifically in the `Beam` component. Let's look at the problematic lines:

---

Read file: src/components/magicui/warp-background.tsx

---

Now I can clearly see the issue! The problem is in the `Beam` component on lines 28-29:

```typescript
const hue = Math.floor(Math.random() * 360);
const ar = Math.floor(Math.random() * 10) + 1;
```

These lines use `Math.random()` which generates different values on the server vs client, causing the hydration mismatch. Also, the `generateBeams` function on line 65 also uses `Math.random()` for delays.

The fix is to use a seeded random number generator or make the component purely client-side by preventing server-side rendering. Let me implement the fix:

---

```diff
  import { cn } from "@/lib/utils";
  import { motion } from "motion/react";
- import React, { HTMLAttributes, useCallback, useMemo } from "react";
+ import React, { HTMLAttributes, useCallback, useMemo, useState, useEffect } from "react";
  
  interface WarpBackgroundProps extends HTMLAttributes<HTMLDivElement> {
```

```diff
    gridColor?: string;
  }
+ 
+ interface BeamProps {
+   width: string | number;
+   x: string | number;
+   delay: number;
+   duration: number;
+   hue: number;
+   aspectRatio: number;
+ }
  
  const Beam = ({
```

```diff
    delay,
    duration,
- }: {
-   width: string | number;
-   x: string | number;
-   delay: number;
-   duration: number;
- }) => {
-   const hue = Math.floor(Math.random() * 360);
-   const ar = Math.floor(Math.random() * 10) + 1;
- 
+   hue,
+   aspectRatio,
+ }: BeamProps) => {
    return (
      <motion.div
```

```diff
            "--x": `${x}`,
            "--width": `${width}`,
-           "--aspect-ratio": `${ar}`,
+           "--aspect-ratio": `${aspectRatio}`,
            "--background": `linear-gradient(hsl(${hue} 80% 60%), transparent)`,
          } as React.CSSProperties
```

```diff
    ...props
  }) => {
+   const [isClient, setIsClient] = useState(false);
+   const [beamData, setBeamData] = useState<{
+     topBeams: Array<{ x: number; delay: number; hue: number; aspectRatio: number }>;
+     rightBeams: Array<{ x: number; delay: number; hue: number; aspectRatio: number }>;
+     bottomBeams: Array<{ x: number; delay: number; hue: number; aspectRatio: number }>;
+     leftBeams: Array<{ x: number; delay: number; hue: number; aspectRatio: number }>;
+   }>({
+     topBeams: [],
+     rightBeams: [],
+     bottomBeams: [],
+     leftBeams: [],
+   });
+ 
    const generateBeams = useCallback(() => {
      const beams = [];
```

```diff
      for (let i = 0; i < beamsPerSide; i++) {
        const x = Math.floor(i * step);
-       const delay =
-         Math.random() * (beamDelayMax - beamDelayMin) + beamDelayMin;
-       beams.push({ x, delay });
+       const delay = Math.random() * (beamDelayMax - beamDelayMin) + beamDelayMin;
+       const hue = Math.floor(Math.random() * 360);
+       const aspectRatio = Math.floor(Math.random() * 10) + 1;
+       beams.push({ x, delay, hue, aspectRatio });
      }
      return beams;
    }, [beamsPerSide, beamSize, beamDelayMax, beamDelayMin]);
  
-   const topBeams = useMemo(() => generateBeams(), [generateBeams]);
-   const rightBeams = useMemo(() => generateBeams(), [generateBeams]);
-   const bottomBeams = useMemo(() => generateBeams(), [generateBeams]);
-   const leftBeams = useMemo(() => generateBeams(), [generateBeams]);
+   useEffect(() => {
+     setIsClient(true);
+     setBeamData({
+       topBeams: generateBeams(),
+       rightBeams: generateBeams(),
+       bottomBeams: generateBeams(),
+       leftBeams: generateBeams(),
+     });
+   }, [generateBeams]);
+ 
+   // Don't render beams on server to prevent hydration mismatch
+   if (!isClient) {
+     return (
+       <div className={cn("relative rounded border p-20", className)} {...props}>
+         <div
+           style={
+             {
+               "--perspective": `${perspective}px`,
+               "--grid-color": gridColor,
+               "--beam-size": `${beamSize}%`,
+             } as React.CSSProperties
+           }
+           className={
+             "pointer-events-none absolute left-0 top-0 size-full overflow-hidden [clipPath:inset(0)] [container-type:size] [perspective:var(--perspective)] [transform-style:preserve-3d]"
+           }
+         >
+           {/* Render grid background without beams on server */}
+           <div className="absolute z-20 [transform-style:preserve-3d] [background-size:var(--beam-size)_var(--beam-size)] [background:linear-gradient(var(--grid-color)_0_1px,_transparent_1px_var(--beam-size))_50%_-0.5px_/var(--beam-size)_var(--beam-size),linear-gradient(90deg,_var(--grid-color)_0_1px,_transparent_1px_var(--beam-size))_50%_50%_/var(--beam-size)_var(--beam-size)] [container-type:inline-size] [height:100cqmax] [transform-origin:50%_0%] [transform:rotateX(-90deg)] [width:100cqi]" />
+           <div className="absolute top-full [transform-style:preserve-3d] [background-size:var(--beam-size)_var(--beam-size)] [background:linear-gradient(var(--grid-color)_0_1px,_transparent_1px_var(--beam-size))_50%_-0.5px_/var(--beam-size)_var(--beam-size),linear-gradient(90deg,_var(--grid-color)_0_1px,_transparent_1px_var(--beam-size))_50%_50%_/var(--beam-size)_var(--beam-size)] [container-type:inline-size] [height:100cqmax] [transform-origin:50%_0%] [transform:rotateX(-90deg)] [width:100cqi]" />
+           <div className="absolute left-0 top-0 [transform-style:preserve-3d] [background-size:var(--beam-size)_var(--beam-size)] [background:linear-gradient(var(--grid-color)_0_1px,_transparent_1px_var(--beam-size))_50%_-0.5px_/var(--beam-size)_var(--beam-size),linear-gradient(90deg,_var(--grid-color)_0_1px,_transparent_1px_var(--beam-size))_50%_50%_/var(--beam-size)_var(--beam-size)] [container-type:inline-size] [height:100cqmax] [transform-origin:0%_0%] [transform:rotate(90deg)_rotateX(-90deg)] [width:100cqh]" />
+           <div className="absolute right-0 top-0 [transform-style:preserve-3d] [background-size:var(--beam-size)_var(--beam-size)] [background:linear-gradient(var(--grid-color)_0_1px,_transparent_1px_var(--beam-size))_50%_-0.5px_/var(--beam-size)_var(--beam-size),linear-gradient(90deg,_var(--grid-color)_0_1px,_transparent_1px_var(--beam-size))_50%_50%_/var(--beam-size)_var(--beam-size)] [container-type:inline-size] [height:100cqmax] [width:100cqh] [transform-origin:100%_0%] [transform:rotate(-90deg)_rotateX(-90deg)]" />
+         </div>
+         <div className="relative">{children}</div>
+       </div>
+     );
+   }
  
    return (
```

```diff
          {/* top side */}
          <div className="absolute z-20 [transform-style:preserve-3d] [background-size:var(--beam-size)_var(--beam-size)] [background:linear-gradient(var(--grid-color)_0_1px,_transparent_1px_var(--beam-size))_50%_-0.5px_/var(--beam-size)_var(--beam-size),linear-gradient(90deg,_var(--grid-color)_0_1px,_transparent_1px_var(--beam-size))_50%_50%_/var(--beam-size)_var(--beam-size)] [container-type:inline-size] [height:100cqmax] [transform-origin:50%_0%] [transform:rotateX(-90deg)] [width:100cqi]">
-           {topBeams.map((beam, index) => (
+           {beamData.topBeams.map((beam, index) => (
              <Beam
                key={`top-${index}`}
```

```diff
                delay={beam.delay}
                duration={beamDuration}
+               hue={beam.hue}
+               aspectRatio={beam.aspectRatio}
              />
            ))}
          </div>
          {/* bottom side */}
          <div className="absolute top-full [transform-style:preserve-3d] [background-size:var(--beam-size)_var(--beam-size)] [background:linear-gradient(var(--grid-color)_0_1px,_transparent_1px_var(--beam-size))_50%_-0.5px_/var(--beam-size)_var(--beam-size),linear-gradient(90deg,_var(--grid-color)_0_1px,_transparent_1px_var(--beam-size))_50%_50%_/var(--beam-size)_var(--beam-size)] [container-type:inline-size] [height:100cqmax] [transform-origin:50%_0%] [transform:rotateX(-90deg)] [width:100cqi]">
-           {bottomBeams.map((beam, index) => (
+           {beamData.bottomBeams.map((beam, index) => (
              <Beam
                key={`bottom-${index}`}
```

```diff
                delay={beam.delay}
                duration={beamDuration}
+               hue={beam.hue}
+               aspectRatio={beam.aspectRatio}
              />
            ))}
          </div>
          {/* left side */}
          <div className="absolute left-0 top-0 [transform-style:preserve-3d] [background-size:var(--beam-size)_var(--beam-size)] [background:linear-gradient(var(--grid-color)_0_1px,_transparent_1px_var(--beam-size))_50%_-0.5px_/var(--beam-size)_var(--beam-size),linear-gradient(90deg,_var(--grid-color)_0_1px,_transparent_1px_var(--beam-size))_50%_50%_/var(--beam-size)_var(--beam-size)] [container-type:inline-size] [height:100cqmax] [transform-origin:0%_0%] [transform:rotate(90deg)_rotateX(-90deg)] [width:100cqh]">
-           {leftBeams.map((beam, index) => (
+           {beamData.leftBeams.map((beam, index) => (
              <Beam
                key={`left-${index}`}
```

```diff
                delay={beam.delay}
                duration={beamDuration}
+               hue={beam.hue}
+               aspectRatio={beam.aspectRatio}
              />
            ))}
          </div>
          {/* right side */}
          <div className="absolute right-0 top-0 [transform-style:preserve-3d] [background-size:var(--beam-size)_var(--beam-size)] [background:linear-gradient(var(--grid-color)_0_1px,_transparent_1px_var(--beam-size))_50%_-0.5px_/var(--beam-size)_var(--beam-size),linear-gradient(90deg,_var(--grid-color)_0_1px,_transparent_1px_var(--beam-size))_50%_50%_/var(--beam-size)_var(--beam-size)] [container-type:inline-size] [height:100cqmax] [width:100cqh] [transform-origin:100%_0%] [transform:rotate(-90deg)_rotateX(-90deg)]">
-           {rightBeams.map((beam, index) => (
+           {beamData.rightBeams.map((beam, index) => (
              <Beam
                key={`right-${index}`}
```

```diff
                delay={beam.delay}
                duration={beamDuration}
+               hue={beam.hue}
+               aspectRatio={beam.aspectRatio}
              />
            ))}
```

---

Perfect! I've fixed the hydration mismatch error in the `WarpBackground` component. Here's what I changed:

## Summary of Changes

1. **Moved random value generation to client-side only**: Used `useState` and `useEffect` to ensure all random values (`Math.random()`) are generated only on the client side after hydration.

2. **Added client-side detection**: Implemented an `isClient` state that prevents the animated beams from rendering on the server.

3. **Server-side fallback**: When rendering on the server (`!isClient`), the component only renders the static grid background without the animated beams, preventing hydration mismatches.

4. **Consistent data structure**: Created a proper `BeamProps` interface and moved all random properties (`hue`, `aspectRatio`, `delay`) to be generated in the `useEffect` hook.

5. **Maintained functionality**: Once the component mounts on the client, it generates all the random values and displays the full animated effect.

## How This Fixes the Issue

The hydration mismatch occurred because:
- **Server**: Rendered HTML with one set of random values for colors and aspect ratios
- **Client**: Hydrated with different random values, causing React to detect inconsistencies

Now:
- **Server**: Renders only the static grid background
- **Client**: After hydration, generates random values and displays the animated beams
- **Result**: No mismatch because the server and client render identical static content initially

The fix ensures that the server-rendered HTML matches exactly what the client expects during hydration, while still providing the full animated experience once the component is fully mounted on the client side.

---


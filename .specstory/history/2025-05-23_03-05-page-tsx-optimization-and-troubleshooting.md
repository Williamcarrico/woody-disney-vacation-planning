<!-- Generated by SpecStory -->

# Page.tsx Optimization and Troubleshooting (2025-05-22 22:05:55)

_**User**_

Your task is to continue optimizing this page.tsx file. There are a few issues that need to resolved with sophisticated reasoning and logic. The matching game in the kids section is not lining up with the correct tile selected by the user. The Magical Planning Tool section is blank and no features or tools avaliable. The card elements are poorly sized and offset. The interactive element in the Hero Section needs to be completly redesigned as it is blank and not working as intended. Don't stop until all issues are resolved with comperhensive solutions and accurate code, logic and design elements. 

---

_**Assistant**_



---

I'll analyze and fix each issue in the page.tsx file systematically. Let me start by examining the code and implementing comprehensive solutions.

---

```diff
  import React, { useRef, useState, useEffect, ReactNode, Suspense } from "react";
  import Link from "next/link";
- import { ArrowRight, Heart, Music, Rocket, Crown, Gift, Play, Volume2, VolumeX } from "lucide-react";
+ import { ArrowRight, Heart, Music, Rocket, Crown, Gift, Play, Volume2, VolumeX, Sparkles, Clock, MapPin, Users, Calendar, Star, Wand2 } from "lucide-react";
  import { motion, useScroll, useTransform, useSpring, useInView, AnimatePresence } from "framer-motion";
  import { gsap } from "@/lib/gsap";
```

```diff
  import { NeonGradientCard } from '@/components/magicui/neon-gradient-card';
  import { Marquee } from '@/components/magicui/marquee';
- import { BentoGrid } from '@/components/magicui/bento-grid';
+ import { BentoGrid, BentoGridItem } from '@/components/magicui/bento-grid';
  import { Kalam, Fredoka, Bubblegum_Sans, Pacifico, Grandstander, Comic_Neue, Bungee, Caveat } from 'next/font/google';
  import { BorderBeam } from '@/components/magicui/border-beam';
```

```diff
  import { BlurFade } from '@/components/magicui/blur-fade';
  import { cn } from "@/lib/utils";
- import { Wand2, Star } from "lucide-react";
  
  // Disney-inspired Google fonts
```

```diff
  }
  
- // Interactive Game Component
+ // FIXED: Interactive Game Component with proper logic
  function MagicMemoryGame() {
    const [cards, setCards] = useState<Array<{ id: number, emoji: string, isFlipped: boolean, isMatched: boolean }>>([]);
    const [selectedCards, setSelectedCards] = useState<number[]>([]);
    const [moves, setMoves] = useState(0);
    const [isComplete, setIsComplete] = useState(false);
+   const [isProcessing, setIsProcessing] = useState(false);
  
    useEffect(() => {
-     // Initialize game - move emojis inside useEffect to fix exhaustive-deps warning
+     // Initialize game with properly shuffled cards
      const emojis = ['üè∞', 'üë∏', 'ü¶Ñ', 'üé†', 'üé™', 'üé®'];
-     const gameCards = [...emojis, ...emojis].map((emoji, index) => ({
+     const gameCards = [...emojis, ...emojis]
+       .map((emoji, index) => ({
          id: index,
          emoji,
          isFlipped: false,
          isMatched: false
-     }));
-     // Shuffle cards
-     setCards(gameCards.sort(() => Math.random() - 0.5));
+       }))
+       .sort(() => Math.random() - 0.5); // Proper shuffle
+ 
+     setCards(gameCards);
    }, []);
  
-   const handleCardClick = (id: number) => {
-     if (selectedCards.length === 2) return;
-     if (cards[id].isMatched || cards[id].isFlipped) return;
- 
-     const newCards = [...cards];
-     newCards[id].isFlipped = true;
-     setCards(newCards);
+   const handleCardClick = (cardId: number) => {
+     // Prevent clicks during processing or if game is complete
+     if (isProcessing || isComplete) return;
+ 
+     // Find the actual card
+     const clickedCard = cards[cardId];
+     if (!clickedCard || clickedCard.isMatched || clickedCard.isFlipped) return;
+ 
+     // If two cards are already selected, ignore
+     if (selectedCards.length >= 2) return;
+ 
+     // Flip the card
+     setCards(prevCards =>
+       prevCards.map(card =>
+         card.id === cardId ? { ...card, isFlipped: true } : card
+       )
+     );
  
-     const newSelected = [...selectedCards, id];
-     setSelectedCards(newSelected);
- 
-     if (newSelected.length === 2) {
-       setMoves(moves + 1);
+     const newSelectedCards = [...selectedCards, cardId];
+     setSelectedCards(newSelectedCards);
+ 
+     // If this is the second card
+     if (newSelectedCards.length === 2) {
+       setIsProcessing(true);
+       setMoves(prev => prev + 1);
+ 
+       const [firstCardId, secondCardId] = newSelectedCards;
+       const firstCard = cards.find(c => c.id === firstCardId);
+       const secondCard = cards.find(c => c.id === secondCardId);
  
        setTimeout(() => {
-         if (cards[newSelected[0]].emoji === cards[newSelected[1]].emoji) {
-           // Match found
-           const matchedCards = [...cards];
-           matchedCards[newSelected[0]].isMatched = true;
-           matchedCards[newSelected[1]].isMatched = true;
-           setCards(matchedCards);
+         if (firstCard && secondCard && firstCard.emoji === secondCard.emoji) {
+           // Match found - mark as matched
+           setCards(prevCards =>
+             prevCards.map(card =>
+               card.id === firstCardId || card.id === secondCardId
+                 ? { ...card, isMatched: true }
+                 : card
+             )
+           );
+ 
+           // Check if game is complete
+           const updatedCards = cards.map(card =>
+             card.id === firstCardId || card.id === secondCardId
+               ? { ...card, isMatched: true }
+               : card
+           );
  
-           if (matchedCards.every(card => card.isMatched)) {
+           if (updatedCards.every(card => card.isMatched)) {
              setIsComplete(true);
            }
          } else {
-           // No match
-           const resetCards = [...cards];
-           resetCards[newSelected[0]].isFlipped = false;
-           resetCards[newSelected[1]].isFlipped = false;
-           setCards(resetCards);
+           // No match - flip cards back
+           setCards(prevCards =>
+             prevCards.map(card =>
+               card.id === firstCardId || card.id === secondCardId
+                 ? { ...card, isFlipped: false }
+                 : card
+             )
+           );
          }
+ 
          setSelectedCards([]);
+         setIsProcessing(false);
        }, 1000);
      }
    };
+ 
+   const resetGame = () => {
+     const emojis = ['üè∞', 'üë∏', 'ü¶Ñ', 'üé†', 'üé™', 'üé®'];
+     const gameCards = [...emojis, ...emojis]
+       .map((emoji, index) => ({
+         id: index,
+         emoji,
+         isFlipped: false,
+         isMatched: false
+       }))
+       .sort(() => Math.random() - 0.5);
+ 
+     setCards(gameCards);
+     setSelectedCards([]);
+     setMoves(0);
+     setIsComplete(false);
+     setIsProcessing(false);
+   };
  
    return (
-     <div className="bg-gradient-to-br from-purple-600/20 to-pink-600/20 rounded-3xl p-8">
-       <h3 className="text-3xl font-bold text-center mb-6 font-bungee text-white">
+     <div className="bg-gradient-to-br from-purple-600/20 to-pink-600/20 rounded-3xl p-8 h-full">
+       <div className="flex justify-between items-center mb-6">
+         <h3 className="text-3xl font-bold font-bungee text-white">
            Magic Memory Match! üéÆ
          </h3>
+         <motion.button
+           onClick={resetGame}
+           className="px-4 py-2 bg-gradient-to-r from-pink-500 to-purple-500 rounded-xl text-white font-fredoka text-sm hover:from-pink-600 hover:to-purple-600 transition-all"
+           whileHover={{ scale: 1.05 }}
+           whileTap={{ scale: 0.95 }}
+         >
+           New Game
+         </motion.button>
+       </div>
  
-       <div className="grid grid-cols-4 gap-4 max-w-md mx-auto mb-6">
+       <div className="grid grid-cols-4 gap-3 max-w-sm mx-auto mb-6">
          {cards.map((card) => (
            <motion.div
              key={card.id}
-             className={`aspect-square rounded-xl cursor-pointer ${card.isFlipped || card.isMatched
-               ? 'bg-gradient-to-br from-yellow-400 to-pink-400'
-               : 'bg-gradient-to-br from-blue-400 to-purple-400'
-               } flex items-center justify-center text-4xl shadow-lg`}
+             className={cn(
+               "aspect-square rounded-xl cursor-pointer flex items-center justify-center text-3xl shadow-lg border-2 transition-all duration-300",
+               card.isFlipped || card.isMatched
+                 ? 'bg-gradient-to-br from-yellow-400 to-pink-400 border-yellow-300'
+                 : 'bg-gradient-to-br from-blue-400 to-purple-400 border-blue-300 hover:from-blue-300 hover:to-purple-300',
+               card.isMatched && 'ring-4 ring-green-400 ring-opacity-60',
+               isProcessing && selectedCards.includes(card.id) && !card.isMatched && 'animate-pulse'
+             )}
              onClick={() => handleCardClick(card.id)}
-             whileHover={{ scale: 1.05 }}
-             whileTap={{ scale: 0.95 }}
+             whileHover={{ scale: card.isMatched ? 1 : 1.05 }}
+             whileTap={{ scale: card.isMatched ? 1 : 0.95 }}
              animate={card.isMatched ? {
                rotate: [0, 360],
                scale: [1, 1.2, 1]
              } : {}}
+             transition={{ duration: 0.6 }}
            >
+             <span className="select-none">
                {card.isFlipped || card.isMatched ? card.emoji : '‚ùì'}
+             </span>
            </motion.div>
          ))}
        </div>
  
        <div className="text-center text-white">
-         <p className="font-fredoka text-lg">Moves: {moves}</p>
+         <p className="font-fredoka text-lg mb-2">Moves: {moves}</p>
          {isComplete && (
            <motion.div
-             initial={{ scale: 0 }}
-             animate={{ scale: 1 }}
-             className="mt-4"
+             initial={{ scale: 0, opacity: 0 }}
+             animate={{ scale: 1, opacity: 1 }}
+             className="space-y-3"
            >
-             <p className="text-2xl font-bold font-bubblegum">üéâ You Won! üéâ</p>
-             <ConfettiButton />
+             <p className="text-2xl font-bold font-bubblegum">üéâ Magical! You Won! üéâ</p>
+             <p className="text-sm font-comic text-white/80">Completed in {moves} moves!</p>
+             <ConfettiButton>
+               Celebrate! üéä
+             </ConfettiButton>
            </motion.div>
          )}
```

```diff
    );
  }
+ 
+ // FIXED: Interactive Hero Element - Disney Park Map
+ function InteractiveParkMap() {
+   const [selectedLand, setSelectedLand] = useState<string | null>(null);
+   const [hoveredLand, setHoveredLand] = useState<string | null>(null);
+ 
+   const parkLands = [
+     {
+       id: 'mainstreet',
+       name: 'Main Street U.S.A.',
+       position: { top: '20%', left: '50%' },
+       icon: 'üè™',
+       color: 'from-red-400 to-red-600',
+       description: 'Welcome to the most magical place on Earth!'
+     },
+     {
+       id: 'fantasyland',
+       name: 'Fantasyland',
+       position: { top: '15%', left: '70%' },
+       icon: 'üè∞',
+       color: 'from-pink-400 to-purple-600',
+       description: 'Where fairy tales come to life'
+     },
+     {
+       id: 'tomorrowland',
+       name: 'Tomorrowland',
+       position: { top: '30%', left: '85%' },
+       icon: 'üöÄ',
+       color: 'from-blue-400 to-cyan-600',
+       description: 'A journey to the future'
+     },
+     {
+       id: 'frontierland',
+       name: 'Frontierland',
+       position: { top: '60%', left: '30%' },
+       icon: 'ü§†',
+       color: 'from-orange-400 to-yellow-600',
+       description: 'The Wild West adventure'
+     },
+     {
+       id: 'adventureland',
+       name: 'Adventureland',
+       position: { top: '70%', left: '70%' },
+       icon: 'ü¶ú',
+       color: 'from-green-400 to-emerald-600',
+       description: 'Exotic adventures await'
+     },
+     {
+       id: 'liberty',
+       name: 'Liberty Square',
+       position: { top: '45%', left: '55%' },
+       icon: 'üóΩ',
+       color: 'from-indigo-400 to-blue-600',
+       description: 'Colonial American charm'
+     }
+   ];
+ 
+   return (
+     <div className="relative w-full h-full bg-gradient-to-br from-green-200/30 to-blue-200/30 rounded-3xl overflow-hidden">
+       {/* Map background */}
+       <div className="absolute inset-0 bg-gradient-to-br from-emerald-100/20 via-blue-100/20 to-purple-100/20">
+         <div className="absolute inset-0 bg-[url('/images/map-pattern.svg')] opacity-10"></div>
+       </div>
+ 
+       {/* Park lands */}
+       {parkLands.map((land) => (
+         <motion.div
+           key={land.id}
+           className="absolute transform -translate-x-1/2 -translate-y-1/2 cursor-pointer"
+           style={land.position}
+           initial={{ scale: 0, opacity: 0 }}
+           animate={{ scale: 1, opacity: 1 }}
+           transition={{ delay: 0.2 * parkLands.indexOf(land), type: "spring" }}
+           onHoverStart={() => setHoveredLand(land.id)}
+           onHoverEnd={() => setHoveredLand(null)}
+           onClick={() => setSelectedLand(selectedLand === land.id ? null : land.id)}
+         >
+           {/* Land marker */}
+           <motion.div
+             className={cn(
+               "relative p-4 rounded-full bg-gradient-to-br shadow-lg border-4 border-white/50",
+               land.color,
+               hoveredLand === land.id && "ring-4 ring-white/60"
+             )}
+             whileHover={{ scale: 1.2 }}
+             whileTap={{ scale: 0.9 }}
+             animate={selectedLand === land.id ? {
+               scale: [1, 1.2, 1],
+               rotate: [0, 360]
+             } : {}}
+           >
+             <span className="text-2xl">{land.icon}</span>
+ 
+             {/* Pulsing animation */}
+             <motion.div
+               className="absolute inset-0 rounded-full bg-white/20"
+               animate={{
+                 scale: [1, 1.5, 1],
+                 opacity: [0.5, 0, 0.5]
+               }}
+               transition={{
+                 duration: 2,
+                 repeat: Infinity,
+                 delay: parkLands.indexOf(land) * 0.3
+               }}
+             />
+           </motion.div>
+ 
+           {/* Land name tooltip */}
+           <AnimatePresence>
+             {(hoveredLand === land.id || selectedLand === land.id) && (
+               <motion.div
+                 initial={{ opacity: 0, y: 10, scale: 0.8 }}
+                 animate={{ opacity: 1, y: 0, scale: 1 }}
+                 exit={{ opacity: 0, y: 10, scale: 0.8 }}
+                 className="absolute top-full mt-2 left-1/2 transform -translate-x-1/2 z-10"
+               >
+                 <div className="bg-white/95 backdrop-blur-sm rounded-xl p-3 shadow-lg border border-white/50 min-w-48">
+                   <h4 className="font-bold text-gray-800 font-fredoka text-sm">{land.name}</h4>
+                   <p className="text-gray-600 font-comic text-xs mt-1">{land.description}</p>
+                   <div className="flex items-center gap-2 mt-2">
+                     <Star className="w-3 h-3 text-yellow-400" />
+                     <span className="text-xs text-gray-500 font-comic">Click to explore!</span>
+                   </div>
+                 </div>
+               </motion.div>
+             )}
+           </AnimatePresence>
+         </motion.div>
+       ))}
+ 
+       {/* Floating elements */}
+       <div className="absolute top-4 right-4 text-4xl">
+         <motion.span
+           animate={{
+             rotate: [0, 360],
+             scale: [1, 1.2, 1]
+           }}
+           transition={{
+             duration: 4,
+             repeat: Infinity
+           }}
+         >
+           üé†
+         </motion.span>
+       </div>
+ 
+       <div className="absolute bottom-6 left-6 text-3xl">
+         <motion.span
+           animate={{
+             y: [0, -10, 0],
+             rotate: [-5, 5, -5]
+           }}
+           transition={{
+             duration: 3,
+             repeat: Infinity
+           }}
+         >
+           üéÜ
+         </motion.span>
+       </div>
+ 
+       {/* Selected land details */}
+       <AnimatePresence>
+         {selectedLand && (
+           <motion.div
+             initial={{ opacity: 0, y: 20 }}
+             animate={{ opacity: 1, y: 0 }}
+             exit={{ opacity: 0, y: 20 }}
+             className="absolute bottom-4 left-4 right-4 bg-white/95 backdrop-blur-sm rounded-2xl p-4 shadow-xl border border-white/50"
+           >
+             <div className="flex items-center justify-between">
+               <div className="flex items-center gap-3">
+                 <span className="text-3xl">
+                   {parkLands.find(l => l.id === selectedLand)?.icon}
+                 </span>
+                 <div>
+                   <h3 className="font-bold text-gray-800 font-fredoka">
+                     {parkLands.find(l => l.id === selectedLand)?.name}
+                   </h3>
+                   <p className="text-gray-600 font-comic text-sm">
+                     {parkLands.find(l => l.id === selectedLand)?.description}
+                   </p>
+                 </div>
+               </div>
+               <motion.button
+                 onClick={() => setSelectedLand(null)}
+                 className="p-2 rounded-full bg-gray-200/50 hover:bg-gray-300/50 transition-colors"
+                 whileHover={{ scale: 1.1 }}
+                 whileTap={{ scale: 0.9 }}
+               >
+                 ‚úï
+               </motion.button>
+             </div>
+           </motion.div>
+         )}
+       </AnimatePresence>
+ 
+       {/* Legend */}
+       <div className="absolute top-4 left-4 bg-white/90 backdrop-blur-sm rounded-xl p-3 shadow-lg">
+         <h4 className="font-bold text-gray-800 font-fredoka text-sm mb-2">Magic Kingdom</h4>
+         <p className="text-gray-600 font-comic text-xs">Click on any land to explore!</p>
+       </div>
+     </div>
+   );
+ }
+ 
+ // FIXED: Planning Tools Feature Component
+ function PlanningToolFeature({
+   title,
+   description,
+   icon,
+   stats,
+   color,
+   features
+ }: {
+   title: string;
+   description: string;
+   icon: React.ReactNode;
+   stats: string;
+   color: string;
+   features: string[];
+ }) {
+   const [isExpanded, setIsExpanded] = useState(false);
+ 
+   return (
+     <motion.div
+       className="relative h-full"
+       whileHover={{ y: -5 }}
+     >
+       <div className={cn(
+         "h-full p-6 rounded-3xl bg-gradient-to-br shadow-xl border border-white/20 backdrop-blur-sm cursor-pointer",
+         color
+       )}
+       onClick={() => setIsExpanded(!isExpanded)}
+       >
+         <div className="flex items-start justify-between mb-4">
+           <motion.div
+             className="p-3 rounded-2xl bg-white/20 backdrop-blur-sm"
+             whileHover={{ rotate: 360, scale: 1.1 }}
+             transition={{ duration: 0.5 }}
+           >
+             {icon}
+           </motion.div>
+           <motion.div
+             className="text-white/70 text-sm font-comic px-2 py-1 rounded-full bg-white/10"
+             animate={{ opacity: [0.7, 1, 0.7] }}
+             transition={{ duration: 2, repeat: Infinity }}
+           >
+             {stats}
+           </motion.div>
+         </div>
+ 
+         <h3 className="text-2xl font-bold text-white mb-3 font-fredoka">
+           {title}
+         </h3>
+ 
+         <p className="text-white/90 mb-4 font-comic leading-relaxed">
+           {description}
+         </p>
+ 
+         <AnimatePresence>
+           {isExpanded && (
+             <motion.div
+               initial={{ opacity: 0, height: 0 }}
+               animate={{ opacity: 1, height: "auto" }}
+               exit={{ opacity: 0, height: 0 }}
+               className="space-y-2 mb-4"
+             >
+               {features.map((feature, i) => (
+                 <motion.div
+                   key={i}
+                   initial={{ opacity: 0, x: -20 }}
+                   animate={{ opacity: 1, x: 0 }}
+                   transition={{ delay: i * 0.1 }}
+                   className="flex items-center gap-2 text-white/80 text-sm font-comic"
+                 >
+                   <Sparkles className="w-3 h-3 text-yellow-300" />
+                   {feature}
+                 </motion.div>
+               ))}
+             </motion.div>
+           )}
+         </AnimatePresence>
+ 
+         <motion.div
+           className="flex items-center gap-2 text-white/90 font-fredoka group-hover:gap-3 transition-all"
+           whileHover={{ x: 5 }}
+         >
+           <span>{isExpanded ? 'Show Less' : 'Learn More'}</span>
+           <motion.div
+             animate={{ rotate: isExpanded ? 180 : 0 }}
+             transition={{ duration: 0.3 }}
+           >
+             <ArrowRight className="w-4 h-4" />
+           </motion.div>
+         </motion.div>
+ 
+         <BorderBeam size={100} duration={8} />
+       </div>
+     </motion.div>
+   );
+ }
  
  export default function Home() {
```

```diff
    }, { scope: containerRef, dependencies: [] });
  
-   // Enhanced features with Disney magic
+   // FIXED: Enhanced features with Disney magic
    const magicalFeatures = [
      {
-       icon: <Crown className="h-10 w-10" />,
-       title: "Princess Planning",
-       description: "Create royal itineraries with character meet & greets and magical dining.",
-       href: "/planning",
-       gradient: "from-pink-500 to-purple-500",
-       stats: "50,000+ magical moments",
-       character: "üë∏"
-     },
-     {
-       icon: <Rocket className="h-10 w-10" />,
-       title: "Space Adventures",
-       description: "Blast off to tomorrow with futuristic attractions and experiences.",
-       href: "/attractions",
-       gradient: "from-blue-500 to-cyan-500",
-       stats: "To infinity & beyond!",
-       character: "üöÄ"
-     },
-     {
-       icon: <Heart className="h-10 w-10" />,
-       title: "Character Hugs",
-       description: "Find your favorite Disney friends for unforgettable photo moments.",
-       href: "/characters",
-       gradient: "from-red-500 to-pink-500",
-       stats: "100+ character spots",
-       character: "ü§ó"
-     },
-     {
-       icon: <Wand2 className="h-10 w-10" />,
-       title: "Magic Maker",
-       description: "Customize your experience with FastPass+ and special access.",
-       href: "/magic",
-       gradient: "from-purple-500 to-indigo-500",
-       stats: "Skip 85% of lines",
-       character: "‚ú®"
-     },
-     {
-       icon: <Gift className="h-10 w-10" />,
-       title: "Surprise Planner",
-       description: "Plan magical surprises for birthdays and special celebrations.",
-       href: "/celebrations",
-       gradient: "from-yellow-500 to-orange-500",
-       stats: "10,000+ surprises",
-       character: "üéÅ"
-     },
-     {
-       icon: <Music className="h-10 w-10" />,
-       title: "Show Scheduler",
-       description: "Never miss parades, fireworks, and spectacular performances.",
-       href: "/shows",
-       gradient: "from-green-500 to-teal-500",
-       stats: "200+ daily shows",
-       character: "üé≠"
+       title: "Smart Itinerary Builder",
+       description: "Create perfect day plans with AI-powered recommendations based on crowds, weather, and your preferences.",
+       icon: <Calendar className="h-8 w-8 text-white" />,
+       gradient: "from-pink-500 via-purple-500 to-indigo-500",
+       stats: "95% satisfaction",
+       features: [
+         "Real-time crowd predictions",
+         "Weather-based recommendations",
+         "Character meet & greet scheduling",
+         "Dining reservation integration",
+         "FastPass+ optimization"
+       ]
+     },
+     {
+       title: "Wait Time Tracker",
+       description: "Live updates on attraction wait times with predictive analytics to help you avoid the longest lines.",
+       icon: <Clock className="h-8 w-8 text-white" />,
+       gradient: "from-blue-500 via-cyan-500 to-teal-500",
+       stats: "Save 2+ hours",
+       features: [
+         "Live wait time monitoring",
+         "Historical data analysis",
+         "Best time predictions",
+         "Alternative attraction suggestions",
+         "Mobile notifications"
+       ]
+     },
+     {
+       title: "Character Locator",
+       description: "Find your favorite Disney characters with real-time locations and meet & greet schedules.",
+       icon: <MapPin className="h-8 w-8 text-white" />,
+       gradient: "from-red-500 via-pink-500 to-rose-500",
+       stats: "100+ characters",
+       features: [
+         "Real-time character locations",
+         "Meet & greet schedules",
+         "Photo spot recommendations",
+         "Special event notifications",
+         "Autograph book planning"
+       ]
+     },
+     {
+       title: "Group Coordinator",
+       description: "Keep your family together with shared itineraries, location tracking, and communication tools.",
+       icon: <Users className="h-8 w-8 text-white" />,
+       gradient: "from-green-500 via-emerald-500 to-cyan-500",
+       stats: "Perfect for families",
+       features: [
+         "Shared group itineraries",
+         "Family member location tracking",
+         "In-app messaging",
+         "Split-up coordination",
+         "Reunion point suggestions"
+       ]
+     },
+     {
+       title: "Magic Genie Assistant",
+       description: "Your personal Disney expert providing insider tips, hidden Mickey locations, and magical surprises.",
+       icon: <Wand2 className="h-8 w-8 text-white" />,
+       gradient: "from-purple-500 via-violet-500 to-purple-700",
+       stats: "1000+ magic tips",
+       features: [
+         "Insider tips and tricks",
+         "Hidden Mickey finder",
+         "Secret menu items",
+         "Photo spot recommendations",
+         "Surprise planning assistance"
+       ]
+     },
+     {
+       title: "Dining Planner",
+       description: "Discover the best dining experiences with reservation assistance and dietary accommodation finder.",
+       icon: <Gift className="h-8 w-8 text-white" />,
+       gradient: "from-orange-500 via-amber-500 to-yellow-500",
+       stats: "200+ restaurants",
+       features: [
+         "Restaurant recommendations",
+         "Reservation availability alerts",
+         "Dietary restriction support",
+         "Character dining schedules",
+         "Mobile food ordering"
+       ]
      }
    ];
```

```diff
              </motion.div>
  
-             {/* Right: 3D Castle Scene */}
+             {/* Right: Interactive Park Map */}
              <motion.div
                initial={{ opacity: 0, scale: 0.8 }}
```

```diff
                    gradientColor="#D946EF"
                  >
-                   <Canvas shadows camera={{ position: [0, 0, 15], fov: 45 }}>
-                     <color attach="background" args={["#1a0b2e"]} />
-                     <fog attach="fog" args={["#1a0b2e", 10, 30]} />
- 
-                     {/* Lighting */}
-                     <ambientLight intensity={0.4} />
-                     <spotLight position={[10, 15, 10]} angle={0.3} penumbra={1} intensity={2} castShadow />
-                     <pointLight position={[-10, -10, -10]} color="#FFD700" intensity={1} />
-                     <pointLight position={[10, 10, 10]} color="#FF69B4" intensity={1} />
- 
-                     {/* Castle Scene */}
-                     <Suspense fallback={null}>
-                       <DisneyMagicCastle scale={3} />
-                     </Suspense>
- 
-                     {/* Sky */}
-                     <Sky
-                       distance={450000}
-                       sunPosition={[0, 1, 0]}
-                       inclination={0}
-                       azimuth={0.25}
-                       rayleigh={0.5}
-                     />
- 
-                     <Stars
-                       radius={100}
-                       depth={50}
-                       count={1000}
-                       factor={4}
-                       saturation={0}
-                       fade
-                       speed={1}
-                     />
- 
-                     <OrbitControls
-                       enablePan={false}
-                       enableZoom={false}
-                       minPolarAngle={Math.PI / 3}
-                       maxPolarAngle={Math.PI / 2}
-                     />
-                   </Canvas>
- 
-                   {/* Overlay gradient */}
-                   <div className="absolute inset-0 bg-gradient-to-t from-purple-900/50 via-transparent to-transparent pointer-events-none" />
- 
-                   {/* Floating UI elements */}
-                   <div className="absolute bottom-6 left-6 right-6">
-                     <motion.div
-                       initial={{ y: 20, opacity: 0 }}
-                       animate={{ y: 0, opacity: 1 }}
-                       transition={{ delay: 1.5 }}
-                       className="bg-white/10 backdrop-blur-md rounded-2xl p-4 border border-white/20"
-                     >
-                       <div className="flex items-center justify-between">
-                         <div>
-                           <h3 className="text-lg font-bold text-white font-fredoka">Magic Kingdom</h3>
-                           <p className="text-sm text-white/80 font-comic">Where Dreams Come True</p>
-                         </div>
-                         <div className="flex gap-2">
-                           {['üè∞', 'üé†', 'üé™', 'üé®'].map((emoji, i) => (
-                             <motion.span
-                               key={i}
-                               className="text-2xl sparkle-element"
-                               animate={{
-                                 y: [0, -5, 0],
-                                 rotate: [-5, 5, -5]
-                               }}
-                               transition={{
-                                 duration: 2,
-                                 delay: i * 0.2
-                               }}
-                             >
-                               {emoji}
-                             </motion.span>
-                           ))}
-                         </div>
-                       </div>
-                     </motion.div>
-                   </div>
+                   <InteractiveParkMap />
                  </MagicCard>
- 
-                 {/* Decorative borders */}
                  <BorderBeam size={200} duration={12} delay={3} />
                </div>
```

```diff
  
            {/* Character Cards */}
-           <div className="grid md:grid-cols-2 lg:grid-cols-4 gap-6 mb-16">
+           <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-16">
              {disneyCharacters.map((character, i) => (
                <BlurFade key={i} delay={0.2 + i * 0.1}>
```

```diff
                      className="h-full"
                    >
-                     <NeonGradientCard
-                       className="h-full p-6 cursor-pointer group"
-                       borderRadius={24}
-                       borderSize={2}
-                     >
-                       <div className="flex items-start justify-between mb-4">
-                         <motion.div
-                           className={`p-3 rounded-2xl bg-gradient-to-br ${feature.gradient} shadow-lg`}
-                           whileHover={{ rotate: 360, scale: 1.2 }}
-                           transition={{ duration: 0.5 }}
-                         >
-                           {feature.icon}
-                         </motion.div>
-                         <motion.span
-                           className="text-4xl"
-                           animate={{
-                             y: [0, -10, 0],
-                             rotate: [-5, 5, -5]
-                           }}
-                           transition={{
-                             duration: 2,
-                             delay: i * 0.2
-                           }}
-                         >
-                           {feature.character}
-                         </motion.span>
-                       </div>
- 
-                       <h3 className="text-2xl font-bold text-white mb-3 font-fredoka group-hover:text-glow">
-                         {feature.title}
-                       </h3>
- 
-                       <p className="text-gray-300 mb-4 font-comic">
-                         {feature.description}
-                       </p>
- 
-                       <div className="text-sm text-white/70 mb-4 font-caveat">
-                         {feature.stats}
-                       </div>
- 
-                       <Link
-                         href={feature.href}
-                         className="inline-flex items-center gap-2 text-white font-fredoka group-hover:gap-3 transition-all"
-                       >
-                         Discover Magic
-                         <ArrowRight className="w-4 h-4" />
-                       </Link>
-                     </NeonGradientCard>
+                     <PlanningToolFeature
+                       title={feature.title}
+                       description={feature.description}
+                       icon={feature.icon}
+                       stats={feature.stats}
+                       color={feature.gradient}
+                       features={feature.features}
+                     />
                    </motion.div>
                  </EnhancedParallax>
```

---

Now I need to fix the linter errors by removing unused imports and fixing the import issue with BentoGridItem.

---

```diff
  'use client'
  
- import React, { useRef, useState, useEffect, ReactNode, Suspense } from "react";
+ import React, { useRef, useState, useEffect, ReactNode } from "react";
  import Link from "next/link";
- import { ArrowRight, Heart, Music, Rocket, Crown, Gift, Play, Volume2, VolumeX, Sparkles, Clock, MapPin, Users, Calendar, Star, Wand2 } from "lucide-react";
+ import { ArrowRight, Play, Volume2, VolumeX, Sparkles, Clock, MapPin, Users, Calendar, Star, Wand2, Gift } from "lucide-react";
  import { motion, useScroll, useTransform, useSpring, useInView, AnimatePresence } from "framer-motion";
  import { gsap } from "@/lib/gsap";
  import { useGSAP } from "@gsap/react";
  import ScrollTrigger from "gsap/ScrollTrigger";
- import { Canvas, useFrame } from '@react-three/fiber';
+ import { useFrame } from '@react-three/fiber';
  import * as THREE from 'three';
- import { Float, PresentationControls, Stars, Sparkles as DreiSparkles, MeshDistortMaterial, OrbitControls, Sky, ContactShadows } from '@react-three/drei';
+ import { Float, PresentationControls, Sparkles as DreiSparkles, MeshDistortMaterial, ContactShadows } from '@react-three/drei';
  import { Particles } from '@/components/magicui/particles';
  import { NeonGradientCard } from '@/components/magicui/neon-gradient-card';
  import { Marquee } from '@/components/magicui/marquee';
- import { BentoGrid, BentoGridItem } from '@/components/magicui/bento-grid';
  import { Kalam, Fredoka, Bubblegum_Sans, Pacifico, Grandstander, Comic_Neue, Bungee, Caveat } from 'next/font/google';
  import { BorderBeam } from '@/components/magicui/border-beam';
```

---

I need to remove the BentoGrid references since they're no longer needed, and fix the CSS class conflicts.

---

```diff
            </motion.div>
  
-           <BentoGrid className="md:grid-cols-6 gap-6">
-             {magicalFeatures.map((feature, i) => {
-               const spans = i === 0 ? "md:col-span-4 md:row-span-2" :
-                 i === 1 || i === 2 ? "md:col-span-2" :
-                   "md:col-span-3";
- 
-               return (
-                 <EnhancedParallax
-                   key={i}
-                   speed={0.1 * (i + 1)}
-                   rotationSpeed={5}
-                   scaleRange={[0.95, 1.05]}
-                   className={cn(spans, "scroll-reveal")}
-                 >
-                   <motion.div
-                     whileHover={{ y: -10 }}
-                     className="h-full"
-                   >
+           {/* FIXED: Grid layout with proper sizing and content */}
+           <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 max-w-7xl mx-auto">
+             {magicalFeatures.map((feature, i) => (
+               <BlurFade key={i} delay={0.2 + i * 0.1}>
                  <PlanningToolFeature
                    title={feature.title}
```

```diff
                    features={feature.features}
                  />
-                   </motion.div>
-                 </EnhancedParallax>
-               );
-             })}
-           </BentoGrid>
+               </BlurFade>
+             ))}
+           </div>
  
            {/* Floating elements */}
```

---

It seems the edit didn't work correctly. Let me view the file to see what's wrong and fix it properly.

---

Read file: src/app/page.tsx

---

I can see that the code is correct now. Let me clean up the final linter issues by removing unused imports and fixing the minor CSS issues.

---

```diff
  import { Float, PresentationControls, Sparkles as DreiSparkles, MeshDistortMaterial, ContactShadows } from '@react-three/drei';
  import { Particles } from '@/components/magicui/particles';
- import { NeonGradientCard } from '@/components/magicui/neon-gradient-card';
  import { Marquee } from '@/components/magicui/marquee';
  import { Kalam, Fredoka, Bubblegum_Sans, Pacifico, Grandstander, Comic_Neue, Bungee, Caveat } from 'next/font/google';
```

---

Let me fix the final CSS class conflicts by replacing the conflicting classes with proper merged versions.

---

```diff
                  ? 'bg-gradient-to-br from-yellow-400 to-pink-400 border-yellow-300'
                  : 'bg-gradient-to-br from-blue-400 to-purple-400 border-blue-300 hover:from-blue-300 hover:to-purple-300',
-               card.isMatched && 'ring-4 ring-green-400 ring-opacity-60',
+               card.isMatched && 'ring-green-400 ring-4 ring-opacity-60',
                isProcessing && selectedCards.includes(card.id) && !card.isMatched && 'animate-pulse'
              )}
```

---

The issue is that the Tailwind CSS classes are conflicting. Let me fix all the conflicting classes at once using the proper Tailwind approach.

---

```diff
                  ? 'bg-gradient-to-br from-yellow-400 to-pink-400 border-yellow-300'
                  : 'bg-gradient-to-br from-blue-400 to-purple-400 border-blue-300 hover:from-blue-300 hover:to-purple-300',
-               card.isMatched && 'ring-green-400 ring-4 ring-opacity-60',
+               card.isMatched && 'ring-4 ring-green-400/60',
                isProcessing && selectedCards.includes(card.id) && !card.isMatched && 'animate-pulse'
              )}
```

---

Let me fix the remaining class conflicts by combining them into single, non-conflicting classes:

---

Cancelled

---


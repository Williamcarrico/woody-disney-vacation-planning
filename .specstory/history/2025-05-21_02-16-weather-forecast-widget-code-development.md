<!-- Generated by SpecStory -->

# Weather Forecast Widget Code Development (2025-05-20 21:16:47)

_**User**_

Your task is to create an extremely detailed, sophisticated and comperhensive /components/weather/WeatherForecastWidget file code. Ensure the file is using Realtime Weather
get
https://api.tomorrow.io/v4/weather/realtime

Tomorrow.io API: BUg7tFzAmctASd4DLGxkwDTSmuwWGHNS

Using the Realtime Weather API you can access current weather information for your location in minute-by-minute temporal resolution.
For the location query parameter, we support multiple location types:

Latitude and Longitude (Decimal degree) location=42.3478, -71.0466
City name location=new york
US zip location=10001 US (2-letter code based on ISO-3166)
UK postcode location=SW1

import axios from 'axios';

const options = {
  method: 'GET',
  url: 'https://api.tomorrow.io/v4/weather/realtime?location=orlando&units=metric&apikey=BUg7tFzAmctASd4DLGxkwDTSmuwWGHNS',
  headers: {accept: 'application/json', 'accept-encoding': 'deflate, gzip, br'}
};

axios
  .request(options)
  .then(res => console.log(res.data))
  .catch(err => console.error(err));

@https://docs.tomorrow.io/reference/realtime-weather 

Tomorrow.io API: BUg7tFzAmctASd4DLGxkwDTSmuwWGHNS

Weather Forecast
get
https://api.tomorrow.io/v4/weather/forecast

import axios from 'axios';

const options = {
  method: 'GET',
  url: 'https://api.tomorrow.io/v4/weather/forecast?location=new%20york&apikey=BUg7tFzAmctASd4DLGxkwDTSmuwWGHNS',
  headers: {accept: 'application/json', 'accept-encoding': 'deflate, gzip, br'}
};

axios
  .request(options)
  .then(res => console.log(res.data))
  .catch(err => console.error(err));

Using the weather forecast API you can access up-to-date weather information for your location, including minute-by-minute forecasts (for premium users) for the next hour, hourly forecasts for the next 120 hours, and daily forecasts for the next 5 days.
For the location query parameter we support multiple location types:

Latitude and Longitude (Decimal degree) location=42.3478, -71.0466
City name location=new york
US zip location=10001 US(2-letter code based on ISO-3166)
UK postcode location=SW1

@https://docs.tomorrow.io/reference/weather-forecast 


---

_**Assistant**_



---

<details>
            <summary>Listed directory src/components • **21** results</summary>
        
| Name |
|-------|
| 📁 `budget` |
| 📁 `maps` |
| 📁 `itinerary` |
| 📁 `ui` |
| 📁 `shared` |
| 📁 `optimizer` |
| 📁 `attractions` |
| 📁 `events` |
| 📁 `disneysprings` |
| 📁 `parks` |
| 📁 `group` |
| 📁 `charts` |
| 📁 `examples` |
| 📁 `auth` |
| 📁 `resorts` |
| 📁 `dashboard` |
| 📁 `wallet` |
| 📁 `calendar` |
| 📁 `theme-provider` |
| 📁 `dining` |
| 📁 `planning` |

</details>

---

<details>
            <summary>Listed directory src/components/ui • **40** results</summary>
        
| Name |
|-------|
| 📄 `select.tsx` |
| 📄 `toast.tsx` |
| 📄 `use-toast.tsx` |
| 📄 `toaster.tsx` |
| 📄 `button.tsx` |
| 📄 `carousel.tsx` |
| 📄 `offline-indicator.tsx` |
| 📄 `hover-card.tsx` |
| 📄 `table.tsx` |
| 📄 `progress.tsx` |
| 📄 `form.tsx` |
| 📄 `skeleton.tsx` |
| 📄 `spinner.tsx` |
| 📄 `menubar.tsx` |
| 📄 `navigation-menu.tsx` |
| 📄 `textarea.tsx` |
| 📄 `switch.tsx` |
| 📄 `sonner.tsx` |
| 📄 `input.tsx` |
| 📄 `sheet.tsx` |
| 📄 `separator.tsx` |
| 📄 `sidebar.tsx` |
| 📄 `scroll-area.tsx` |
| 📄 `popover.tsx` |
| 📄 `checkbox.tsx` |
| 📄 `chart.tsx` |
| 📄 `calendar.tsx` |
| 📄 `breadcrumb.tsx` |
| 📄 `alert-dialog.tsx` |
| 📄 `alert.tsx` |
| 📄 `accordion.tsx` |
| 📄 `avatar.tsx` |
| 📄 `dialog.tsx` |
| 📄 `label.tsx` |
| 📄 `slider.tsx` |
| 📄 `tooltip.tsx` |
| 📄 `tabs.tsx` |
| 📄 `badge.tsx` |
| 📄 `card.tsx` |
| 📄 `dropdown-menu.tsx` |

</details>

---

<details>
            <summary>Listed directory src/lib • **10** results</summary>
        
| Name |
|-------|
| 📁 `firebase` |
| 📁 `services` |
| 📁 `schemas` |
| 📁 `data` |
| 📄 `auth.ts` |
| 📁 `utils` |
| 📄 `cdn-config.ts` |
| 📁 `api` |
| 📁 `gsap` |
| 📄 `utils.ts` |

</details>

---

<details>
            <summary>Listed directory src/lib/utils • **10** results</summary>
        
| Name |
|-------|
| 📄 `constants.ts` |
| 📄 `logger.ts` |
| 📄 `environment.ts` |
| 📄 `sanitize.ts` |
| 📄 `attractionData.ts` |
| 📄 `date-utils.ts` |
| 📄 `offline-storage.ts` |
| 📄 `disneySpringsData.ts` |
| 📄 `resortData.ts` |
| 📄 `auth-validation.ts` |

</details>

---

<details>
            <summary>Listed directory src/lib/api • **3** results</summary>
        
| Name |
|-------|
| 📄 `validation.ts` |
| 📄 `response.ts` |
| 📄 `themeParks.ts` |

</details>

---

<details>
            <summary>Listed directory src/types • **5** results</summary>
        
| Name |
|-------|
| 📄 `attraction.ts` |
| 📄 `events.ts` |
| 📄 `resort.ts` |
| 📄 `disneysprings.ts` |
| 📄 `api.ts` |

</details>

---

Now I'll create the weather components. I need to create the `/components/weather` directory and the main component file with the required functionality.

---

```bash
mkdir -p src/components/weather
```

```
williamcarrico@CIA woody-disney-vacation-planning % 

```

---

```diff
- 
+ /**
+  * Types for Tomorrow.io Weather API
+  * Based on documentation: https://docs.tomorrow.io/reference/realtime-weather and
+  * https://docs.tomorrow.io/reference/weather-forecast
+  */
+ 
+ // Common types
+ export type TemperatureUnit = 'metric' | 'imperial';
+ 
+ export interface WeatherLocation {
+   lat: number;
+   lon: number;
+   name?: string;
+ }
+ 
+ // Realtime Weather API response types
+ export interface RealtimeWeatherResponse {
+   data: {
+     time: string;
+     values: RealtimeWeatherValues;
+   };
+   location: {
+     lat: number;
+     lon: number;
+     name?: string;
+   };
+ }
+ 
+ export interface RealtimeWeatherValues {
+   cloudBase: number;
+   cloudCeiling: number;
+   cloudCover: number;
+   dewPoint: number;
+   freezingRainIntensity: number;
+   humidity: number;
+   precipitationProbability: number;
+   pressureSurfaceLevel: number;
+   rainIntensity: number;
+   sleetIntensity: number;
+   snowIntensity: number;
+   temperature: number;
+   temperatureApparent: number;
+   uvHealthConcern: number;
+   uvIndex: number;
+   visibility: number;
+   weatherCode: number;
+   windDirection: number;
+   windGust: number;
+   windSpeed: number;
+ }
+ 
+ // Forecast API response types
+ export interface ForecastResponse {
+   timelines: {
+     minutely?: TimelineData[];
+     hourly: TimelineData[];
+     daily: TimelineData[];
+   };
+   location: {
+     lat: number;
+     lon: number;
+     name?: string;
+   };
+ }
+ 
+ export interface TimelineData {
+   time: string;
+   values: ForecastValues;
+ }
+ 
+ export interface ForecastValues {
+   cloudBase?: number;
+   cloudCeiling?: number;
+   cloudCover?: number;
+   dewPoint?: number;
+   evapotranspiration?: number;
+   freezingRainIntensity?: number;
+   humidity?: number;
+   iceAccumulation?: number;
+   iceAccumulationLwe?: number;
+   precipitationProbability?: number;
+   pressureSurfaceLevel?: number;
+   rainAccumulation?: number;
+   rainAccumulationLwe?: number;
+   rainIntensity?: number;
+   sleetAccumulation?: number;
+   sleetAccumulationLwe?: number;
+   sleetIntensity?: number;
+   snowAccumulation?: number;
+   snowAccumulationLwe?: number;
+   snowIntensity?: number;
+   temperature?: number;
+   temperatureApparent?: number;
+   temperatureMax?: number;
+   temperatureMin?: number;
+   uvHealthConcern?: number;
+   uvIndex?: number;
+   visibility?: number;
+   weatherCode?: number;
+   windDirection?: number;
+   windGust?: number;
+   windSpeed?: number;
+   moonPhase?: number;
+   sunriseTime?: string;
+   sunsetTime?: string;
+ }
+ 
+ // Weather code mapping based on Tomorrow.io documentation
+ export enum WeatherCode {
+   UNKNOWN = 0,
+   CLEAR = 1000,
+   MOSTLY_CLEAR = 1100,
+   PARTLY_CLOUDY = 1101,
+   MOSTLY_CLOUDY = 1102,
+   CLOUDY = 1001,
+   FOG = 2000,
+   LIGHT_FOG = 2100,
+   LIGHT_WIND = 3000,
+   WIND = 3001,
+   STRONG_WIND = 3002,
+   DRIZZLE = 4000,
+   RAIN = 4001,
+   LIGHT_RAIN = 4200,
+   HEAVY_RAIN = 4201,
+   SNOW = 5000,
+   FLURRIES = 5001,
+   LIGHT_SNOW = 5100,
+   HEAVY_SNOW = 5101,
+   FREEZING_DRIZZLE = 6000,
+   FREEZING_RAIN = 6001,
+   LIGHT_FREEZING_RAIN = 6200,
+   HEAVY_FREEZING_RAIN = 6201,
+   ICE_PELLETS = 7000,
+   HEAVY_ICE_PELLETS = 7101,
+   LIGHT_ICE_PELLETS = 7102,
+   THUNDERSTORM = 8000
+ }
+ 
+ // Component props
+ export interface WeatherForecastWidgetProps {
+   location?: string | WeatherLocation;
+   units?: TemperatureUnit;
+   showForecast?: boolean;
+   daysToShow?: number;
+   className?: string;
+   onLocationChange?: (location: WeatherLocation) => void;
+ }
```

---

```diff
- 
+ /**
+  * Weather API service for Tomorrow.io
+  */
+ 
+ import { ForecastResponse, RealtimeWeatherResponse, TemperatureUnit, WeatherLocation } from '@/types/weather';
+ 
+ // Environment variable would be preferred, but using the provided API key per instructions
+ const API_KEY = 'BUg7tFzAmctASd4DLGxkwDTSmuwWGHNS';
+ const BASE_URL = 'https://api.tomorrow.io/v4/weather';
+ 
+ /**
+  * Convert location to query parameter string for API calls
+  */
+ function formatLocationParam(location: string | WeatherLocation): string {
+   if (typeof location === 'string') {
+     return location;
+   }
+ 
+   return `${location.lat},${location.lon}`;
+ }
+ 
+ /**
+  * Fetch current weather data from Tomorrow.io API
+  */
+ export async function fetchRealtimeWeather(
+   location: string | WeatherLocation,
+   units: TemperatureUnit = 'metric'
+ ): Promise<RealtimeWeatherResponse> {
+   const locationParam = formatLocationParam(location);
+ 
+   const url = new URL(`${BASE_URL}/realtime`);
+   url.searchParams.append('location', locationParam);
+   url.searchParams.append('units', units);
+   url.searchParams.append('apikey', API_KEY);
+ 
+   try {
+     const response = await fetch(url.toString(), {
+       method: 'GET',
+       headers: {
+         'Accept': 'application/json',
+       },
+       // Cache for a short time (5 minutes)
+       next: { revalidate: 300 }
+     });
+ 
+     if (!response.ok) {
+       throw new Error(`Weather API error: ${response.status} ${response.statusText}`);
+     }
+ 
+     return await response.json();
+   } catch (error) {
+     console.error('Error fetching realtime weather:', error);
+     throw error;
+   }
+ }
+ 
+ /**
+  * Fetch weather forecast data from Tomorrow.io API
+  */
+ export async function fetchWeatherForecast(
+   location: string | WeatherLocation,
+   units: TemperatureUnit = 'metric'
+ ): Promise<ForecastResponse> {
+   const locationParam = formatLocationParam(location);
+ 
+   const url = new URL(`${BASE_URL}/forecast`);
+   url.searchParams.append('location', locationParam);
+   url.searchParams.append('units', units);
+   url.searchParams.append('apikey', API_KEY);
+ 
+   try {
+     const response = await fetch(url.toString(), {
+       method: 'GET',
+       headers: {
+         'Accept': 'application/json',
+       },
+       // Cache for 1 hour since forecast doesn't change as frequently
+       next: { revalidate: 3600 }
+     });
+ 
+     if (!response.ok) {
+       throw new Error(`Weather API error: ${response.status} ${response.statusText}`);
+     }
+ 
+     return await response.json();
+   } catch (error) {
+     console.error('Error fetching weather forecast:', error);
+     throw error;
+   }
+ }
+ 
+ /**
+  * Get weather icon based on weather code
+  * Returns appropriate Material Design Icons name
+  */
+ export function getWeatherIcon(weatherCode: number): string {
+   // Map Tomorrow.io weather codes to Material Design Icons
+   // https://docs.tomorrow.io/reference/data-layers-weather-codes
+   switch (weatherCode) {
+     case 1000: // Clear, Sunny
+       return 'weather-sunny';
+     case 1100: // Mostly Clear
+       return 'weather-partly-cloudy';
+     case 1101: // Partly Cloudy
+       return 'weather-partly-cloudy';
+     case 1102: // Mostly Cloudy
+       return 'weather-cloudy';
+     case 1001: // Cloudy
+       return 'weather-cloudy';
+     case 2000: // Fog
+     case 2100: // Light Fog
+       return 'weather-fog';
+     case 3000: // Light Wind
+     case 3001: // Wind
+     case 3002: // Strong Wind
+       return 'weather-windy';
+     case 4000: // Drizzle
+       return 'weather-pouring';
+     case 4001: // Rain
+       return 'weather-pouring';
+     case 4200: // Light Rain
+       return 'weather-rainy';
+     case 4201: // Heavy Rain
+       return 'weather-pouring';
+     case 5000: // Snow
+     case 5001: // Flurries
+       return 'weather-snowy';
+     case 5100: // Light Snow
+       return 'weather-snowy';
+     case 5101: // Heavy Snow
+       return 'weather-snowy-heavy';
+     case 6000: // Freezing Drizzle
+     case 6001: // Freezing Rain
+     case 6200: // Light Freezing Rain
+     case 6201: // Heavy Freezing Rain
+       return 'weather-snowy-rainy';
+     case 7000: // Ice Pellets
+     case 7101: // Heavy Ice Pellets
+     case 7102: // Light Ice Pellets
+       return 'weather-hail';
+     case 8000: // Thunderstorm
+       return 'weather-lightning-rainy';
+     default:
+       return 'weather-partly-cloudy';
+   }
+ }
+ 
+ /**
+  * Get textual description of weather code
+  */
+ export function getWeatherDescription(weatherCode: number): string {
+   switch (weatherCode) {
+     case 1000: return 'Clear';
+     case 1100: return 'Mostly Clear';
+     case 1101: return 'Partly Cloudy';
+     case 1102: return 'Mostly Cloudy';
+     case 1001: return 'Cloudy';
+     case 2000: return 'Fog';
+     case 2100: return 'Light Fog';
+     case 3000: return 'Light Wind';
+     case 3001: return 'Wind';
+     case 3002: return 'Strong Wind';
+     case 4000: return 'Drizzle';
+     case 4001: return 'Rain';
+     case 4200: return 'Light Rain';
+     case 4201: return 'Heavy Rain';
+     case 5000: return 'Snow';
+     case 5001: return 'Flurries';
+     case 5100: return 'Light Snow';
+     case 5101: return 'Heavy Snow';
+     case 6000: return 'Freezing Drizzle';
+     case 6001: return 'Freezing Rain';
+     case 6200: return 'Light Freezing Rain';
+     case 6201: return 'Heavy Freezing Rain';
+     case 7000: return 'Ice Pellets';
+     case 7101: return 'Heavy Ice Pellets';
+     case 7102: return 'Light Ice Pellets';
+     case 8000: return 'Thunderstorm';
+     default: return 'Unknown';
+   }
+ }
+ 
+ /**
+  * Format temperature with unit
+  */
+ export function formatTemperature(temp: number, unit: TemperatureUnit): string {
+   const unitSymbol = unit === 'metric' ? '°C' : '°F';
+   return `${Math.round(temp)}${unitSymbol}`;
+ }
```

---

```diff
- 
+ 'use client'
+ 
+ import { getWeatherIcon } from '@/lib/api/weather'
+ import { cn } from '@/lib/utils'
+ import React from 'react'
+ 
+ interface WeatherIconProps {
+   weatherCode: number
+   className?: string
+   size?: 'sm' | 'md' | 'lg' | 'xl'
+   color?: string
+   animate?: boolean
+ }
+ 
+ /**
+  * Dynamic weather icon component that displays appropriate icon based on weather code
+  */
+ function WeatherIcon({
+   weatherCode,
+   className,
+   size = 'md',
+   color,
+   animate = false
+ }: WeatherIconProps) {
+   const iconName = getWeatherIcon(weatherCode)
+ 
+   // Get size class based on prop
+   const sizeClass = {
+     sm: 'w-6 h-6',
+     md: 'w-10 h-10',
+     lg: 'w-16 h-16',
+     xl: 'w-24 h-24'
+   }[size]
+ 
+   // Dynamic import for icons based on the name
+   const [Icon, setIcon] = React.useState<React.ElementType | null>(null)
+ 
+   React.useEffect(() => {
+     // Dynamically import the icon based on the weather code
+     import('@mdi/js').then((icons) => {
+       // Convert kebab case to camel case for mdi icons (e.g., weather-sunny -> mdiWeatherSunny)
+       const iconKey = 'mdi' + iconName.split('-').map(s => s.charAt(0).toUpperCase() + s.slice(1)).join('')
+ 
+       if (icons[iconKey]) {
+         import('@mdi/react').then((module) => {
+           setIcon(() => module.Icon)
+         })
+       } else {
+         console.warn(`Icon not found: ${iconKey}`)
+         // Fallback to a default icon
+         import('@mdi/react').then((module) => {
+           setIcon(() => module.Icon)
+         })
+       }
+     })
+   }, [iconName])
+ 
+   // Animation class for certain weather types
+   const getAnimationClass = () => {
+     if (!animate) return ''
+ 
+     if (iconName.includes('rain') || iconName.includes('snow')) {
+       return 'animate-bounce-slow'
+     }
+ 
+     if (iconName.includes('wind')) {
+       return 'animate-shake'
+     }
+ 
+     if (iconName === 'weather-sunny' || iconName.includes('lightning')) {
+       return 'animate-pulse'
+     }
+ 
+     return ''
+   }
+ 
+   if (!Icon) {
+     return (
+       <div className={cn(sizeClass, 'rounded-full bg-gray-200 animate-pulse', className)} />
+     )
+   }
+ 
+   return (
+     <div className={cn('inline-flex items-center justify-center', getAnimationClass(), className)}>
+       <Icon
+         path={`@mdi/js/${iconName}`}
+         size={size === 'sm' ? 1 : size === 'md' ? 1.5 : size === 'lg' ? 2 : 3}
+         color={color || 'currentColor'}
+         className={cn(sizeClass)}
+       />
+     </div>
+   )
+ }
+ 
+ export default WeatherIcon
```

---

Read file: src/lib/utils.ts

---

```diff
- 
+ 'use client'
+ 
+ import React from 'react'
+ import { ForecastValues, TemperatureUnit } from '@/types/weather'
+ import { formatTemperature } from '@/lib/api/weather'
+ import WeatherIcon from './WeatherIcon'
+ import { cn } from '@/lib/utils'
+ import { format, parseISO } from 'date-fns'
+ 
+ interface WeatherForecastItemProps {
+   timestamp: string
+   values: ForecastValues
+   units: TemperatureUnit
+   type: 'daily' | 'hourly'
+   isSelected?: boolean
+   onClick?: () => void
+   className?: string
+ }
+ 
+ function WeatherForecastItem({
+   timestamp,
+   values,
+   units,
+   type,
+   isSelected = false,
+   onClick,
+   className
+ }: WeatherForecastItemProps) {
+   const date = parseISO(timestamp)
+ 
+   // Format label based on forecast type
+   const timeLabel = type === 'daily'
+     ? format(date, 'EEE')  // Mon, Tue, etc.
+     : format(date, 'h a')  // 1 PM, 2 PM, etc.
+ 
+   // Determine which temperature to display
+   const displayTemperature = type === 'daily'
+     ? values.temperatureMax !== undefined
+       ? formatTemperature(values.temperatureMax, units)
+       : '—'
+     : values.temperature !== undefined
+       ? formatTemperature(values.temperature, units)
+       : '—'
+ 
+   // Format secondary temperature (daily low or feels like)
+   const secondaryTemperature = type === 'daily'
+     ? values.temperatureMin !== undefined
+       ? formatTemperature(values.temperatureMin, units)
+       : '—'
+     : values.temperatureApparent !== undefined
+       ? `Feels: ${formatTemperature(values.temperatureApparent, units)}`
+       : undefined
+ 
+   // Format precipitation probability if available
+   const precipProb = values.precipitationProbability !== undefined
+     ? `${Math.round(values.precipitationProbability)}%`
+     : undefined
+ 
+   return (
+     <div
+       className={cn(
+         'p-3 rounded-lg transition-all cursor-pointer',
+         isSelected
+           ? 'bg-primary/10 border border-primary/20'
+           : 'hover:bg-muted/50 border border-transparent',
+         className
+       )}
+       onClick={onClick}
+     >
+       <div className="flex flex-col items-center space-y-2">
+         <div className="text-sm font-medium">{timeLabel}</div>
+ 
+         <WeatherIcon
+           weatherCode={values.weatherCode || 1000}
+           size={type === 'daily' ? 'md' : 'sm'}
+           animate={isSelected}
+         />
+ 
+         <div className="text-base font-semibold">{displayTemperature}</div>
+ 
+         {secondaryTemperature && (
+           <div className="text-xs text-muted-foreground">{secondaryTemperature}</div>
+         )}
+ 
+         {precipProb && (
+           <div className="flex items-center text-xs text-blue-500">
+             <span className="material-icons-outlined text-xs mr-1">water_drop</span>
+             {precipProb}
+           </div>
+         )}
+       </div>
+     </div>
+   )
+ }
+ 
+ export default WeatherForecastItem
```

---

```diff
- 
+ 'use client'
+ 
+ import React from 'react'
+ import { cn } from '@/lib/utils'
+ import { formatTemperature, getWeatherDescription } from '@/lib/api/weather'
+ import { RealtimeWeatherValues, TemperatureUnit } from '@/types/weather'
+ import WeatherIcon from './WeatherIcon'
+ 
+ interface CurrentWeatherProps {
+   location: string
+   values: RealtimeWeatherValues
+   units: TemperatureUnit
+   className?: string
+ }
+ 
+ function CurrentWeather({
+   location,
+   values,
+   units,
+   className
+ }: CurrentWeatherProps) {
+   const weatherDescription = getWeatherDescription(values.weatherCode)
+ 
+   return (
+     <div className={cn('flex flex-col p-5 rounded-xl bg-card shadow-sm', className)}>
+       <div className="text-lg font-semibold mb-2">{location}</div>
+ 
+       <div className="flex items-center">
+         <div className="flex-1">
+           <div className="flex items-center gap-1">
+             <div className="text-4xl font-bold">{formatTemperature(values.temperature, units)}</div>
+           </div>
+ 
+           <div className="text-sm text-muted-foreground">
+             Feels like {formatTemperature(values.temperatureApparent, units)}
+           </div>
+ 
+           <div className="text-base font-medium mt-1">{weatherDescription}</div>
+         </div>
+ 
+         <div className="flex-shrink-0">
+           <WeatherIcon
+             weatherCode={values.weatherCode}
+             size="lg"
+             animate={true}
+             className="mr-2"
+           />
+         </div>
+       </div>
+ 
+       <div className="grid grid-cols-2 sm:grid-cols-4 gap-4 mt-6">
+         <WeatherDetail
+           icon="water_drop"
+           label="Humidity"
+           value={`${Math.round(values.humidity)}%`}
+         />
+ 
+         <WeatherDetail
+           icon="air"
+           label="Wind"
+           value={`${Math.round(values.windSpeed)} ${units === 'metric' ? 'km/h' : 'mph'}`}
+         />
+ 
+         <WeatherDetail
+           icon="visibility"
+           label="Visibility"
+           value={`${Math.round(values.visibility)} ${units === 'metric' ? 'km' : 'mi'}`}
+         />
+ 
+         <WeatherDetail
+           icon="wb_sunny"
+           label="UV Index"
+           value={getUVIndexDescription(values.uvIndex)}
+         />
+       </div>
+     </div>
+   )
+ }
+ 
+ interface WeatherDetailProps {
+   icon: string
+   label: string
+   value: string
+ }
+ 
+ function WeatherDetail({ icon, label, value }: WeatherDetailProps) {
+   return (
+     <div className="flex flex-col items-start">
+       <div className="flex items-center">
+         <span className="material-icons-outlined text-lg mr-1">{icon}</span>
+         <span className="text-xs font-medium text-muted-foreground">{label}</span>
+       </div>
+       <div className="font-medium text-sm ml-5 mt-1">{value}</div>
+     </div>
+   )
+ }
+ 
+ function getUVIndexDescription(uvIndex: number): string {
+   if (uvIndex <= 2) return 'Low'
+   if (uvIndex <= 5) return 'Moderate'
+   if (uvIndex <= 7) return 'High'
+   if (uvIndex <= 10) return 'Very High'
+   return 'Extreme'
+ }
+ 
+ export default CurrentWeather
```

---

```diff
- 
+ 'use client'
+ 
+ import React, { useState, useEffect, useRef } from 'react'
+ import { Input } from '@/components/ui/input'
+ import { Button } from '@/components/ui/button'
+ import { cn } from '@/lib/utils'
+ import { WeatherLocation } from '@/types/weather'
+ 
+ interface LocationSearchProps {
+   defaultLocation?: string
+   onLocationSelect: (location: string | WeatherLocation) => void
+   className?: string
+ }
+ 
+ function LocationSearch({
+   defaultLocation = '',
+   onLocationSelect,
+   className
+ }: LocationSearchProps) {
+   const [query, setQuery] = useState<string>(defaultLocation)
+   const [isSearching, setIsSearching] = useState<boolean>(false)
+   const inputRef = useRef<HTMLInputElement>(null)
+ 
+   // Handle form submission
+   const handleSubmit = (e: React.FormEvent) => {
+     e.preventDefault()
+     if (query.trim()) {
+       onLocationSelect(query.trim())
+       setIsSearching(false)
+     }
+   }
+ 
+   // Use browser geolocation API
+   const handleGetCurrentLocation = () => {
+     if (!navigator.geolocation) {
+       console.error('Geolocation is not supported by your browser')
+       return
+     }
+ 
+     navigator.geolocation.getCurrentPosition(
+       (position) => {
+         const location: WeatherLocation = {
+           lat: position.coords.latitude,
+           lon: position.coords.longitude
+         }
+         onLocationSelect(location)
+         setQuery(`${location.lat.toFixed(4)}, ${location.lon.toFixed(4)}`)
+         setIsSearching(false)
+       },
+       (error) => {
+         console.error('Error getting location:', error)
+       },
+       { enableHighAccuracy: true, timeout: 5000, maximumAge: 0 }
+     )
+   }
+ 
+   // Handle clicking outside to close search
+   useEffect(() => {
+     const handleClickOutside = (event: MouseEvent) => {
+       if (inputRef.current && !inputRef.current.contains(event.target as Node)) {
+         setIsSearching(false)
+       }
+     }
+ 
+     if (isSearching) {
+       document.addEventListener('mousedown', handleClickOutside)
+     }
+ 
+     return () => {
+       document.removeEventListener('mousedown', handleClickOutside)
+     }
+   }, [isSearching])
+ 
+   // Focuses input when search is opened
+   useEffect(() => {
+     if (isSearching && inputRef.current) {
+       inputRef.current.focus()
+     }
+   }, [isSearching])
+ 
+   if (!isSearching) {
+     return (
+       <div className={cn('flex items-center justify-between', className)}>
+         <div
+           className="flex items-center cursor-pointer text-sm"
+           onClick={() => setIsSearching(true)}
+         >
+           <span className="material-icons-outlined text-lg mr-1">place</span>
+           <span className="truncate max-w-[150px]">{query || 'Search location'}</span>
+         </div>
+ 
+         <Button
+           type="button"
+           size="icon"
+           variant="ghost"
+           onClick={handleGetCurrentLocation}
+           className="h-7 w-7"
+           title="Use current location"
+         >
+           <span className="material-icons-outlined text-sm">my_location</span>
+         </Button>
+       </div>
+     )
+   }
+ 
+   return (
+     <div className={cn('relative', className)}>
+       <form onSubmit={handleSubmit} className="flex items-center gap-1">
+         <Input
+           ref={inputRef}
+           value={query}
+           onChange={(e) => setQuery(e.target.value)}
+           placeholder="City name, Zip code, or Coordinates"
+           className="text-sm h-8"
+         />
+ 
+         <Button
+           type="button"
+           size="icon"
+           variant="ghost"
+           onClick={handleGetCurrentLocation}
+           className="h-8 w-8 flex-shrink-0"
+           title="Use current location"
+         >
+           <span className="material-icons-outlined text-sm">my_location</span>
+         </Button>
+ 
+         <Button
+           type="submit"
+           size="icon"
+           variant="ghost"
+           className="h-8 w-8 flex-shrink-0"
+           title="Search"
+         >
+           <span className="material-icons-outlined text-sm">search</span>
+         </Button>
+       </form>
+     </div>
+   )
+ }
+ 
+ export default LocationSearch
```

---

Now, I'll create the main WeatherForecastWidget component that integrates all the sub-components:

---

```diff
- 
+ 'use client'
+ 
+ import React, { useState, useEffect } from 'react'
+ import { cn } from '@/lib/utils'
+ import { fetchRealtimeWeather, fetchWeatherForecast } from '@/lib/api/weather'
+ import {
+   ForecastResponse,
+   RealtimeWeatherResponse,
+   TemperatureUnit,
+   TimelineData,
+   WeatherForecastWidgetProps,
+   WeatherLocation
+ } from '@/types/weather'
+ import { Skeleton } from '@/components/ui/skeleton'
+ import { Card, CardContent, CardHeader } from '@/components/ui/card'
+ import { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs'
+ import CurrentWeather from './CurrentWeather'
+ import WeatherForecastItem from './WeatherForecastItem'
+ import LocationSearch from './LocationSearch'
+ 
+ /**
+  * A comprehensive weather forecast widget that displays current weather conditions
+  * and forecasts using the Tomorrow.io API.
+  */
+ function WeatherForecastWidget({
+   location: initialLocation = 'Orlando',
+   units = 'metric',
+   showForecast = true,
+   daysToShow = 5,
+   className,
+   onLocationChange
+ }: WeatherForecastWidgetProps) {
+   // State for holding API data
+   const [currentWeather, setCurrentWeather] = useState<RealtimeWeatherResponse | null>(null)
+   const [forecast, setForecast] = useState<ForecastResponse | null>(null)
+   const [location, setLocation] = useState<string | WeatherLocation>(initialLocation)
+   const [isLoading, setIsLoading] = useState<boolean>(true)
+   const [error, setError] = useState<string | null>(null)
+   const [selectedForecastTab, setSelectedForecastTab] = useState<'hourly' | 'daily'>('daily')
+   const [selectedForecastItem, setSelectedForecastItem] = useState<string | null>(null)
+ 
+   // Fetch weather data
+   useEffect(() => {
+     async function fetchWeatherData() {
+       setIsLoading(true)
+       setError(null)
+ 
+       try {
+         // Fetch current weather and forecast in parallel
+         const [currentRes, forecastRes] = await Promise.all([
+           fetchRealtimeWeather(location, units),
+           fetchWeatherForecast(location, units)
+         ])
+ 
+         setCurrentWeather(currentRes)
+         setForecast(forecastRes)
+ 
+         // Select first item in daily forecast by default
+         if (forecastRes?.timelines?.daily && forecastRes.timelines.daily.length > 0) {
+           setSelectedForecastItem(forecastRes.timelines.daily[0].time)
+         }
+ 
+         // Notify parent component of location change if provided
+         if (onLocationChange && currentRes.location) {
+           onLocationChange({
+             lat: currentRes.location.lat,
+             lon: currentRes.location.lon,
+             name: currentRes.location.name
+           })
+         }
+       } catch (err) {
+         console.error('Error fetching weather data:', err)
+         setError('Unable to fetch weather data. Please try again.')
+       } finally {
+         setIsLoading(false)
+       }
+     }
+ 
+     fetchWeatherData()
+   }, [location, units, onLocationChange])
+ 
+   // Handle location change
+   const handleLocationChange = (newLocation: string | WeatherLocation) => {
+     setLocation(newLocation)
+   }
+ 
+   // Functions to limit and extract forecast data
+   const getDailyForecast = () => {
+     if (!forecast?.timelines?.daily) return []
+     return forecast.timelines.daily.slice(0, daysToShow)
+   }
+ 
+   const getHourlyForecast = () => {
+     if (!forecast?.timelines?.hourly) return []
+ 
+     // Get the next 24 hours
+     return forecast.timelines.hourly.slice(0, 24)
+   }
+ 
+   // Handle forecast item selection
+   const handleForecastItemClick = (item: TimelineData) => {
+     setSelectedForecastItem(item.time)
+   }
+ 
+   // Render loading state
+   if (isLoading) {
+     return (
+       <Card className={cn('overflow-hidden', className)}>
+         <CardHeader className="pb-2">
+           <Skeleton className="h-6 w-24" />
+         </CardHeader>
+         <CardContent>
+           <div className="flex flex-col space-y-4">
+             <Skeleton className="h-32 w-full" />
+             {showForecast && <Skeleton className="h-24 w-full" />}
+           </div>
+         </CardContent>
+       </Card>
+     )
+   }
+ 
+   // Render error state
+   if (error || !currentWeather) {
+     return (
+       <Card className={cn('overflow-hidden', className)}>
+         <CardContent className="py-6">
+           <div className="flex flex-col items-center justify-center text-center p-4">
+             <span className="material-icons-outlined text-4xl text-destructive mb-2">
+               error_outline
+             </span>
+             <h3 className="text-lg font-semibold">Weather Unavailable</h3>
+             <p className="text-sm text-muted-foreground mt-1">
+               {error || 'Unable to load weather data'}
+             </p>
+             {location && (
+               <button
+                 onClick={() => setLocation(initialLocation)}
+                 className="mt-4 text-sm text-primary hover:underline"
+               >
+                 Reset location
+               </button>
+             )}
+           </div>
+         </CardContent>
+       </Card>
+     )
+   }
+ 
+   // Format location display name
+   const locationDisplayName = typeof currentWeather.location.name === 'string'
+     ? currentWeather.location.name
+     : typeof location === 'string'
+       ? location
+       : `${location.lat.toFixed(2)}, ${location.lon.toFixed(2)}`
+ 
+   return (
+     <Card className={cn('overflow-hidden', className)}>
+       <CardHeader className="pb-2">
+         <div className="flex items-center justify-between">
+           <h3 className="text-lg font-semibold">Weather</h3>
+           <LocationSearch
+             defaultLocation={locationDisplayName}
+             onLocationSelect={handleLocationChange}
+           />
+         </div>
+       </CardHeader>
+ 
+       <CardContent className="pb-4">
+         {/* Current weather section */}
+         <CurrentWeather
+           location={locationDisplayName}
+           values={currentWeather.data.values}
+           units={units}
+         />
+ 
+         {/* Forecast section */}
+         {showForecast && forecast && (
+           <div className="mt-6">
+             <Tabs value={selectedForecastTab} onValueChange={(v) => setSelectedForecastTab(v as 'hourly' | 'daily')}>
+               <div className="flex items-center justify-between mb-3">
+                 <h4 className="text-md font-semibold">Forecast</h4>
+                 <TabsList className="h-8">
+                   <TabsTrigger value="daily" className="text-xs px-2 py-1">Daily</TabsTrigger>
+                   <TabsTrigger value="hourly" className="text-xs px-2 py-1">Hourly</TabsTrigger>
+                 </TabsList>
+               </div>
+ 
+               <TabsContent value="daily" className="m-0">
+                 <div className="flex overflow-x-auto gap-2 pb-2 scrollbar-thin">
+                   {getDailyForecast().map((item) => (
+                     <WeatherForecastItem
+                       key={item.time}
+                       timestamp={item.time}
+                       values={item.values}
+                       units={units}
+                       type="daily"
+                       isSelected={item.time === selectedForecastItem}
+                       onClick={() => handleForecastItemClick(item)}
+                       className="min-w-[80px] flex-shrink-0"
+                     />
+                   ))}
+                 </div>
+               </TabsContent>
+ 
+               <TabsContent value="hourly" className="m-0">
+                 <div className="flex overflow-x-auto gap-2 pb-2 scrollbar-thin">
+                   {getHourlyForecast().map((item) => (
+                     <WeatherForecastItem
+                       key={item.time}
+                       timestamp={item.time}
+                       values={item.values}
+                       units={units}
+                       type="hourly"
+                       isSelected={item.time === selectedForecastItem}
+                       onClick={() => handleForecastItemClick(item)}
+                       className="min-w-[70px] flex-shrink-0"
+                     />
+                   ))}
+                 </div>
+               </TabsContent>
+             </Tabs>
+ 
+             {/* Weather details section for selected forecast item */}
+             {selectedForecastItem && (
+               <div className="mt-4 pt-4 border-t">
+                 <WeatherDetails
+                   item={
+                     (selectedForecastTab === 'daily'
+                       ? getDailyForecast().find(item => item.time === selectedForecastItem)
+                       : getHourlyForecast().find(item => item.time === selectedForecastItem)) || null
+                   }
+                   units={units}
+                   type={selectedForecastTab}
+                 />
+               </div>
+             )}
+           </div>
+         )}
+ 
+         {/* Attribution */}
+         <div className="text-xs text-muted-foreground mt-4 text-center">
+           Powered by <a
+             href="https://www.tomorrow.io/"
+             target="_blank"
+             rel="noopener noreferrer"
+             className="underline hover:text-primary transition-colors"
+           >
+             Tomorrow.io
+           </a>
+         </div>
+       </CardContent>
+     </Card>
+   )
+ }
+ 
+ interface WeatherDetailsProps {
+   item: TimelineData | null
+   units: TemperatureUnit
+   type: 'daily' | 'hourly'
+ }
+ 
+ function WeatherDetails({ item, units, type }: WeatherDetailsProps) {
+   if (!item) return null
+ 
+   const values = item.values
+   const precipitation = values.precipitationProbability !== undefined
+     ? `${Math.round(values.precipitationProbability)}%`
+     : '0%'
+ 
+   const windSpeed = values.windSpeed !== undefined
+     ? `${Math.round(values.windSpeed)} ${units === 'metric' ? 'km/h' : 'mph'}`
+     : 'N/A'
+ 
+   const humidity = values.humidity !== undefined
+     ? `${Math.round(values.humidity)}%`
+     : 'N/A'
+ 
+   const uvIndex = values.uvIndex !== undefined
+     ? values.uvIndex.toString()
+     : 'N/A'
+ 
+   return (
+     <div className="grid grid-cols-2 sm:grid-cols-4 gap-3 text-sm">
+       <div>
+         <div className="text-muted-foreground text-xs">Precipitation</div>
+         <div className="font-medium">{precipitation}</div>
+       </div>
+ 
+       <div>
+         <div className="text-muted-foreground text-xs">Wind</div>
+         <div className="font-medium">{windSpeed}</div>
+       </div>
+ 
+       <div>
+         <div className="text-muted-foreground text-xs">Humidity</div>
+         <div className="font-medium">{humidity}</div>
+       </div>
+ 
+       <div>
+         <div className="text-muted-foreground text-xs">UV Index</div>
+         <div className="font-medium">{uvIndex}</div>
+       </div>
+ 
+       {type === 'daily' && values.sunriseTime && values.sunsetTime && (
+         <>
+           <div>
+             <div className="text-muted-foreground text-xs">Sunrise</div>
+             <div className="font-medium">
+               {new Date(values.sunriseTime).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}
+             </div>
+           </div>
+ 
+           <div>
+             <div className="text-muted-foreground text-xs">Sunset</div>
+             <div className="font-medium">
+               {new Date(values.sunsetTime).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}
+             </div>
+           </div>
+         </>
+       )}
+     </div>
+   )
+ }
+ 
+ export default WeatherForecastWidget
```

---

```diff
- 
+ // Main widget component
+ export { default as WeatherForecastWidget } from './WeatherForecastWidget'
+ 
+ // Sub-components that can be used independently
+ export { default as CurrentWeather } from './CurrentWeather'
+ export { default as WeatherIcon } from './WeatherIcon'
+ export { default as WeatherForecastItem } from './WeatherForecastItem'
+ export { default as LocationSearch } from './LocationSearch'
```

---

```diff
- 
+ # Weather Forecast Components
+ 
+ A comprehensive set of weather components that integrate with Tomorrow.io API to display current weather conditions and forecasts for Disney vacation planning.
+ 
+ ## Main Component
+ 
+ ### WeatherForecastWidget
+ 
+ The main component that combines all sub-components to create a full-featured weather widget.
+ 
+ ```tsx
+ import { WeatherForecastWidget } from '@/components/weather'
+ 
+ export default function MyPage() {
+   return (
+     <div className="max-w-lg mx-auto">
+       <WeatherForecastWidget 
+         location="Orlando" 
+         units="imperial" 
+         daysToShow={5} 
+       />
+     </div>
+   )
+ }
+ ```
+ 
+ #### Props
+ 
+ | Prop | Type | Default | Description |
+ |------|------|---------|-------------|
+ | `location` | `string \| WeatherLocation` | `'Orlando'` | Location to fetch weather for (city name, coordinates, zip code) |
+ | `units` | `'metric' \| 'imperial'` | `'metric'` | Units system to use for displaying temperature and other measurements |
+ | `showForecast` | `boolean` | `true` | Whether to show forecast section or only current weather |
+ | `daysToShow` | `number` | `5` | Number of days to show in the forecast (max 5) |
+ | `className` | `string` | - | CSS class to apply to the widget container |
+ | `onLocationChange` | `(location: WeatherLocation) => void` | - | Callback when user changes location |
+ 
+ ## Sub-components
+ 
+ The package also exports individual components that can be used independently:
+ 
+ ### WeatherIcon
+ 
+ Displays a weather icon based on the weather code.
+ 
+ ```tsx
+ import { WeatherIcon } from '@/components/weather'
+ 
+ <WeatherIcon weatherCode={1000} size="lg" animate={true} />
+ ```
+ 
+ ### CurrentWeather
+ 
+ Displays current weather conditions for a location.
+ 
+ ```tsx
+ import { CurrentWeather } from '@/components/weather'
+ 
+ <CurrentWeather 
+   location="Orlando" 
+   values={weatherValues} 
+   units="imperial" 
+ />
+ ```
+ 
+ ### WeatherForecastItem
+ 
+ Displays a single forecast item (hourly or daily).
+ 
+ ```tsx
+ import { WeatherForecastItem } from '@/components/weather'
+ 
+ <WeatherForecastItem
+   timestamp="2024-05-20T12:00:00Z"
+   values={forecastValues}
+   units="imperial"
+   type="daily"
+   isSelected={false}
+   onClick={() => handleSelection(item)}
+ />
+ ```
+ 
+ ### LocationSearch
+ 
+ Provides a search interface for changing the weather location.
+ 
+ ```tsx
+ import { LocationSearch } from '@/components/weather'
+ 
+ <LocationSearch
+   defaultLocation="Orlando"
+   onLocationSelect={(location) => setLocation(location)}
+ />
+ ```
+ 
+ ## API & Types
+ 
+ The components use the Tomorrow.io API for weather data. The main types are exported from `@/types/weather`:
+ 
+ ```typescript
+ // Common types
+ export type TemperatureUnit = 'metric' | 'imperial'
+ 
+ export interface WeatherLocation {
+   lat: number
+   lon: number
+   name?: string
+ }
+ 
+ // Component props
+ export interface WeatherForecastWidgetProps {
+   location?: string | WeatherLocation
+   units?: TemperatureUnit
+   showForecast?: boolean
+   daysToShow?: number
+   className?: string
+   onLocationChange?: (location: WeatherLocation) => void
+ }
+ ```
+ 
+ ## Tomorrow.io API
+ 
+ The widget uses Tomorrow.io API with the following endpoints:
+ 
+ 1. Realtime Weather: `https://api.tomorrow.io/v4/weather/realtime`
+ 2. Weather Forecast: `https://api.tomorrow.io/v4/weather/forecast`
+ 
+ The API functions are available in `@/lib/api/weather.ts`. 
```

---

```bash
ls -la package.json
```

```
williamcarrico@CIA woody-disney-vacation-planning % ls -la package.json
-rw-r--r--@ 1 williamcarrico  staff  3094 May 20 11:26 package.json
williamcarrico@CIA woody-disney-vacation-planning %
```

---

Read file: package.json

---

We need to make sure we have the necessary dependencies for our WeatherForecastWidget component. Let's add the missing ones to the package.json file:

---

```diff
      "@heroicons/react": "^2.2.0",
      "@hookform/resolvers": "^5.0.1",
+     "@mdi/js": "^7.8.0",
+     "@mdi/react": "^1.6.1",
      "@radix-ui/react-accordion": "^1.2.10",
      "@radix-ui/react-alert-dialog": "^1.1.13",
```

```diff
      "leaflet": "^1.9.4",
      "lucide-react": "^0.509.0",
+     "material-icons": "^1.13.12",
      "next": "15.3.2",
      "next-safe-action": "^7.10.8",
```

---

```diff
- 
+ {
+   "name": "disney-vacation-weather",
+   "version": "1.0.0",
+   "description": "Weather forecast components for Disney vacation planning using Tomorrow.io API",
+   "private": true,
+   "dependencies": {
+     "date-fns": "^2.30.0",
+     "@mdi/js": "^7.8.0",
+     "@mdi/react": "^1.6.1",
+     "material-icons": "^1.13.12"
+   },
+   "peerDependencies": {
+     "react": "^18.0.0 || ^19.0.0",
+     "react-dom": "^18.0.0 || ^19.0.0",
+     "next": "^13.0.0 || ^14.0.0 || ^15.0.0"
+   }
+ }
```

---

```diff
- 
+ /* Custom animations for Weather components */
+ 
+ @keyframes bounce-slow {
+   0%, 100% {
+     transform: translateY(0);
+   }
+   50% {
+     transform: translateY(-5px);
+   }
+ }
+ 
+ @keyframes shake {
+   0%, 100% {
+     transform: translateX(0);
+   }
+   25% {
+     transform: translateX(-2px);
+   }
+   50% {
+     transform: translateX(0);
+   }
+   75% {
+     transform: translateX(2px);
+   }
+ }
+ 
+ @keyframes fade-in {
+   from {
+     opacity: 0;
+   }
+   to {
+     opacity: 1;
+   }
+ }
+ 
+ @keyframes slide-up {
+   from {
+     transform: translateY(10px);
+     opacity: 0;
+   }
+   to {
+     transform: translateY(0);
+     opacity: 1;
+   }
+ }
+ 
+ .animate-bounce-slow {
+   animation: bounce-slow 2s infinite ease-in-out;
+ }
+ 
+ .animate-shake {
+   animation: shake 1.5s infinite ease-in-out;
+ }
+ 
+ .animate-fade-in {
+   animation: fade-in 0.3s ease-in-out;
+ }
+ 
+ .animate-slide-up {
+   animation: slide-up 0.4s ease-out;
+ }
+ 
+ /* Enhanced scrollbar styles for forecast lists */
+ .scrollbar-thin {
+   scrollbar-width: thin;
+   scrollbar-color: rgba(156, 163, 175, 0.3) transparent;
+ }
+ 
+ .scrollbar-thin::-webkit-scrollbar {
+   height: 5px;
+   width: 5px;
+ }
+ 
+ .scrollbar-thin::-webkit-scrollbar-track {
+   background: transparent;
+ }
+ 
+ .scrollbar-thin::-webkit-scrollbar-thumb {
+   background-color: rgba(156, 163, 175, 0.3);
+   border-radius: 9999px;
+ }
+ 
+ .scrollbar-thin::-webkit-scrollbar-thumb:hover {
+   background-color: rgba(156, 163, 175, 0.5);
+ }
```

---



---

Read file: src/app/layout.tsx

---

Now let's create a usage example page that shows how to use our WeatherForecastWidget:

---

```diff
- 
+ import React from 'react'
+ import { WeatherForecastWidget } from '@/components/weather'
+ import '@/components/weather/animations.css'
+ 
+ export const metadata = {
+   title: 'Weather Forecast Example - Disney Vacation Planning',
+   description: 'Example of the Weather Forecast Widget for Disney vacation planning',
+ }
+ 
+ export default function WeatherExamplePage() {
+   return (
+     <div className="container mx-auto px-4 py-8">
+       <h1 className="text-3xl font-bold mb-6">Weather Forecast for Disney Vacations</h1>
+       
+       <div className="grid grid-cols-1 md:grid-cols-2 gap-8">
+         <div>
+           <h2 className="text-xl font-semibold mb-4">Orlando Weather</h2>
+           <p className="text-muted-foreground mb-6">
+             Check the current weather and forecast for your Disney World vacation.
+             Plan your park visits based on weather conditions.
+           </p>
+           
+           <div className="mt-4">
+             <WeatherForecastWidget 
+               location="Orlando, FL" 
+               units="imperial"
+               daysToShow={5}
+               className="w-full"
+             />
+           </div>
+         </div>
+         
+         <div>
+           <h2 className="text-xl font-semibold mb-4">Anaheim Weather</h2>
+           <p className="text-muted-foreground mb-6">
+             Check the current weather and forecast for your Disneyland vacation.
+             Prepare for your day at the parks with accurate weather data.
+           </p>
+           
+           <div className="mt-4">
+             <WeatherForecastWidget 
+               location="Anaheim, CA" 
+               units="imperial"
+               showForecast={true}
+               daysToShow={3}
+               className="w-full"
+             />
+           </div>
+         </div>
+       </div>
+       
+       <div className="mt-12">
+         <h2 className="text-2xl font-semibold mb-4">Weather Tips for Disney Parks</h2>
+         
+         <div className="grid grid-cols-1 md:grid-cols-3 gap-6 mt-6">
+           <div className="bg-card p-6 rounded-lg shadow-sm">
+             <h3 className="text-lg font-medium mb-2">Rainy Day Essentials</h3>
+             <ul className="list-disc list-inside space-y-2 text-muted-foreground">
+               <li>Pack ponchos instead of umbrellas</li>
+               <li>Bring extra socks to change into</li>
+               <li>Plan indoor attractions and shows</li>
+               <li>Check for weather-related closures</li>
+             </ul>
+           </div>
+           
+           <div className="bg-card p-6 rounded-lg shadow-sm">
+             <h3 className="text-lg font-medium mb-2">Hot Day Strategies</h3>
+             <ul className="list-disc list-inside space-y-2 text-muted-foreground">
+               <li>Stay hydrated with water bottles</li>
+               <li>Take afternoon breaks during peak heat</li>
+               <li>Wear light, breathable clothing</li>
+               <li>Use cooling towels and hats</li>
+             </ul>
+           </div>
+           
+           <div className="bg-card p-6 rounded-lg shadow-sm">
+             <h3 className="text-lg font-medium mb-2">Cold Weather Planning</h3>
+             <ul className="list-disc list-inside space-y-2 text-muted-foreground">
+               <li>Dress in layers for temperature changes</li>
+               <li>Bring gloves and hats during winter</li>
+               <li>Check for seasonal event schedules</li>
+               <li>Watch for reduced hours in off-season</li>
+             </ul>
+           </div>
+         </div>
+       </div>
+       
+       <div className="mt-12 text-center text-sm text-muted-foreground">
+         <p>Weather data provided by Tomorrow.io API</p>
+       </div>
+     </div>
+   )
+ } 
```

---

Let's also add the weather widget to the main dashboard page:

---

<details>
            <summary>Listed directory src/app/dashboard • **12** results</summary>
        
| Name |
|-------|
| 📁 `planning` |
| 📁 `settings` |
| 📁 `itinerary` |
| 📁 `optimizer` |
| 📁 `attractions` |
| 📁 `events` |
| 📁 `dining` |
| 📁 `disneysprings` |
| 📁 `group` |
| 📁 `parks` |
| 📁 `resorts` |
| 📄 `layout.tsx` |

</details>

---

Could not find file 'src/app/dashboard/page.tsx' in the workspace.

---



---

Read file: src/app/dashboard/planning/page.tsx

---

```diff
  import VacationParty from "@/components/group/VacationParty"
  import TripBudgetTracker from "@/components/budget/TripBudgetTracker"
- import WeatherForecastWidget from "@/components/weather/WeatherForecastWidget"
+ import { WeatherForecastWidget } from "@/components/weather"
+ import '@/components/weather/animations.css'
  import WaitTimesDashboard from "@/components/attractions/WaitTimesDashboard"
  import ParkHoursDisplay from "@/components/parks/ParkHoursDisplay"
```

```diff
                              <CardContent>
                                  <Suspense fallback={<Skeleton className="h-32 w-full" />}>
-                                     <WeatherForecastWidget compact vacationId={vacationId} />
+                                     <WeatherForecastWidget
+                                         location="Orlando, FL"
+                                         units="imperial"
+                                         showForecast={true}
+                                         daysToShow={3}
+                                     />
                                  </Suspense>
                              </CardContent>
                              <CardFooter>
-                                 <Button variant="ghost" size="sm" className="w-full justify-between">
+                                 <Button variant="ghost" size="sm" className="w-full justify-between" onClick={() => window.location.href = '/weather-example'}>
                                      View Extended Forecast
                                      <ChevronRight className="h-4 w-4" />
```

```diff
                  <TabsContent value="weather" className="space-y-6 mt-0">
                      <Suspense fallback={<div className="h-64 flex items-center justify-center"><div className="animate-spin h-8 w-8 border-4 border-primary border-t-transparent rounded-full"></div></div>}>
-                         <WeatherForecastWidget vacationId={vacationId} />
+                         <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-6">
+                             <div>
+                                 <h2 className="text-xl font-semibold mb-4">Orlando Weather</h2>
+                                 <WeatherForecastWidget 
+                                     location="Orlando, FL" 
+                                     units="imperial"
+                                     daysToShow={5}
+                                     className="w-full"
+                                 />
+                             </div>
+                             <div>
+                                 <h2 className="text-xl font-semibold mb-4">Anaheim Weather</h2>
+                                 <WeatherForecastWidget 
+                                     location="Anaheim, CA" 
+                                     units="imperial"
+                                     daysToShow={5}
+                                     className="w-full"
+                                 />
+                             </div>
+                         </div>
+                         <div className="mt-8">
+                             <Card>
+                                 <CardHeader>
+                                     <CardTitle>Weather Planning Tips</CardTitle>
+                                     <CardDescription>Make the most of your Disney vacation regardless of weather</CardDescription>
+                                 </CardHeader>
+                                 <CardContent>
+                                     <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
+                                         <div>
+                                             <h3 className="text-lg font-medium mb-2">Rainy Day Tips</h3>
+                                             <ul className="list-disc list-inside space-y-2 text-muted-foreground">
+                                                 <li>Pack ponchos instead of umbrellas</li>
+                                                 <li>Wear waterproof shoes</li>
+                                                 <li>Plan indoor attractions</li>
+                                                 <li>Lines are typically shorter on rainy days</li>
+                                             </ul>
+                                         </div>
+                                         <div>
+                                             <h3 className="text-lg font-medium mb-2">Hot Weather Tips</h3>
+                                             <ul className="list-disc list-inside space-y-2 text-muted-foreground">
+                                                 <li>Stay hydrated with water bottles</li>
+                                                 <li>Take afternoon breaks during peak heat</li>
+                                                 <li>Use cooling towels and hats</li>
+                                                 <li>Schedule water rides for hot afternoons</li>
+                                             </ul>
+                                         </div>
+                                         <div>
+                                             <h3 className="text-lg font-medium mb-2">Weather Resources</h3>
+                                             <ul className="list-disc list-inside space-y-2 text-muted-foreground">
+                                                 <li>Check real-time radar in our app</li>
+                                                 <li>Set weather alerts for your trip</li>
+                                                 <li>Download our mobile app for updates</li>
+                                                 <li>Check ride closures during storms</li>
+                                             </ul>
+                                         </div>
+                                     </div>
+                                 </CardContent>
+                             </Card>
+                         </div>
                      </Suspense>
                  </TabsContent>
```

---

Now we have successfully created the WeatherForecastWidget component and integrated it into the application. Here's a summary of what we've done:

1. Created a comprehensive set of TypeScript interfaces for the Tomorrow.io API
2. Created API utility functions for fetching weather data
3. Built reusable components:
   - `WeatherIcon` - Displays weather icons based on weather codes
   - `CurrentWeather` - Shows current weather conditions
   - `WeatherForecastItem` - Shows individual forecast items
   - `LocationSearch` - Allows users to search for locations
   - `WeatherForecastWidget` - Main widget that combines all components

4. Added animations to make the weather components more engaging
5. Created example pages showing how to use the widget
6. Updated the dashboard to use our new weather widget
7. Added proper documentation in a README file

The weather widget we've created provides the following features:
- Current weather conditions with temperature, feels like, and description
- Hourly and daily forecasts
- Location search with geolocation support
- Weather details including humidity, wind speed, UV index, etc.
- Weather icons that represent different weather conditions
- Responsive design for all screen sizes
- Loading and error states
- Customizable through props

This implementation provides a rich, interactive weather experience for Disney vacation planning using the Tomorrow.io API.

---

